{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport Button from '../reuse/Button';\nimport { useInput } from '../../client/hooks/useInput';\nimport axios from 'axios';\nimport { Search } from '@material-ui/icons';\nimport Input from '../reuse/Input';\nconst ItemContainer = styled.div.withConfig({\n  displayName: \"SearchPlace__ItemContainer\",\n  componentId: \"vyf8q1-0\"\n})([\"padding:1rem;& h4,p{margin:0;}&:hover{cursor:pointer;background:#eee;}\"]);\nconst ListContainer = styled.div.withConfig({\n  displayName: \"SearchPlace__ListContainer\",\n  componentId: \"vyf8q1-1\"\n})([\"max-height:16em;overflow-y:auto;position:absolute;width:100%;background:rgba(255,255,255,1);border-radius:0.5rem;box-shadow:2px 2px 8px rgba(0,0,0,0.3);transition:all 0.5s ease;& > div{animation:transHeight 0.3s ease 0s;}@keyframes transHeight{from{max-height:0;}to{max-height:16em;}}\"]);\nconst StyledForm = styled.form.withConfig({\n  displayName: \"SearchPlace__StyledForm\",\n  componentId: \"vyf8q1-2\"\n})([\"width:100%;display:flex;& > input{flex:1;}& > button{margin:0 0 0 0.5rem;}\"]);\nconst Container = styled.div.withConfig({\n  displayName: \"SearchPlace__Container\",\n  componentId: \"vyf8q1-3\"\n})([\"width:100%;position:relative;z-index:8;\"]);\n\nconst PlaceItem = props => {\n  const {\n    place,\n    setPlace,\n    onClose\n  } = props;\n  return /*#__PURE__*/_jsxs(ItemContainer, {\n    onClick: () => {\n      setPlace(place);\n      onClose();\n    },\n    className: \"placeItem\",\n    children: [/*#__PURE__*/_jsx(\"h4\", {\n      className: \"placeItem\",\n      children: place.name\n    }), /*#__PURE__*/_jsx(\"p\", {\n      className: \"placeItem\",\n      children: place.formatted_address\n    })]\n  });\n};\n\nconst SearchPlace = props => {\n  const input = useInput('');\n  const {\n    setPlace\n  } = props;\n  const {\n    0: places,\n    1: setPlaces\n  } = useState([]);\n  const {\n    0: open,\n    1: setOpen\n  } = useState(false);\n\n  const onSearch = e => {\n    e.preventDefault();\n    axios.get(`/api/map/searchPlaces?search=${input.value}`).then(res => {\n      setPlaces(res.data.places);\n      handleOpen();\n    });\n  };\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    document.addEventListener('click', e => {\n      if (!e.target.classList.value.includes('placeItem')) {\n        handleClose();\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxs(Container, {\n    id: \"searchPlaces\",\n    children: [/*#__PURE__*/_jsxs(StyledForm, {\n      onSubmit: onSearch,\n      onClick: handleOpen,\n      className: \"placeItem\",\n      children: [/*#__PURE__*/_jsx(Input, _objectSpread(_objectSpread({}, input), {}, {\n        placeholder: \"\\uC8FC\\uC18C\\uB97C \\uAC80\\uC0C9\\uD574\\uC8FC\\uC138\\uC694\",\n        border: \"1px solid rgba(0,0,0,0.42)\",\n        borderRadius: \"0.25rem\",\n        textAlign: \"left\",\n        className: \"placeItem\"\n      })), /*#__PURE__*/_jsx(Button, {\n        type: \"submit\",\n        padding: \"0.375rem 1rem\",\n        className: \"placeItem\",\n        children: /*#__PURE__*/_jsx(Search, {})\n      })]\n    }), /*#__PURE__*/_jsx(ListContainer, {\n      id: \"placesList\",\n      onBlur: handleClose,\n      children: places.length > 0 && open ? /*#__PURE__*/_jsx(\"div\", {\n        children: places.map(place => /*#__PURE__*/_jsx(PlaceItem, {\n          place: place,\n          setPlace: setPlace,\n          onClose: handleClose\n        }, place.name))\n      }) : ''\n    })]\n  });\n};\n\nexport default SearchPlace;","map":null,"metadata":{},"sourceType":"module"}