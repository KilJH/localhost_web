{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/zknock/Develop/localhost_web/components/user/Login.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Button, TextField } from '@material-ui/core';\nimport React, { useContext } from 'react';\nimport styled from 'styled-components';\nimport { useInput } from '../../client/hooks/useInput';\nimport axios from 'axios';\nimport Link from 'next/link';\nimport { UserSetterContext } from '../../context/user';\nconst LoginContainer = styled.div.withConfig({\n  displayName: \"Login__LoginContainer\",\n  componentId: \"sc-1i3rp6h-0\"\n})([\"width:16rem;padding:2rem;& > form{padding:1rem 0;& > div{margin:1rem 0;}}\"]);\n\nconst Login = () => {\n  const email = useInput('');\n  const pw = useInput('', value => !value.includes(';'));\n  const setCurrentUser = useContext(UserSetterContext);\n\n  const onSubmit = e => {\n    e.preventDefault();\n    axios.post(`/api/auth/login`, {\n      email: email.value,\n      pw: pw.value\n    }, {\n      withCredentials: true\n    }).then(res => {\n      if (res.data.success) {\n        setCurrentUser(res.data.user); // setCookie('token', res.data.token, 1);\n\n        location.href = '/';\n      } else {\n        alert(res.data.message);\n      }\n    }); // axios.get(`${SERVER}/api/auth/check`, { withCredentials: true });\n  };\n\n  return /*#__PURE__*/_jsxDEV(LoginContainer, {\n    children: [/*#__PURE__*/_jsxDEV(\"h3\", {\n      children: \"\\uB85C\\uADF8\\uC778\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 53,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"form\", {\n      onSubmit: onSubmit,\n      children: [/*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(TextField, _objectSpread(_objectSpread({}, email), {}, {\n          label: \"Email\",\n          variant: \"outlined\",\n          type: \"email\",\n          fullWidth: true\n        }), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 56,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 55,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(TextField, _objectSpread(_objectSpread({}, pw), {}, {\n          label: \"Password\",\n          variant: \"outlined\",\n          type: \"password\",\n          fullWidth: true\n        }), void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 65,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 64,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\" // onClick={onSubmit}\n          ,\n          variant: \"contained\",\n          color: \"primary\",\n          fullWidth: true,\n          children: \"\\uB85C\\uADF8\\uC778\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 75,\n          columnNumber: 6\n        }, this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 74,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 54,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"hr\", {}, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(Link, {\n      href: \"/users/register\",\n      children: /*#__PURE__*/_jsxDEV(Button, {\n        fullWidth: true,\n        variant: \"contained\",\n        children: \"\\uD68C\\uC6D0\\uAC00\\uC785\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 89,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 88,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 52,\n    columnNumber: 3\n  }, this);\n};\n\nexport default Login;","map":{"version":3,"sources":["/Users/zknock/Develop/localhost_web/components/user/Login.tsx"],"names":["Button","TextField","React","useContext","styled","useInput","axios","Link","UserSetterContext","LoginContainer","div","Login","email","pw","value","includes","setCurrentUser","onSubmit","e","preventDefault","post","withCredentials","then","res","data","success","user","location","href","alert","message"],"mappings":";;;;;;;;;AAAA,SAASA,MAAT,EAAiBC,SAAjB,QAAkC,mBAAlC;AACA,OAAOC,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,QAAT,QAAyB,6BAAzB;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,IAAP,MAAiB,WAAjB;AACA,SAASC,iBAAT,QAAkC,oBAAlC;AAEA,MAAMC,cAAc,GAAGL,MAAM,CAACM,GAAV;AAAA;AAAA;AAAA,iFAApB;;AAWA,MAAMC,KAAK,GAAG,MAAM;AACnB,QAAMC,KAAK,GAAGP,QAAQ,CAAC,EAAD,CAAtB;AACA,QAAMQ,EAAE,GAAGR,QAAQ,CAAC,EAAD,EAAMS,KAAD,IAAmB,CAACA,KAAK,CAACC,QAAN,CAAe,GAAf,CAAzB,CAAnB;AACA,QAAMC,cAAc,GAAGb,UAAU,CAACK,iBAAD,CAAjC;;AAEA,QAAMS,QAAQ,GAAIC,CAAD,IAAY;AAC5BA,IAAAA,CAAC,CAACC,cAAF;AAEAb,IAAAA,KAAK,CACHc,IADF,CAEG,iBAFH,EAGE;AACCR,MAAAA,KAAK,EAAEA,KAAK,CAACE,KADd;AAECD,MAAAA,EAAE,EAAEA,EAAE,CAACC;AAFR,KAHF,EAOE;AAAEO,MAAAA,eAAe,EAAE;AAAnB,KAPF,EASEC,IATF,CASOC,GAAG,IAAI;AACZ,UAAIA,GAAG,CAACC,IAAJ,CAASC,OAAb,EAAsB;AACrBT,QAAAA,cAAc,CAACO,GAAG,CAACC,IAAJ,CAASE,IAAV,CAAd,CADqB,CAErB;;AAEAC,QAAAA,QAAQ,CAACC,IAAT,GAAgB,GAAhB;AACA,OALD,MAKO;AACNC,QAAAA,KAAK,CAACN,GAAG,CAACC,IAAJ,CAASM,OAAV,CAAL;AACA;AACD,KAlBF,EAH4B,CAuB5B;AACA,GAxBD;;AA0BA,sBACC,QAAC,cAAD;AAAA,4BACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,eAEC;AAAM,MAAA,QAAQ,EAAEb,QAAhB;AAAA,8BACC;AAAA,+BACC,QAAC,SAAD,kCACKL,KADL;AAEC,UAAA,KAAK,EAAC,OAFP;AAGC,UAAA,OAAO,EAAC,UAHT;AAIC,UAAA,IAAI,EAAC,OAJN;AAKC,UAAA,SAAS;AALV;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,cADD,eAUC;AAAA,+BACC,QAAC,SAAD,kCACKC,EADL;AAEC,UAAA,KAAK,EAAC,UAFP;AAGC,UAAA,OAAO,EAAC,UAHT;AAIC,UAAA,IAAI,EAAC,UAJN;AAKC,UAAA,SAAS;AALV;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,cAVD,eAoBC;AAAA,+BACC,QAAC,MAAD;AACC,UAAA,IAAI,EAAC,QADN,CAEC;AAFD;AAGC,UAAA,OAAO,EAAC,WAHT;AAIC,UAAA,KAAK,EAAC,SAJP;AAKC,UAAA,SAAS,MALV;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,cApBD;AAAA;AAAA;AAAA;AAAA;AAAA,YAFD,eAmCC;AAAA;AAAA;AAAA;AAAA,YAnCD,eAoCC,QAAC,IAAD;AAAM,MAAA,IAAI,EAAC,iBAAX;AAAA,6BACC,QAAC,MAAD;AAAQ,QAAA,SAAS,MAAjB;AAAkB,QAAA,OAAO,EAAC,WAA1B;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AADD;AAAA;AAAA;AAAA;AAAA,YApCD;AAAA;AAAA;AAAA;AAAA;AAAA,UADD;AA4CA,CA3ED;;AA6EA,eAAeF,KAAf","sourcesContent":["import { Button, TextField } from '@material-ui/core';\nimport React, { useContext } from 'react';\nimport styled from 'styled-components';\nimport { useInput } from '../../client/hooks/useInput';\nimport axios from 'axios';\nimport Link from 'next/link';\nimport { UserSetterContext } from '../../context/user';\n\nconst LoginContainer = styled.div`\n\twidth: 16rem;\n\tpadding: 2rem;\n\t& > form {\n\t\tpadding: 1rem 0;\n\t\t& > div {\n\t\t\tmargin: 1rem 0;\n\t\t}\n\t}\n`;\n\nconst Login = () => {\n\tconst email = useInput('');\n\tconst pw = useInput('', (value: string) => !value.includes(';'));\n\tconst setCurrentUser = useContext(UserSetterContext);\n\n\tconst onSubmit = (e: any) => {\n\t\te.preventDefault();\n\n\t\taxios\n\t\t\t.post(\n\t\t\t\t`/api/auth/login`,\n\t\t\t\t{\n\t\t\t\t\temail: email.value,\n\t\t\t\t\tpw: pw.value,\n\t\t\t\t},\n\t\t\t\t{ withCredentials: true },\n\t\t\t)\n\t\t\t.then(res => {\n\t\t\t\tif (res.data.success) {\n\t\t\t\t\tsetCurrentUser(res.data.user);\n\t\t\t\t\t// setCookie('token', res.data.token, 1);\n\n\t\t\t\t\tlocation.href = '/';\n\t\t\t\t} else {\n\t\t\t\t\talert(res.data.message);\n\t\t\t\t}\n\t\t\t});\n\n\t\t// axios.get(`${SERVER}/api/auth/check`, { withCredentials: true });\n\t};\n\n\treturn (\n\t\t<LoginContainer>\n\t\t\t<h3>로그인</h3>\n\t\t\t<form onSubmit={onSubmit}>\n\t\t\t\t<div>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\t{...email}\n\t\t\t\t\t\tlabel='Email'\n\t\t\t\t\t\tvariant='outlined'\n\t\t\t\t\t\ttype='email'\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t<TextField\n\t\t\t\t\t\t{...pw}\n\t\t\t\t\t\tlabel='Password'\n\t\t\t\t\t\tvariant='outlined'\n\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t/>\n\t\t\t\t</div>\n\n\t\t\t\t<div>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype='submit'\n\t\t\t\t\t\t// onClick={onSubmit}\n\t\t\t\t\t\tvariant='contained'\n\t\t\t\t\t\tcolor='primary'\n\t\t\t\t\t\tfullWidth\n\t\t\t\t\t>\n\t\t\t\t\t\t로그인\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</form>\n\n\t\t\t<hr />\n\t\t\t<Link href='/users/register'>\n\t\t\t\t<Button fullWidth variant='contained'>\n\t\t\t\t\t회원가입\n\t\t\t\t</Button>\n\t\t\t</Link>\n\t\t</LoginContainer>\n\t);\n};\n\nexport default Login;\n"]},"metadata":{},"sourceType":"module"}