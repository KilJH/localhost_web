{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Button } from '@material-ui/core';\nimport axios from 'axios';\nimport SERVER from '../../../client/utils/url';\nimport Router from 'next/router';\nimport { UserStateContext } from '../../../context/user';\nconst ButtonLabel = styled(Button).withConfig({\n  displayName: \"HostApplicantItem__ButtonLabel\",\n  componentId: \"sc-1r47kb-0\"\n})([\"&.MuiButton-root{color:#5197d5;margin:0;font-size:0.9em;&:hover{color:rgb(33,33,33);}}&.MuiButton-textSecondary{color:#e74c3c;}\"]);\nconst ButtonTd = styled.td.withConfig({\n  displayName: \"HostApplicantItem__ButtonTd\",\n  componentId: \"sc-1r47kb-1\"\n})([\"max-width:10em;min-width:10em;\"]);\nexport default function HostApplicantItem(props) {\n  const {\n    applicant\n  } = props;\n  const {\n    0: list,\n    1: setList\n  } = useState(applicant);\n  const currentUser = useContext(UserStateContext);\n  useEffect(() => {\n    setList(applicant);\n  }, [applicant]);\n\n  const onApprovalHandler = async e => {\n    e.preventDefault();\n\n    try {\n      const res = await axios.post(`${SERVER}/api/host/application/approve`, {\n        id: list.user.id,\n        hostUserId: currentUser.id\n      });\n\n      if (res.data.success) {\n        const createRoomRes = await axios.post(`${SERVER}/api/message/room/create`, {\n          hostUserId: currentUser.id,\n          userId: list.user.id\n        });\n\n        if (createRoomRes.data.success) {\n          alert('승인 처리되었습니다. 채팅을 통해 약속을 잡으세요');\n          Router.push('/hosts/myhosting');\n        }\n      }\n    } catch (err) {\n      return console.log(err);\n    }\n  };\n\n  const onDenialHandler = async e => {\n    e.preventDefault();\n\n    try {\n      const res = await axios.post(`${SERVER}/api/host/application/deny`, {\n        id: list.user.id,\n        hostUserId: currentUser.id\n      });\n\n      if (res.data.success) {\n        alert('거부 처리되었습니다.');\n        Router.push('/hosts/myhosting');\n      }\n    } catch (err) {\n      return console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsx(React.Fragment, {\n    children: /*#__PURE__*/_jsxs(\"tr\", {\n      children: [/*#__PURE__*/_jsx(\"td\", {\n        children: (applicant === null || applicant === void 0 ? void 0 : applicant.user.nickname) || '닉네임'\n      }), /*#__PURE__*/_jsx(\"td\", {\n        children: (applicant === null || applicant === void 0 ? void 0 : applicant.date) || '2021-01-01'\n      }), /*#__PURE__*/_jsxs(ButtonTd, {\n        children: [/*#__PURE__*/_jsx(ButtonLabel, {\n          onClick: onApprovalHandler,\n          children: \"\\uC2B9\\uC778\"\n        }), /*#__PURE__*/_jsx(ButtonLabel, {\n          onClick: onDenialHandler,\n          color: \"secondary\",\n          children: \"\\uAC70\\uBD80\"\n        })]\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}