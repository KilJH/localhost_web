{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _defineProperty from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport _asyncToGenerator from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/zknock/Develop/localhost_web/components/user/Mypage/Privacy.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport { Modal, Fade, Snackbar } from '@material-ui/core';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useInput } from '../../../client/hooks/useInput';\nimport styled from 'styled-components';\nimport { UserSetterContext, UserStateContext } from '../../../context/user';\nimport axios from 'axios';\nimport SERVER from '../../../client/utils/url';\nimport UserPhoto from '../UserPhoto';\nimport Button from '../../reuse/Button';\nimport CpxBarometer from '../../reuse/CpxBarometer';\nimport Input from '../../reuse/Input';\nimport SearchPlace from '../../search/SearchPlace';\nimport Alert from '@material-ui/lab/Alert';\nvar PrivacyContainer = styled.div.withConfig({\n  displayName: \"Privacy__PrivacyContainer\",\n  componentId: \"ksyvsn-0\"\n})([\"margin:0 auto;& > div{margin:1rem auto;display:flex;align-items:center;& > div{margin:0 1rem;}& > div:first-child{flex:1;}& > div:last-child{flex:3;}& input{width:16em;}}\"]);\n_c = PrivacyContainer;\nvar StyledModal = styled(Modal).withConfig({\n  displayName: \"Privacy__StyledModal\",\n  componentId: \"ksyvsn-1\"\n})([\"display:flex;align-items:center;justify-content:center;& .searchForm{width:80vw;max-width:800px;background:rgba(255,255,255,0.9);padding:1rem;border-radius:0.25rem;outline:0;box-shadow:2px 2px 8px rgba(0,0,0,0.3),-2px -2px 8px rgba(0,0,0,0.3);}\"]);\n_c2 = StyledModal;\nvar inputProps = {\n  width: '100% !important',\n  borderRadius: '0.25rem',\n  border: '1px solid rgba(0,0,0,0.41)',\n  textAlign: 'left'\n};\nvar btnProps = {\n  padding: '0.75rem 1rem'\n};\n\nvar Privacy = function Privacy(props) {\n  _s();\n\n  var currentUser = useContext(UserStateContext);\n  var setCurrentUser = useContext(UserSetterContext); // 입력받는 데이터\n\n  var pwInput = useInput('');\n  var nnInput = useInput(currentUser.nickname);\n  var phInput = useInput(currentUser.phone);\n\n  var _useState = useState({\n    name: '',\n    formatted_address: currentUser.address,\n    geometry: {\n      location: {\n        lat: 0,\n        lng: 0\n      }\n    }\n  }),\n      place = _useState[0],\n      setPlace = _useState[1];\n\n  var _useState2 = useState(),\n      img = _useState2[0],\n      setImg = _useState2[1];\n\n  var _useState3 = useState(currentUser.photo),\n      photoUrl = _useState3[0],\n      setPhotoUrl = _useState3[1]; // 패스워드 수정 on/off\n\n\n  var _useState4 = useState(false),\n      enabledPw = _useState4[0],\n      setEnabledPw = _useState4[1]; // 정보변경 알림\n\n\n  var _useState5 = useState(false),\n      onToast = _useState5[0],\n      setOnToase = _useState5[1];\n\n  var onOpenToast = function onOpenToast() {\n    setOnToase(true);\n  };\n\n  var onCloseToast = function onCloseToast() {\n    return function (reason) {\n      if (reason === 'clickaway') {\n        return;\n      }\n\n      setOnToase(false);\n    };\n  }; // 패스워드 변경 알림\n\n\n  var _useState6 = useState(false),\n      onPwToast = _useState6[0],\n      setOnPwToase = _useState6[1];\n\n  var onOpenPwToast = function onOpenPwToast() {\n    setOnPwToase(true);\n  };\n\n  var onClosePwToast = function onClosePwToast() {\n    return function (reason) {\n      if (reason === 'clickaway') {\n        return;\n      }\n\n      setOnPwToase(false);\n    };\n  }; // 취소버튼\n\n\n  var onReset = function onReset() {\n    pwInput.setValue('');\n    nnInput.setValue(currentUser.nickname);\n    phInput.setValue(currentUser.phone);\n    setPlace({\n      name: '',\n      formatted_address: currentUser.address,\n      geometry: {\n        location: {\n          lat: 0,\n          lng: 0\n        }\n      }\n    });\n    setEnabledPw(false);\n  }; // 수정버튼\n\n\n  var onSubmit = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var address, user, res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              address = place.name === '' || !place.name ? place.formatted_address : \"\".concat(place.formatted_address, \"(\").concat(place.name, \")\");\n              user = {\n                email: currentUser.email,\n                nickname: nnInput.value,\n                phone: phInput.value,\n                address: address\n              }; // 유저정보 변경\n\n              _context.next = 5;\n              return axios.post(\"\".concat(SERVER, \"/api/user/update\"), _objectSpread({}, user));\n\n            case 5:\n              res = _context.sent;\n\n              if (res.data.success) {\n                setCurrentUser(_objectSpread(_objectSpread({}, currentUser), user));\n                onOpenToast(); // Router.push('/users/mypage');\n              }\n\n            case 7:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee);\n    }));\n\n    return function onSubmit(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }(); // 비밀번호 변경버튼\n\n\n  var onClickPw = function onClickPw() {\n    if (enabledPw) {\n      axios.post(\"\".concat(SERVER, \"/api/user/updatePW\"), {\n        email: currentUser.email,\n        pw: pwInput.value\n      }).then(function (res) {\n        res.data.success ? onOpenPwToast() : '';\n      });\n    }\n\n    pwInput.setValue('');\n    setEnabledPw(!enabledPw);\n  }; // 비밀번호 취소버튼\n\n\n  var onResetPw = function onResetPw() {\n    pwInput.setValue('');\n    setEnabledPw(false);\n  };\n\n  var onClickPhoto = function onClickPhoto() {\n    var input = document.createElement('input');\n    input.type = 'file';\n    input.accept = 'image/*';\n    input.click();\n\n    input.onchange = function (e) {\n      setImg(e.target.files[0]);\n    };\n  };\n\n  var onClickReset = function onClickReset() {\n    setPhotoUrl('');\n    axios.post(\"\".concat(SERVER, \"/api/user/update/photo\"), {\n      id: currentUser.id,\n      url: ''\n    }).then(function (res) {\n      console.log(res);\n    });\n  }; // 이미지가 바뀌었을 때\n\n\n  useEffect(function () {\n    if (img !== null) {\n      // formData generate\n      var formData = new FormData(); // formData에 key, value 추가\n\n      formData.append('file', img);\n      formData.append('name', \"user_profile_\".concat(currentUser.id));\n      axios.post(\"\".concat(SERVER, \"/api/s3/upload\"), formData).then(function (res) {\n        // 뷰에 포토 수정\n        var time = new Date().getTime();\n        setPhotoUrl(\"\".concat(res.data.url, \"?time=\").concat(time)); // 디비에 포토 수정\n\n        axios.post(\"\".concat(SERVER, \"/api/user/update/photo\"), {\n          id: currentUser.id,\n          url: res.data.url\n        }).then(function () {\n          location.href = '/users/mypage';\n        });\n      })[\"catch\"](function (err) {\n        console.log(err);\n      });\n    }\n  }, [img]); // 모달을 위한 State\n\n  var _useState7 = useState(false),\n      open = _useState7[0],\n      setOpen = _useState7[1];\n\n  var handleOpen = function handleOpen() {\n    setOpen(true);\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  useEffect(function () {\n    setOpen(false);\n  }, [place]);\n  return /*#__PURE__*/_jsxDEV(\"section\", {\n    id: props.id,\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(\"section\", {\n        children: [/*#__PURE__*/_jsxDEV(\"header\", {\n          children: /*#__PURE__*/_jsxDEV(\"h3\", {\n            children: \"\\uAE30\\uBCF8 \\uD68C\\uC6D0\\uC815\\uBCF4\"\n          }, void 0, false, {\n            fileName: _jsxFileName,\n            lineNumber: 238,\n            columnNumber: 7\n          }, _this)\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 237,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(PrivacyContainer, {\n          children: [/*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\uC0AC\\uC9C4: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 242,\n              columnNumber: 8\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(UserPhoto, {\n                src: photoUrl,\n                width: 8,\n                margin: \"1rem 0\",\n                onClick: onClickPhoto,\n                hover: true\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 244,\n                columnNumber: 9\n              }, _this), /*#__PURE__*/_jsxDEV(Button, _objectSpread(_objectSpread({}, btnProps), {}, {\n                \"default\": true,\n                type: \"button\",\n                onClick: onClickReset,\n                children: \"\\uAE30\\uBCF8\\uC774\\uBBF8\\uC9C0\\uB85C \\uBCC0\\uACBD\"\n              }), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 252,\n                columnNumber: 9\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 243,\n              columnNumber: 8\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 241,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\uC774\\uBA54\\uC77C: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 263,\n              columnNumber: 8\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: currentUser.email\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 264,\n              columnNumber: 8\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 262,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\uD328\\uC2A4\\uC6CC\\uB4DC: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 267,\n              columnNumber: 8\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(\"div\", {\n                style: {\n                  display: 'flex'\n                },\n                children: [/*#__PURE__*/_jsxDEV(Input, _objectSpread(_objectSpread({\n                  type: \"password\"\n                }, inputProps), {}, {\n                  disabled: !enabledPw\n                }, pwInput), void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 270,\n                  columnNumber: 10\n                }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n                  style: {\n                    whiteSpace: 'nowrap'\n                  },\n                  children: [/*#__PURE__*/_jsxDEV(Button, _objectSpread(_objectSpread({}, btnProps), {}, {\n                    type: \"button\",\n                    onClick: onClickPw,\n                    \"default\": !enabledPw,\n                    children: \"\\uBCC0\\uACBD\"\n                  }), void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 277,\n                    columnNumber: 11\n                  }, _this), enabledPw ? /*#__PURE__*/_jsxDEV(Button, _objectSpread(_objectSpread({}, btnProps), {}, {\n                    \"default\": true,\n                    type: \"button\",\n                    onClick: onResetPw,\n                    children: \"\\uCDE8\\uC18C\"\n                  }), void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 286,\n                    columnNumber: 12\n                  }, _this) : '']\n                }, void 0, true, {\n                  fileName: _jsxFileName,\n                  lineNumber: 276,\n                  columnNumber: 10\n                }, _this)]\n              }, void 0, true, {\n                fileName: _jsxFileName,\n                lineNumber: 269,\n                columnNumber: 9\n              }, _this), /*#__PURE__*/_jsxDEV(CpxBarometer, {\n                value: pwInput.value\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 299,\n                columnNumber: 9\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 268,\n              columnNumber: 8\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 266,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\uC774\\uB984:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 303,\n              columnNumber: 8\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: currentUser.name\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 304,\n              columnNumber: 8\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 302,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\uB2C9\\uB124\\uC784:\"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 307,\n              columnNumber: 8\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Input, _objectSpread(_objectSpread({}, inputProps), nnInput), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 309,\n                columnNumber: 9\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 308,\n              columnNumber: 8\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 306,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\uD734\\uB300\\uD3F0: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 313,\n              columnNumber: 8\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: /*#__PURE__*/_jsxDEV(Input, _objectSpread(_objectSpread({}, inputProps), phInput), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 315,\n                columnNumber: 9\n              }, _this)\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 314,\n              columnNumber: 8\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 312,\n            columnNumber: 7\n          }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n            children: [/*#__PURE__*/_jsxDEV(\"div\", {\n              children: \"\\uC8FC\\uC18C: \"\n            }, void 0, false, {\n              fileName: _jsxFileName,\n              lineNumber: 319,\n              columnNumber: 8\n            }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n              children: [/*#__PURE__*/_jsxDEV(Input, _objectSpread(_objectSpread({}, inputProps), {}, {\n                value: place.name ? \"\".concat(place.formatted_address, \"(\").concat(place.name, \")\") : currentUser.address,\n                onClick: handleOpen,\n                onChange: handleOpen\n              }), void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 321,\n                columnNumber: 9\n              }, _this), /*#__PURE__*/_jsxDEV(StyledModal, {\n                open: open,\n                onClose: handleClose,\n                children: /*#__PURE__*/_jsxDEV(Fade, {\n                  \"in\": open,\n                  children: /*#__PURE__*/_jsxDEV(\"div\", {\n                    className: \"searchForm\",\n                    children: /*#__PURE__*/_jsxDEV(SearchPlace, {\n                      setPlace: setPlace\n                    }, void 0, false, {\n                      fileName: _jsxFileName,\n                      lineNumber: 335,\n                      columnNumber: 12\n                    }, _this)\n                  }, void 0, false, {\n                    fileName: _jsxFileName,\n                    lineNumber: 334,\n                    columnNumber: 11\n                  }, _this)\n                }, void 0, false, {\n                  fileName: _jsxFileName,\n                  lineNumber: 333,\n                  columnNumber: 10\n                }, _this)\n              }, void 0, false, {\n                fileName: _jsxFileName,\n                lineNumber: 332,\n                columnNumber: 9\n              }, _this)]\n            }, void 0, true, {\n              fileName: _jsxFileName,\n              lineNumber: 320,\n              columnNumber: 8\n            }, _this)]\n          }, void 0, true, {\n            fileName: _jsxFileName,\n            lineNumber: 318,\n            columnNumber: 7\n          }, _this)]\n        }, void 0, true, {\n          fileName: _jsxFileName,\n          lineNumber: 240,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 236,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        style: {\n          textAlign: 'right',\n          marginTop: '2rem'\n        },\n        children: [/*#__PURE__*/_jsxDEV(Button, {\n          type: \"reset\",\n          \"default\": true,\n          padding: \"0.75rem 2rem\",\n          style: {\n            marginRight: '0.25rem'\n          },\n          onClick: onReset,\n          children: \"\\uCDE8\\uC18C\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 344,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(Button, {\n          type: \"submit\",\n          onClick: onSubmit,\n          padding: \"0.75rem 2rem\",\n          children: \"\\uC218\\uC815\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 353,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 343,\n        columnNumber: 5\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 235,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: onToast,\n      autoHideDuration: 4000,\n      onClose: onCloseToast,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: onCloseToast,\n        severity: \"success\",\n        elevation: 6,\n        variant: \"filled\",\n        children: \"\\uC815\\uBCF4 \\uC218\\uC815\\uC5D0 \\uC131\\uACF5\\uD588\\uC2B5\\uB2C8\\uB2E4.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 359,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 358,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(Snackbar, {\n      open: onPwToast,\n      autoHideDuration: 4000,\n      onClose: onClosePwToast,\n      children: /*#__PURE__*/_jsxDEV(Alert, {\n        onClose: onClosePwToast,\n        severity: \"success\",\n        elevation: 6,\n        variant: \"filled\",\n        children: \"\\uD328\\uC2A4\\uC6CC\\uB4DC \\uBCC0\\uACBD\\uC5D0 \\uC131\\uACF5\\uD588\\uC2B5\\uB2C8\\uB2E4.\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 374,\n        columnNumber: 5\n      }, _this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 369,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 234,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(Privacy, \"Xn0wd01WEm3a8leSJp9j7Ro6OwY=\", false, function () {\n  return [useInput, useInput, useInput];\n});\n\n_c3 = Privacy;\nexport default Privacy;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"PrivacyContainer\");\n$RefreshReg$(_c2, \"StyledModal\");\n$RefreshReg$(_c3, \"Privacy\");","map":{"version":3,"sources":["/Users/zknock/Develop/localhost_web/components/user/Mypage/Privacy.tsx"],"names":["Modal","Fade","Snackbar","React","useContext","useEffect","useState","useInput","styled","UserSetterContext","UserStateContext","axios","SERVER","UserPhoto","Button","CpxBarometer","Input","SearchPlace","Alert","PrivacyContainer","div","StyledModal","inputProps","width","borderRadius","border","textAlign","btnProps","padding","Privacy","props","currentUser","setCurrentUser","pwInput","nnInput","nickname","phInput","phone","name","formatted_address","address","geometry","location","lat","lng","place","setPlace","img","setImg","photo","photoUrl","setPhotoUrl","enabledPw","setEnabledPw","onToast","setOnToase","onOpenToast","onCloseToast","reason","onPwToast","setOnPwToase","onOpenPwToast","onClosePwToast","onReset","setValue","onSubmit","e","preventDefault","user","email","value","post","res","data","success","onClickPw","pw","then","onResetPw","onClickPhoto","input","document","createElement","type","accept","click","onchange","target","files","onClickReset","id","url","console","log","formData","FormData","append","time","Date","getTime","href","err","open","setOpen","handleOpen","handleClose","display","whiteSpace","marginTop","marginRight"],"mappings":"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","sourcesContent":["import { Modal, Fade, Snackbar } from '@material-ui/core';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useInput } from '../../../client/hooks/useInput';\nimport { Place, User } from '../../../interfaces';\nimport styled from 'styled-components';\nimport { UserSetterContext, UserStateContext } from '../../../context/user';\nimport axios from 'axios';\nimport SERVER from '../../../client/utils/url';\nimport UserPhoto from '../UserPhoto';\nimport Button from '../../reuse/Button';\nimport CpxBarometer from '../../reuse/CpxBarometer';\nimport Input from '../../reuse/Input';\nimport SearchPlace from '../../search/SearchPlace';\nimport Alert from '@material-ui/lab/Alert';\n\ninterface Props {\n\tid: string;\n\tfollowingUsers?: User[];\n\tfollowers?: User[];\n}\n\nconst PrivacyContainer = styled.div`\n\tmargin: 0 auto;\n\t& > div {\n\t\tmargin: 1rem auto;\n\t\tdisplay: flex;\n\t\talign-items: center;\n\t\t& > div {\n\t\t\tmargin: 0 1rem;\n\t\t}\n\t\t& > div:first-child {\n\t\t\tflex: 1;\n\t\t}\n\t\t& > div:last-child {\n\t\t\tflex: 3;\n\t\t}\n\t\t& input {\n\t\t\twidth: 16em;\n\t\t}\n\t}\n`;\nconst StyledModal = styled(Modal)`\n\tdisplay: flex;\n\talign-items: center;\n\tjustify-content: center;\n\n\t& .searchForm {\n\t\twidth: 80vw;\n\t\tmax-width: 800px;\n\t\tbackground: rgba(255, 255, 255, 0.9);\n\t\tpadding: 1rem;\n\t\tborder-radius: 0.25rem;\n\t\toutline: 0;\n\t\tbox-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3), -2px -2px 8px rgba(0, 0, 0, 0.3);\n\t}\n`;\n\nconst inputProps = {\n\twidth: '100% !important',\n\tborderRadius: '0.25rem',\n\tborder: '1px solid rgba(0,0,0,0.41)',\n\ttextAlign: 'left',\n};\n\nconst btnProps = {\n\tpadding: '0.75rem 1rem',\n};\n\nconst Privacy = (props: Props) => {\n\tconst currentUser = useContext(UserStateContext);\n\tconst setCurrentUser = useContext(UserSetterContext);\n\n\t// 입력받는 데이터\n\tconst pwInput = useInput('');\n\tconst nnInput = useInput(currentUser.nickname);\n\tconst phInput = useInput(currentUser.phone);\n\tconst [place, setPlace] = useState<Place>({\n\t\tname: '',\n\t\tformatted_address: currentUser.address,\n\t\tgeometry: { location: { lat: 0, lng: 0 } },\n\t});\n\n\tconst [img, setImg] = useState<File>();\n\tconst [photoUrl, setPhotoUrl] = useState(currentUser.photo);\n\n\t// 패스워드 수정 on/off\n\tconst [enabledPw, setEnabledPw] = useState(false);\n\n\t// 정보변경 알림\n\tconst [onToast, setOnToase] = useState(false);\n\tconst onOpenToast = () => {\n\t\tsetOnToase(true);\n\t};\n\tconst onCloseToast = () => (reason?: string) => {\n\t\tif (reason === 'clickaway') {\n\t\t\treturn;\n\t\t}\n\t\tsetOnToase(false);\n\t};\n\t// 패스워드 변경 알림\n\tconst [onPwToast, setOnPwToase] = useState(false);\n\tconst onOpenPwToast = () => {\n\t\tsetOnPwToase(true);\n\t};\n\tconst onClosePwToast = () => (reason?: string) => {\n\t\tif (reason === 'clickaway') {\n\t\t\treturn;\n\t\t}\n\t\tsetOnPwToase(false);\n\t};\n\n\t// 취소버튼\n\tconst onReset = () => {\n\t\tpwInput.setValue('');\n\t\tnnInput.setValue(currentUser.nickname);\n\t\tphInput.setValue(currentUser.phone);\n\t\tsetPlace({\n\t\t\tname: '',\n\t\t\tformatted_address: currentUser.address,\n\t\t\tgeometry: { location: { lat: 0, lng: 0 } },\n\t\t});\n\t\tsetEnabledPw(false);\n\t};\n\t// 수정버튼\n\tconst onSubmit = async (e: React.MouseEvent) => {\n\t\te.preventDefault();\n\t\tconst address =\n\t\t\tplace.name === '' || !place.name\n\t\t\t\t? place.formatted_address\n\t\t\t\t: `${place.formatted_address}(${place.name})`;\n\t\tconst user = {\n\t\t\temail: currentUser.email,\n\t\t\tnickname: nnInput.value,\n\t\t\tphone: phInput.value,\n\t\t\taddress: address,\n\t\t};\n\t\t// 유저정보 변경\n\t\tconst res = await axios.post(`${SERVER}/api/user/update`, { ...user });\n\n\t\tif (res.data.success) {\n\t\t\tsetCurrentUser({ ...currentUser, ...user });\n\t\t\tonOpenToast();\n\t\t\t// Router.push('/users/mypage');\n\t\t}\n\t};\n\n\t// 비밀번호 변경버튼\n\tconst onClickPw = () => {\n\t\tif (enabledPw) {\n\t\t\taxios\n\t\t\t\t.post(`${SERVER}/api/user/updatePW`, {\n\t\t\t\t\temail: currentUser.email,\n\t\t\t\t\tpw: pwInput.value,\n\t\t\t\t})\n\t\t\t\t.then(res => {\n\t\t\t\t\tres.data.success ? onOpenPwToast() : '';\n\t\t\t\t});\n\t\t}\n\t\tpwInput.setValue('');\n\t\tsetEnabledPw(!enabledPw);\n\t};\n\t// 비밀번호 취소버튼\n\tconst onResetPw = () => {\n\t\tpwInput.setValue('');\n\t\tsetEnabledPw(false);\n\t};\n\n\tconst onClickPhoto = () => {\n\t\tconst input: any = document.createElement('input');\n\t\tinput.type = 'file';\n\t\tinput.accept = 'image/*';\n\t\tinput.click();\n\n\t\tinput.onchange = function (e: React.ChangeEvent<HTMLInputElement>) {\n\t\t\tsetImg(e.target!.files![0]);\n\t\t};\n\t};\n\n\tconst onClickReset = () => {\n\t\tsetPhotoUrl('');\n\t\taxios\n\t\t\t.post(`${SERVER}/api/user/update/photo`, {\n\t\t\t\tid: currentUser.id,\n\t\t\t\turl: '',\n\t\t\t})\n\t\t\t.then(res => {\n\t\t\t\tconsole.log(res);\n\t\t\t});\n\t};\n\n\t// 이미지가 바뀌었을 때\n\tuseEffect(() => {\n\t\tif (img !== null) {\n\t\t\t// formData generate\n\t\t\tconst formData = new FormData();\n\t\t\t// formData에 key, value 추가\n\t\t\tformData.append('file', img!);\n\t\t\tformData.append('name', `user_profile_${currentUser.id}`);\n\t\t\taxios\n\t\t\t\t.post(`${SERVER}/api/s3/upload`, formData)\n\t\t\t\t.then(res => {\n\t\t\t\t\t// 뷰에 포토 수정\n\t\t\t\t\tconst time = new Date().getTime();\n\t\t\t\t\tsetPhotoUrl(`${res.data.url}?time=${time}`);\n\t\t\t\t\t// 디비에 포토 수정\n\t\t\t\t\taxios\n\t\t\t\t\t\t.post(`${SERVER}/api/user/update/photo`, {\n\t\t\t\t\t\t\tid: currentUser.id,\n\t\t\t\t\t\t\turl: res.data.url,\n\t\t\t\t\t\t})\n\t\t\t\t\t\t.then(() => {\n\t\t\t\t\t\t\tlocation.href = '/users/mypage';\n\t\t\t\t\t\t});\n\t\t\t\t})\n\t\t\t\t.catch(err => {\n\t\t\t\t\tconsole.log(err);\n\t\t\t\t});\n\t\t}\n\t}, [img]);\n\n\t// 모달을 위한 State\n\tconst [open, setOpen] = useState(false);\n\tconst handleOpen = () => {\n\t\tsetOpen(true);\n\t};\n\tconst handleClose = () => {\n\t\tsetOpen(false);\n\t};\n\tuseEffect(() => {\n\t\tsetOpen(false);\n\t}, [place]);\n\n\treturn (\n\t\t<section id={props.id}>\n\t\t\t<div>\n\t\t\t\t<section>\n\t\t\t\t\t<header>\n\t\t\t\t\t\t<h3>기본 회원정보</h3>\n\t\t\t\t\t</header>\n\t\t\t\t\t<PrivacyContainer>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div>사진: </div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<UserPhoto\n\t\t\t\t\t\t\t\t\tsrc={photoUrl}\n\t\t\t\t\t\t\t\t\twidth={8}\n\t\t\t\t\t\t\t\t\tmargin='1rem 0'\n\t\t\t\t\t\t\t\t\tonClick={onClickPhoto}\n\t\t\t\t\t\t\t\t\thover\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t{...btnProps}\n\t\t\t\t\t\t\t\t\tdefault\n\t\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\t\tonClick={onClickReset}\n\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t기본이미지로 변경\n\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div>이메일: </div>\n\t\t\t\t\t\t\t<div>{currentUser.email}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div>패스워드: </div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<div style={{ display: 'flex' }}>\n\t\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t\ttype='password'\n\t\t\t\t\t\t\t\t\t\t{...inputProps}\n\t\t\t\t\t\t\t\t\t\tdisabled={!enabledPw}\n\t\t\t\t\t\t\t\t\t\t{...pwInput}\n\t\t\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t\t\t\t<span style={{ whiteSpace: 'nowrap' }}>\n\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t{...btnProps}\n\t\t\t\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\t\t\t\tonClick={onClickPw}\n\t\t\t\t\t\t\t\t\t\t\tdefault={!enabledPw}\n\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t변경\n\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t{enabledPw ? (\n\t\t\t\t\t\t\t\t\t\t\t<Button\n\t\t\t\t\t\t\t\t\t\t\t\t{...btnProps}\n\t\t\t\t\t\t\t\t\t\t\t\tdefault\n\t\t\t\t\t\t\t\t\t\t\t\ttype='button'\n\t\t\t\t\t\t\t\t\t\t\t\tonClick={onResetPw}\n\t\t\t\t\t\t\t\t\t\t\t>\n\t\t\t\t\t\t\t\t\t\t\t\t취소\n\t\t\t\t\t\t\t\t\t\t\t</Button>\n\t\t\t\t\t\t\t\t\t\t) : (\n\t\t\t\t\t\t\t\t\t\t\t''\n\t\t\t\t\t\t\t\t\t\t)}\n\t\t\t\t\t\t\t\t\t</span>\n\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t<CpxBarometer value={pwInput.value} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div>이름:</div>\n\t\t\t\t\t\t\t<div>{currentUser.name}</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div>닉네임:</div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Input {...inputProps} {...nnInput} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div>휴대폰: </div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Input {...inputProps} {...phInput} />\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t<div>주소: </div>\n\t\t\t\t\t\t\t<div>\n\t\t\t\t\t\t\t\t<Input\n\t\t\t\t\t\t\t\t\t{...inputProps}\n\t\t\t\t\t\t\t\t\tvalue={\n\t\t\t\t\t\t\t\t\t\tplace.name\n\t\t\t\t\t\t\t\t\t\t\t? `${place.formatted_address}(${place.name})`\n\t\t\t\t\t\t\t\t\t\t\t: currentUser.address\n\t\t\t\t\t\t\t\t\t}\n\t\t\t\t\t\t\t\t\tonClick={handleOpen}\n\t\t\t\t\t\t\t\t\tonChange={handleOpen}\n\t\t\t\t\t\t\t\t/>\n\n\t\t\t\t\t\t\t\t<StyledModal open={open} onClose={handleClose}>\n\t\t\t\t\t\t\t\t\t<Fade in={open}>\n\t\t\t\t\t\t\t\t\t\t<div className='searchForm'>\n\t\t\t\t\t\t\t\t\t\t\t<SearchPlace setPlace={setPlace} />\n\t\t\t\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t\t\t\t</Fade>\n\t\t\t\t\t\t\t\t</StyledModal>\n\t\t\t\t\t\t\t</div>\n\t\t\t\t\t\t</div>\n\t\t\t\t\t</PrivacyContainer>\n\t\t\t\t</section>\n\t\t\t\t<div style={{ textAlign: 'right', marginTop: '2rem' }}>\n\t\t\t\t\t<Button\n\t\t\t\t\t\ttype='reset'\n\t\t\t\t\t\tdefault\n\t\t\t\t\t\tpadding='0.75rem 2rem'\n\t\t\t\t\t\tstyle={{ marginRight: '0.25rem' }}\n\t\t\t\t\t\tonClick={onReset}\n\t\t\t\t\t>\n\t\t\t\t\t\t취소\n\t\t\t\t\t</Button>\n\t\t\t\t\t<Button type='submit' onClick={onSubmit} padding='0.75rem 2rem'>\n\t\t\t\t\t\t수정\n\t\t\t\t\t</Button>\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<Snackbar open={onToast} autoHideDuration={4000} onClose={onCloseToast}>\n\t\t\t\t<Alert\n\t\t\t\t\tonClose={onCloseToast}\n\t\t\t\t\tseverity='success'\n\t\t\t\t\televation={6}\n\t\t\t\t\tvariant='filled'\n\t\t\t\t>\n\t\t\t\t\t정보 수정에 성공했습니다.\n\t\t\t\t</Alert>\n\t\t\t</Snackbar>\n\n\t\t\t<Snackbar\n\t\t\t\topen={onPwToast}\n\t\t\t\tautoHideDuration={4000}\n\t\t\t\tonClose={onClosePwToast}\n\t\t\t>\n\t\t\t\t<Alert\n\t\t\t\t\tonClose={onClosePwToast}\n\t\t\t\t\tseverity='success'\n\t\t\t\t\televation={6}\n\t\t\t\t\tvariant='filled'\n\t\t\t\t>\n\t\t\t\t\t패스워드 변경에 성공했습니다.\n\t\t\t\t</Alert>\n\t\t\t</Snackbar>\n\t\t</section>\n\t);\n};\n\nexport default Privacy;\n"]},"metadata":{},"sourceType":"module"}