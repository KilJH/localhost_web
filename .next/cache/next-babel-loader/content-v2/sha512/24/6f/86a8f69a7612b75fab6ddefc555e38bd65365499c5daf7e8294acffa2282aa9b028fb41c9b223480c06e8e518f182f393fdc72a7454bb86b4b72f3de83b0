{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\nimport React, { useContext } from 'react';\nimport { useAsync } from 'react-async';\nimport styled from 'styled-components';\nimport { UserStateContext } from '../../../context/user';\nimport SERVER from '../../../client/utils/url';\nimport UserPhoto from '../../user/UserPhoto'; // interface Props {}\n\nconst getRoomList = async ({\n  userId\n}) => {\n  const res = await axios.post(`${SERVER}/api/message/room/list`, {\n    userId\n  });\n  return res.data.roomList;\n};\n\nconst ListContainer = styled.div.withConfig({\n  displayName: \"ChatRoomList__ListContainer\",\n  componentId: \"x84r57-0\"\n})([\"width:20rem;padding:2rem 0;& > h2{text-align:center;margin:0;}& > ul{padding:0;}\"]);\nconst ItemContainer = styled.li.withConfig({\n  displayName: \"ChatRoomList__ItemContainer\",\n  componentId: \"x84r57-1\"\n})([\"display:flex;height:4rem;padding:0.5em 1rem;background:white;transition:all 0.3 ease;& .message{flex:1;display:flex;flex-direction:column;margin-left:0.5em;& > *:first-child{font-weight:600;margin:0.25em 0;}& > *:nth-child(2){height:2.5em;color:#666;font-size:0.8em;line-height:1.25em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;}}& .time{margin:0.25em 0;color:#666;font-size:0.8em;}&:hover{opacity:0.9;background:#eee;cursor:pointer;}\"]);\n\nconst ChatRoomItem = props => {\n  const {\n    id,\n    nickname,\n    photo\n  } = props.item;\n  return /*#__PURE__*/_jsxs(ItemContainer, {\n    children: [/*#__PURE__*/_jsx(UserPhoto, {\n      src: photo,\n      margin: \"0\",\n      width: 4\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"message\",\n      children: [' ', /*#__PURE__*/_jsxs(\"div\", {\n        children: [nickname, \"#\", id]\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: \"\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654 \\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\"\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"time\",\n      children: \"\\uB0A0\\uC9DC\"\n    })]\n  });\n};\n\nconst ChatRoomList = () => {\n  const currentUser = useContext(UserStateContext);\n  const {\n    data: roomList,\n    error,\n    isLoading\n  } = useAsync({\n    _promiseFn: getRoomList,\n\n    // 자동으로 뭐 해쓴ㄴ데...\n    get promiseFn() {\n      return this._promiseFn;\n    },\n\n    set promiseFn(value) {\n      this._promiseFn = value;\n    },\n\n    userId: currentUser.id\n  });\n  if (isLoading) return /*#__PURE__*/_jsx(CircularProgress, {});\n  if (error) return /*#__PURE__*/_jsx(\"div\", {\n    style: {\n      fontSize: '0.5em',\n      color: '#e74c3c'\n    },\n    children: \"\\uCC44\\uD305\\uBC29 \\uBAA9\\uB85D\\uC744 \\uAC00\\uC838\\uC624\\uC9C0 \\uBABB\\uD588\\uC2B5\\uB2C8\\uB2E4.\"\n  });\n  if (!roomList) return null;\n  return /*#__PURE__*/_jsxs(ListContainer, {\n    children: [/*#__PURE__*/_jsx(\"h2\", {\n      children: \"\\uCC44\\uD305\\uBAA9\\uB85D\"\n    }), /*#__PURE__*/_jsx(\"ul\", {\n      children: roomList.map(room => /*#__PURE__*/_jsx(ChatRoomItem, {\n        item: room\n      }))\n    })]\n  });\n};\n\nexport default ChatRoomList;","map":null,"metadata":{},"sourceType":"module"}