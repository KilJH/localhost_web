{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/zknock/Develop/localhost_web/components/host/Chat/ChatRoomList.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport { CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\nimport React, { useContext } from 'react';\nimport { useAsync } from 'react-async';\nimport styled from 'styled-components';\nimport { UserStateContext } from '../../../context/user';\nimport SERVER from '../../../client/utils/url';\nimport UserPhoto from '../../user/UserPhoto'; // interface Props {}\n\nvar getRoomList = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var userId, res;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            userId = _ref.userId;\n            _context.next = 3;\n            return axios.post(\"\".concat(SERVER, \"/api/message/room/list\"), {\n              userId: userId\n            });\n\n          case 3:\n            res = _context.sent;\n            return _context.abrupt(\"return\", res.data.roomList);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getRoomList(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar ListContainer = styled.div.withConfig({\n  displayName: \"ChatRoomList__ListContainer\",\n  componentId: \"x84r57-0\"\n})([\"width:20rem;padding:2rem 0;& > h2{text-align:center;margin:0;}& > ul{padding:0;}\"]);\n_c = ListContainer;\nvar ItemContainer = styled.li.withConfig({\n  displayName: \"ChatRoomList__ItemContainer\",\n  componentId: \"x84r57-1\"\n})([\"display:flex;height:4rem;padding:0.5em 1rem;background:white;transition:all 0.3 ease;& .message{flex:1;display:flex;flex-direction:column;margin-left:0.5em;& > *:first-child{font-weight:600;margin:0.25em 0;}& > *:nth-child(2){height:2.5em;color:#666;font-size:0.8em;line-height:1.25em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;}}& .time{margin:0.25em 0;color:#666;font-size:0.8em;}&:hover{opacity:0.9;background:#eee;cursor:pointer;}\"]);\n_c2 = ItemContainer;\n\nvar ChatRoomItem = function ChatRoomItem(props) {\n  var _props$item = props.item,\n      id = _props$item.id,\n      nickname = _props$item.nickname,\n      photo = _props$item.photo;\n  return /*#__PURE__*/_jsxDEV(ItemContainer, {\n    children: [/*#__PURE__*/_jsxDEV(UserPhoto, {\n      src: photo,\n      margin: \"0\",\n      width: 4\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message\",\n      children: [' ', /*#__PURE__*/_jsxDEV(\"div\", {\n        children: [nickname, \"#\", id]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654 \\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 95,\n        columnNumber: 5\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"time\",\n      children: \"\\uB0A0\\uC9DC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 100,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 3\n  }, _this);\n};\n\n_c3 = ChatRoomItem;\n\nvar ChatRoomList = function ChatRoomList() {\n  _s();\n\n  var currentUser = useContext(UserStateContext);\n\n  var _useAsync = useAsync({\n    _promiseFn: getRoomList,\n\n    // 자동으로 뭐 해쓴ㄴ데...\n    get promiseFn() {\n      return this._promiseFn;\n    },\n\n    set promiseFn(value) {\n      this._promiseFn = value;\n    },\n\n    userId: currentUser.id\n  }),\n      roomList = _useAsync.data,\n      error = _useAsync.error,\n      isLoading = _useAsync.isLoading;\n\n  if (isLoading) return /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 120,\n    columnNumber: 24\n  }, _this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      fontSize: '0.5em',\n      color: '#e74c3c'\n    },\n    children: \"\\uCC44\\uD305\\uBC29 \\uBAA9\\uB85D\\uC744 \\uAC00\\uC838\\uC624\\uC9C0 \\uBABB\\uD588\\uC2B5\\uB2C8\\uB2E4.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 123,\n    columnNumber: 4\n  }, _this);\n  if (!roomList) return null;\n  return /*#__PURE__*/_jsxDEV(ListContainer, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uCC44\\uD305\\uBAA9\\uB85D\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 131,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: roomList.map(function (room) {\n        return /*#__PURE__*/_jsxDEV(ChatRoomItem, {\n          item: room\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 134,\n          columnNumber: 6\n        }, _this);\n      })\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 132,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 130,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(ChatRoomList, \"apQHpNhDGqnGVTRQfZ6lsnpP+z8=\", false, function () {\n  return [useAsync];\n});\n\n_c4 = ChatRoomList;\nexport default ChatRoomList;\n\nvar _c, _c2, _c3, _c4;\n\n$RefreshReg$(_c, \"ListContainer\");\n$RefreshReg$(_c2, \"ItemContainer\");\n$RefreshReg$(_c3, \"ChatRoomItem\");\n$RefreshReg$(_c4, \"ChatRoomList\");","map":{"version":3,"sources":["/Users/zknock/Develop/localhost_web/components/host/Chat/ChatRoomList.tsx"],"names":["CircularProgress","axios","React","useContext","useAsync","styled","UserStateContext","SERVER","UserPhoto","getRoomList","userId","post","res","data","roomList","ListContainer","div","ItemContainer","li","ChatRoomItem","props","item","id","nickname","photo","ChatRoomList","currentUser","_promiseFn","promiseFn","value","error","isLoading","fontSize","color","map","room"],"mappings":"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","sourcesContent":["import { CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\nimport React, { useContext } from 'react';\nimport { useAsync } from 'react-async';\nimport styled from 'styled-components';\nimport { UserStateContext } from '../../../context/user';\nimport SERVER from '../../../client/utils/url';\nimport UserPhoto from '../../user/UserPhoto';\n\n// interface Props {}\n\ninterface ItemProps {\n\titem: {\n\t\tid: number;\n\t\tnickname: string;\n\t\tphoto: string;\n\t\t// 최근대화?\n\t};\n}\n\nconst getRoomList = async ({ userId }: { userId: number }) => {\n\tconst res = await axios.post(`${SERVER}/api/message/room/list`, {\n\t\tuserId,\n\t});\n\treturn res.data.roomList;\n};\n\nconst ListContainer = styled.div`\n\twidth: 20rem;\n\tpadding: 2rem 0;\n\n\t& > h2 {\n\t\ttext-align: center;\n\t\tmargin: 0;\n\t}\n\n\t& > ul {\n\t\tpadding: 0;\n\t}\n`;\n\nconst ItemContainer = styled.li`\n\tdisplay: flex;\n\t/* align-items: center; */\n\theight: 4rem;\n\tpadding: 0.5em 1rem;\n\tbackground: white;\n\n\ttransition: all 0.3 ease;\n\t& .message {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmargin-left: 0.5em;\n\t\t& > *:first-child {\n\t\t\tfont-weight: 600;\n\t\t\tmargin: 0.25em 0;\n\t\t}\n\t\t& > *:nth-child(2) {\n\t\t\theight: 2.5em;\n\t\t\tcolor: #666;\n\t\t\tfont-size: 0.8em;\n\t\t\tline-height: 1.25em;\n\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\tdisplay: -webkit-box;\n\t\t\t-webkit-line-clamp: 2;\n\t\t\t-webkit-box-orient: vertical;\n\t\t}\n\t}\n\t& .time {\n\t\tmargin: 0.25em 0;\n\t\tcolor: #666;\n\t\tfont-size: 0.8em;\n\t}\n\n\t&:hover {\n\t\topacity: 0.9;\n\t\tbackground: #eee;\n\t\tcursor: pointer;\n\t}\n`;\n\nconst ChatRoomItem = (props: ItemProps) => {\n\tconst { id, nickname, photo } = props.item;\n\treturn (\n\t\t<ItemContainer>\n\t\t\t<UserPhoto src={photo} margin='0' width={4} />\n\t\t\t<div className='message'>\n\t\t\t\t{' '}\n\t\t\t\t<div>\n\t\t\t\t\t{nickname}#{id}\n\t\t\t\t</div>\n\t\t\t\t<div>\n\t\t\t\t\t최근 대화최근 대화최근 대화최근 대화최근 대화최근 대화최근 대화최근\n\t\t\t\t\t대화최근 대화 최근 대화최근 대화최근 대화최근 대화최근 대화\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className='time'>날짜</div>\n\t\t</ItemContainer>\n\t);\n};\n\nconst ChatRoomList = () => {\n\tconst currentUser = useContext(UserStateContext);\n\n\tconst { data: roomList, error, isLoading } = useAsync({\n\t\t_promiseFn: getRoomList,\n\t\t// 자동으로 뭐 해쓴ㄴ데...\n\t\tget promiseFn() {\n\t\t\treturn this._promiseFn;\n\t\t},\n\t\tset promiseFn(value) {\n\t\t\tthis._promiseFn = value;\n\t\t},\n\t\tuserId: currentUser.id,\n\t});\n\n\tif (isLoading) return <CircularProgress />;\n\tif (error)\n\t\treturn (\n\t\t\t<div style={{ fontSize: '0.5em', color: '#e74c3c' }}>\n\t\t\t\t채팅방 목록을 가져오지 못했습니다.\n\t\t\t</div>\n\t\t);\n\tif (!roomList) return null;\n\n\treturn (\n\t\t<ListContainer>\n\t\t\t<h2>채팅목록</h2>\n\t\t\t<ul>\n\t\t\t\t{(roomList as Array<any>)!.map(room => (\n\t\t\t\t\t<ChatRoomItem item={room} />\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</ListContainer>\n\t);\n};\n\nexport default ChatRoomList;\n"]},"metadata":{},"sourceType":"module"}