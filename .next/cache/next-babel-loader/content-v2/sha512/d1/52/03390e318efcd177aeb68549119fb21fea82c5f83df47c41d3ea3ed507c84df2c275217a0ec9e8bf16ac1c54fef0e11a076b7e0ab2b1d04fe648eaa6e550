{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Button } from '@material-ui/core';\nimport axios from 'axios';\nimport SERVER from '../../../client/utils/url';\nimport Router from 'next/router';\nimport { UserStateContext } from '../../../context/user';\nvar ButtonLabel = styled(Button).withConfig({\n  displayName: \"HostApplicantItem__ButtonLabel\",\n  componentId: \"sc-1r47kb-0\"\n})([\"&.MuiButton-root{color:#5197d5;margin:0;font-size:0.9em;&:hover{color:rgb(33,33,33);}}&.MuiButton-textSecondary{color:#e74c3c;}\"]);\nvar ButtonTd = styled.td.withConfig({\n  displayName: \"HostApplicantItem__ButtonTd\",\n  componentId: \"sc-1r47kb-1\"\n})([\"max-width:10em;min-width:10em;\"]);\nexport default function HostApplicantItem(props) {\n  var applicant = props.applicant;\n\n  var _useState = useState(applicant),\n      list = _useState[0],\n      setList = _useState[1];\n\n  var currentUser = useContext(UserStateContext);\n  useEffect(function () {\n    setList(applicant);\n  }, [applicant]);\n\n  var onApprovalHandler = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var res, createRoomRes;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.prev = 1;\n              _context.next = 4;\n              return axios.post(\"\".concat(SERVER, \"/api/host/application/approve\"), {\n                id: list.user.id,\n                hostUserId: currentUser.id\n              });\n\n            case 4:\n              res = _context.sent;\n\n              if (!res.data.success) {\n                _context.next = 10;\n                break;\n              }\n\n              _context.next = 8;\n              return axios.post(\"\".concat(SERVER, \"/api/message/room/create\"), {\n                hostUserId: currentUser.id,\n                userId: list.user.id\n              });\n\n            case 8:\n              createRoomRes = _context.sent;\n\n              if (createRoomRes.data.success) {\n                alert('승인 처리되었습니다. 채팅을 통해 약속을 잡으세요');\n                Router.push('/hosts/myhosting');\n              }\n\n            case 10:\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](1);\n              return _context.abrupt(\"return\", console.log(_context.t0));\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 12]]);\n    }));\n\n    return function onApprovalHandler(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var onDenialHandler = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              _context2.prev = 1;\n              _context2.next = 4;\n              return axios.post(\"\".concat(SERVER, \"/api/host/application/deny\"), {\n                id: list.user.id,\n                hostUserId: currentUser.id\n              });\n\n            case 4:\n              res = _context2.sent;\n\n              if (res.data.success) {\n                alert('거부 처리되었습니다.');\n                Router.push('/hosts/myhosting');\n              }\n\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](1);\n              return _context2.abrupt(\"return\", console.log(_context2.t0));\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 8]]);\n    }));\n\n    return function onDenialHandler(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsx(React.Fragment, {\n    children: /*#__PURE__*/_jsxs(\"tr\", {\n      children: [/*#__PURE__*/_jsx(\"td\", {\n        children: (applicant === null || applicant === void 0 ? void 0 : applicant.user.nickname) || '닉네임'\n      }), /*#__PURE__*/_jsx(\"td\", {\n        children: (applicant === null || applicant === void 0 ? void 0 : applicant.date) || '2021-01-01'\n      }), /*#__PURE__*/_jsxs(ButtonTd, {\n        children: [/*#__PURE__*/_jsx(ButtonLabel, {\n          onClick: onApprovalHandler,\n          children: \"\\uC2B9\\uC778\"\n        }), /*#__PURE__*/_jsx(ButtonLabel, {\n          onClick: onDenialHandler,\n          color: \"secondary\",\n          children: \"\\uAC70\\uBD80\"\n        })]\n      })]\n    })\n  });\n}","map":null,"metadata":{},"sourceType":"module"}