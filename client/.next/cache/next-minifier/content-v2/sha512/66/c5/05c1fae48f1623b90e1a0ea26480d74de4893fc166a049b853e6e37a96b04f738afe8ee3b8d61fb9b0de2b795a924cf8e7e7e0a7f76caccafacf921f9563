{"code":"_N_E=(window.webpackJsonp_N_E=window.webpackJsonp_N_E||[]).push([[34],{\"11/B\":function(t,n,e){\"use strict\";e.r(n);var r=e(\"oYCi\"),i=(e(\"mXGw\"),e(\"i3OP\")),c=e(\"q4b/\"),a=e(\"UutA\"),o=e(\"BvmH\"),s=a.b.div.withConfig({displayName:\"login__LoginContainer\",componentId:\"sc-1p0n174-0\"})([\"& > *{margin:0 auto;}\"]);n.default=Object(o.a)(2,0)((function(t){return Object(r.jsx)(i.a,{title:\"\\ub85c\\uadf8\\uc778 | localhost\",children:Object(r.jsx)(s,{children:Object(r.jsx)(c.a,{})})})}))},BvmH:function(t,n,e){\"use strict\";var r=e(\"oYCi\"),i=e(\"/dBk\"),c=e.n(i),a=e(\"qd51\"),o=e(\"czhI\"),s=e.n(o),u=(e(\"mXGw\"),e(\"jR5A\")),l=e(\"XJ9w\"),f=e(\"lxKZ\"),j=e(\"UutA\").b.div.withConfig({displayName:\"Loading__LoadingContainer\",componentId:\"sc-1eksibe-0\"})([\"width:100vw;height:100vh;background:rgba(0,0,0,0.1);display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;\"]),d=function(t){return Object(r.jsx)(j,{children:Object(r.jsx)(f.a,{})})},b=function(){var t=Object(a.a)(c.a.mark((function t(){var n;return c.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return t.next=2,s.a.get(\"\".concat(u.a,\"/api/auth/check\"),{withCredentials:!0});case 2:return n=t.sent,t.abrupt(\"return\",n.data);case 4:case\"end\":return t.stop()}}),t)})));return function(){return t.apply(this,arguments)}}();n.a=function(t,n){return function(e){return function(){var i=Object(l.a)({promiseFn:b}),c=i.data,a=i.isLoading,o=i.error;if(a)return Object(r.jsx)(d,{});if(o)return Object(r.jsx)(\"div\",{children:\"\\uc5d0\\ub7ec!\"});if(!c)return null;var s=c.user;if(c.success){if(console.log(\"\\ub85c\\uadf8\\uc778\\ub418\\uc5b4\\uc788\\uc2b5\\ub2c8\\ub2e4.\"),2===t)return alert(\"\\uc774\\ubbf8 \\ub85c\\uadf8\\uc778\\ub418\\uc5b4\\uc788\\uc2b5\\ub2c8\\ub2e4.\"),location.href=\"/\",Object(r.jsx)(d,{});switch(n){case 0:return Object(r.jsx)(e,{});case 1:if(s.isHost)return Object(r.jsx)(e,{});alert(\"\\uad8c\\ud55c\\uc774 \\uc5c6\\uc2b5\\ub2c8\\ub2e4. \\ud638\\uc2a4\\ud2b8 \\uc2e0\\uccad\\uc744 \\ud574\\uc8fc\\uc138\\uc694:D\"),location.href=\"/\";break;case 2:if(s.isAdmin)return Object(r.jsx)(e,{});alert(\"\\uc811\\uadfc\\ud560 \\uc218 \\uc5c6\\ub294 \\ud398\\uc774\\uc9c0 \\uc785\\ub2c8\\ub2e4.\"),location.href=\"/\"}}else{if(console.log(\"\\ub85c\\uadf8\\uc778\\uc744 \\ud574\\uc8fc\\uc138\\uc694.\"),1!==t)return Object(r.jsx)(e,{});alert(\"\\ub85c\\uadf8\\uc778\\uc744 \\ud574\\uc8fc\\uc138\\uc694.\"),location.href=\"/login\"}return Object(r.jsx)(d,{})}}}},NRgu:function(t,n,e){(window.__NEXT_P=window.__NEXT_P||[]).push([\"/login\",function(){return e(\"11/B\")}])}},[[\"NRgu\",0,2,1,3,5,4,6,7,8]]]);","map":{"version":3,"sources":["static/chunks/pages/login-e90ed1cb548bcc11d9e4.js"],"names":["_N_E","window","push","11/B","module","__webpack_exports__","__webpack_require__","r","react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__","_components_main_Layout__WEBPACK_IMPORTED_MODULE_2__","_components_user_Login__WEBPACK_IMPORTED_MODULE_3__","styled_components__WEBPACK_IMPORTED_MODULE_4__","_components_main_hoc_withAuth__WEBPACK_IMPORTED_MODULE_5__","LoginContainer","div","withConfig","displayName","componentId","Object","props","title","children","BvmH","jsx_runtime","regenerator","regenerator_default","n","asyncToGenerator","axios","axios_default","url","dist_web","CircularProgress","LoadingContainer","styled_components_browser_esm","reuse_Loading","getAuth","_ref","a","mark","_callee","res","wrap","_context","prev","next","get","concat","withCredentials","sent","abrupt","data","stop","apply","this","arguments","isLogined","grade","Component","_useAsync","promiseFn","isLoading","error","user","success","console","log","alert","location","href","isHost","isAdmin","NRgu","exports","__NEXT_P"],"mappings":"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"},"name":"static/chunks/pages/login-e90ed1cb548bcc11d9e4.js","input":"_N_E =\n(window[\"webpackJsonp_N_E\"] = window[\"webpackJsonp_N_E\"] || []).push([[34],{\n\n/***/ \"11/B\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n__webpack_require__.r(__webpack_exports__);\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__ = __webpack_require__(\"oYCi\");\n/* harmony import */ var react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0___default = /*#__PURE__*/__webpack_require__.n(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__);\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1__ = __webpack_require__(\"mXGw\");\n/* harmony import */ var react__WEBPACK_IMPORTED_MODULE_1___default = /*#__PURE__*/__webpack_require__.n(react__WEBPACK_IMPORTED_MODULE_1__);\n/* harmony import */ var _components_main_Layout__WEBPACK_IMPORTED_MODULE_2__ = __webpack_require__(\"i3OP\");\n/* harmony import */ var _components_user_Login__WEBPACK_IMPORTED_MODULE_3__ = __webpack_require__(\"q4b/\");\n/* harmony import */ var styled_components__WEBPACK_IMPORTED_MODULE_4__ = __webpack_require__(\"UutA\");\n/* harmony import */ var _components_main_hoc_withAuth__WEBPACK_IMPORTED_MODULE_5__ = __webpack_require__(\"BvmH\");\n\n\n\n\n\n\nvar LoginContainer = styled_components__WEBPACK_IMPORTED_MODULE_4__[/* default */ \"b\"].div.withConfig({\n  displayName: \"login__LoginContainer\",\n  componentId: \"sc-1p0n174-0\"\n})([\"& > *{margin:0 auto;}\"]);\n\nvar login = function login(props) {\n  return /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_main_Layout__WEBPACK_IMPORTED_MODULE_2__[/* default */ \"a\"], {\n    title: \"\\uB85C\\uADF8\\uC778 | localhost\",\n    children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(LoginContainer, {\n      children: /*#__PURE__*/Object(react_jsx_runtime__WEBPACK_IMPORTED_MODULE_0__[\"jsx\"])(_components_user_Login__WEBPACK_IMPORTED_MODULE_3__[/* default */ \"a\"], {})\n    })\n  });\n};\n\n/* harmony default export */ __webpack_exports__[\"default\"] = (Object(_components_main_hoc_withAuth__WEBPACK_IMPORTED_MODULE_5__[/* default */ \"a\"])(2, 0)(login));\n\n/***/ }),\n\n/***/ \"BvmH\":\n/***/ (function(module, __webpack_exports__, __webpack_require__) {\n\n\"use strict\";\n\n// EXTERNAL MODULE: ../node_modules/react/jsx-runtime.js\nvar jsx_runtime = __webpack_require__(\"oYCi\");\n\n// EXTERNAL MODULE: ../node_modules/next/node_modules/@babel/runtime/regenerator/index.js\nvar regenerator = __webpack_require__(\"/dBk\");\nvar regenerator_default = /*#__PURE__*/__webpack_require__.n(regenerator);\n\n// EXTERNAL MODULE: ../node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator.js\nvar asyncToGenerator = __webpack_require__(\"qd51\");\n\n// EXTERNAL MODULE: ../node_modules/axios/index.js\nvar axios = __webpack_require__(\"czhI\");\nvar axios_default = /*#__PURE__*/__webpack_require__.n(axios);\n\n// EXTERNAL MODULE: ../node_modules/react/index.js\nvar react = __webpack_require__(\"mXGw\");\n\n// EXTERNAL MODULE: ./utils/url.ts\nvar url = __webpack_require__(\"jR5A\");\n\n// EXTERNAL MODULE: ../node_modules/react-async/dist-web/index.js\nvar dist_web = __webpack_require__(\"XJ9w\");\n\n// EXTERNAL MODULE: ../node_modules/@material-ui/core/esm/CircularProgress/CircularProgress.js\nvar CircularProgress = __webpack_require__(\"lxKZ\");\n\n// EXTERNAL MODULE: ../node_modules/styled-components/dist/styled-components.browser.esm.js\nvar styled_components_browser_esm = __webpack_require__(\"UutA\");\n\n// CONCATENATED MODULE: ./components/reuse/Loading.tsx\n\n\n\n\nvar LoadingContainer = styled_components_browser_esm[\"b\" /* default */].div.withConfig({\n  displayName: \"Loading__LoadingContainer\",\n  componentId: \"sc-1eksibe-0\"\n})([\"width:100vw;height:100vh;background:rgba(0,0,0,0.1);display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;\"]);\n\nvar Loading_Loading = function Loading(props) {\n  return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(LoadingContainer, {\n    children: /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(CircularProgress[\"a\" /* default */], {})\n  });\n};\n\n/* harmony default export */ var reuse_Loading = (Loading_Loading);\n// CONCATENATED MODULE: ./components/main/hoc/withAuth.tsx\n\n\n\n\n\n\n\n // isLogined\n// 0: 아무나 볼 수 있음, 1: 로그인한 회원만 볼 수 있음, 2: 게스트만 볼 수 있음\n// grade\n// 0: 아무나 볼 수 있음, 2: 호스트회원만 볼 수 있음, 3: 관리자회원만 볼 수 있음\n\nvar getAuth = /*#__PURE__*/function () {\n  var _ref = Object(asyncToGenerator[\"a\" /* default */])( /*#__PURE__*/regenerator_default.a.mark(function _callee() {\n    var res;\n    return regenerator_default.a.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return axios_default.a.get(\"\".concat(url[\"a\" /* default */], \"/api/auth/check\"), {\n              withCredentials: true\n            });\n\n          case 2:\n            res = _context.sent;\n            return _context.abrupt(\"return\", res.data);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getAuth() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar withAuth_withAuth = function withAuth(isLogined, grade) {\n  return function (Component) {\n    return function () {\n      var _useAsync = Object(dist_web[\"a\" /* useAsync */])({\n        promiseFn: getAuth\n      }),\n          data = _useAsync.data,\n          isLoading = _useAsync.isLoading,\n          error = _useAsync.error;\n\n      if (isLoading) return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(reuse_Loading, {});\n      if (error) return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(\"div\", {\n        children: \"\\uC5D0\\uB7EC!\"\n      });\n      if (!data) return null;\n      var user = data.user;\n\n      if (data.success) {\n        console.log('로그인되어있습니다.');\n\n        if (isLogined === 2) {\n          alert('이미 로그인되어있습니다.');\n          location.href = '/';\n          return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(reuse_Loading, {});\n        }\n\n        switch (grade) {\n          // 아무나\n          case 0:\n            return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Component, {});\n          // 호스트\n\n          case 1:\n            if (user.isHost) return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Component, {});\n            alert('권한이 없습니다. 호스트 신청을 해주세요:D');\n            location.href = '/';\n            break;\n          // 관리자\n\n          case 2:\n            if (user.isAdmin) return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Component, {});\n            alert('접근할 수 없는 페이지 입니다.');\n            location.href = '/';\n            break;\n        }\n      } else {\n        // 로그인되지않음\n        console.log('로그인을 해주세요.');\n\n        if (isLogined === 1) {\n          alert('로그인을 해주세요.');\n          location.href = '/login';\n        } else {\n          return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(Component, {});\n        }\n      }\n\n      return /*#__PURE__*/Object(jsx_runtime[\"jsx\"])(reuse_Loading, {});\n    };\n  };\n};\n\n/* harmony default export */ var hoc_withAuth = __webpack_exports__[\"a\"] = (withAuth_withAuth);\n\n/***/ }),\n\n/***/ \"NRgu\":\n/***/ (function(module, exports, __webpack_require__) {\n\n\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/login\",\n        function () {\n          return __webpack_require__(\"11/B\");\n        }\n      ]);\n    \n\n/***/ })\n\n},[[\"NRgu\",0,2,1,3,5,4,6,7,8]]]);","inputSourceMap":{"version":3,"sources":["/Users/zknock/Develop/localhost_web/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/zknock/Develop/localhost_web/client/pages/login.tsx","/Users/zknock/Develop/localhost_web/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/zknock/Develop/localhost_web/client/components/reuse/Loading.tsx","/Users/zknock/Develop/localhost_web/node_modules/next/dist/build/webpack/loaders/next-babel-loader.js??ref--4!/Users/zknock/Develop/localhost_web/client/components/main/hoc/withAuth.tsx","/Users/zknock/Develop/localhost_web/node_modules/next/dist/build/webpack/loaders/next-client-pages-loader.js?page=%2Flogin&absolutePagePath=private-next-pages%2Flogin.tsx!"],"names":[],"mappings":";;;;;;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAgD;AACtB;AACqB;AACF;AACN;AACgB;AACvD,qBAAqB,iEAAM;AAC3B;AACA;AACA,CAAC,UAAU,eAAe;;AAE1B;AACA,sBAAsB,6DAAI,CAAC,uEAAM;AACjC;AACA,2BAA2B,6DAAI;AAC/B,6BAA6B,6DAAI,CAAC,sEAAK,IAAI;AAC3C,KAAK;AACL,GAAG;AACH;;AAEe,oJAAQ,aAAa,E;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;ACpBY;AACK;AAC3B;AACa;AACvC,uBAAuB,gDAAM;AAC7B;AACA;AACA,CAAC,gBAAgB,aAAa,2BAA2B,aAAa,mBAAmB,uBAAuB,eAAe,MAAM,OAAO;;AAE5I,IAAI,eAAO;AACX,sBAAsB,0BAAI;AAC1B,2BAA2B,0BAAI,CAAC,mCAAgB,IAAI;AACpD,GAAG;AACH;;AAEe,iEAAO,E;;ACf0B;AACgF;AACe;AACrH;AACA;AACc;AACD;AACG;AAC1C;AACA;AACA;;AAEA;AACA,aAAa,2CAAiB,eAAe,qBAAmB;AAChE;AACA,WAAW,qBAAmB;AAC9B;AACA;AACA;AACA;AACA,mBAAmB,eAAK,eAAe,sBAAM;AAC7C;AACA,aAAa;;AAEb;AACA;AACA;;AAEA;AACA;AACA;AACA;AACA;AACA,KAAK;AACL,GAAG;;AAEH;AACA;AACA;AACA,CAAC;;AAED,IAAI,iBAAQ;AACZ;AACA;AACA,sBAAsB,oCAAQ;AAC9B;AACA,OAAO;AACP;AACA;AACA;;AAEA,yCAAyC,0BAAI,CAAC,aAAO,IAAI;AACzD,qCAAqC,0BAAI;AACzC;AACA,OAAO;AACP;AACA;;AAEA;AACA;;AAEA;AACA;AACA;AACA,8BAA8B,0BAAI,CAAC,aAAO,IAAI;AAC9C;;AAEA;AACA;AACA;AACA,gCAAgC,0BAAI,cAAc;AAClD;;AAEA;AACA,iDAAiD,0BAAI,cAAc;AACnE;AACA;AACA;AACA;;AAEA;AACA,kDAAkD,0BAAI,cAAc;AACpE;AACA;AACA;AACA;AACA,OAAO;AACP;AACA;;AAEA;AACA;AACA;AACA,SAAS;AACT,8BAA8B,0BAAI,cAAc;AAChD;AACA;;AAEA,0BAA0B,0BAAI,CAAC,aAAO,IAAI;AAC1C;AACA;AACA;;AAEe,6FAAQ,E;;;;;;;;ACtGvB;AACA;AACA;AACA,iBAAiB,mBAAO,CAAC,MAA8B;AACvD;AACA","file":"x","sourcesContent":["import { jsx as _jsx } from \"react/jsx-runtime\";\nimport React from 'react';\nimport Layout from '../components/main/Layout';\nimport Login from '../components/user/Login';\nimport styled from 'styled-components';\nimport withAuth from '../components/main/hoc/withAuth';\nvar LoginContainer = styled.div.withConfig({\n  displayName: \"login__LoginContainer\",\n  componentId: \"sc-1p0n174-0\"\n})([\"& > *{margin:0 auto;}\"]);\n\nvar login = function login(props) {\n  return /*#__PURE__*/_jsx(Layout, {\n    title: \"\\uB85C\\uADF8\\uC778 | localhost\",\n    children: /*#__PURE__*/_jsx(LoginContainer, {\n      children: /*#__PURE__*/_jsx(Login, {})\n    })\n  });\n};\n\nexport default withAuth(2, 0)(login);","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport { CircularProgress } from '@material-ui/core';\nimport React from 'react';\nimport styled from 'styled-components';\nvar LoadingContainer = styled.div.withConfig({\n  displayName: \"Loading__LoadingContainer\",\n  componentId: \"sc-1eksibe-0\"\n})([\"width:100vw;height:100vh;background:rgba(0,0,0,0.1);display:flex;align-items:center;justify-content:center;position:fixed;top:0;left:0;\"]);\n\nvar Loading = function Loading(props) {\n  return /*#__PURE__*/_jsx(LoadingContainer, {\n    children: /*#__PURE__*/_jsx(CircularProgress, {})\n  });\n};\n\nexport default Loading;","import { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport axios from 'axios';\nimport React from 'react';\nimport SERVER from '../../../utils/url';\nimport { useAsync } from 'react-async';\nimport Loading from '../../reuse/Loading'; // isLogined\n// 0: 아무나 볼 수 있음, 1: 로그인한 회원만 볼 수 있음, 2: 게스트만 볼 수 있음\n// grade\n// 0: 아무나 볼 수 있음, 2: 호스트회원만 볼 수 있음, 3: 관리자회원만 볼 수 있음\n\nvar getAuth = /*#__PURE__*/function () {\n  var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee() {\n    var res;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            _context.next = 2;\n            return axios.get(\"\".concat(SERVER, \"/api/auth/check\"), {\n              withCredentials: true\n            });\n\n          case 2:\n            res = _context.sent;\n            return _context.abrupt(\"return\", res.data);\n\n          case 4:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getAuth() {\n    return _ref.apply(this, arguments);\n  };\n}();\n\nvar withAuth = function withAuth(isLogined, grade) {\n  return function (Component) {\n    return function () {\n      var _useAsync = useAsync({\n        promiseFn: getAuth\n      }),\n          data = _useAsync.data,\n          isLoading = _useAsync.isLoading,\n          error = _useAsync.error;\n\n      if (isLoading) return /*#__PURE__*/_jsx(Loading, {});\n      if (error) return /*#__PURE__*/_jsx(\"div\", {\n        children: \"\\uC5D0\\uB7EC!\"\n      });\n      if (!data) return null;\n      var user = data.user;\n\n      if (data.success) {\n        console.log('로그인되어있습니다.');\n\n        if (isLogined === 2) {\n          alert('이미 로그인되어있습니다.');\n          location.href = '/';\n          return /*#__PURE__*/_jsx(Loading, {});\n        }\n\n        switch (grade) {\n          // 아무나\n          case 0:\n            return /*#__PURE__*/_jsx(Component, {});\n          // 호스트\n\n          case 1:\n            if (user.isHost) return /*#__PURE__*/_jsx(Component, {});\n            alert('권한이 없습니다. 호스트 신청을 해주세요:D');\n            location.href = '/';\n            break;\n          // 관리자\n\n          case 2:\n            if (user.isAdmin) return /*#__PURE__*/_jsx(Component, {});\n            alert('접근할 수 없는 페이지 입니다.');\n            location.href = '/';\n            break;\n        }\n      } else {\n        // 로그인되지않음\n        console.log('로그인을 해주세요.');\n\n        if (isLogined === 1) {\n          alert('로그인을 해주세요.');\n          location.href = '/login';\n        } else {\n          return /*#__PURE__*/_jsx(Component, {});\n        }\n      }\n\n      return /*#__PURE__*/_jsx(Loading, {});\n    };\n  };\n};\n\nexport default withAuth;","\n      (window.__NEXT_P = window.__NEXT_P || []).push([\n        \"/login\",\n        function () {\n          return require(\"private-next-pages/login.tsx\");\n        }\n      ]);\n    "]}}