{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/zknock/Develop/localhost_web/client/components/host/MyHosting/HostApplicantItem.tsx\",\n    _s = $RefreshSig$();\n\nimport React, { useContext, useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Button } from '@material-ui/core';\nimport axios from 'axios';\nimport SERVER from '../../../utils/url';\nimport Router from 'next/router';\nimport { UserStateContext } from '../../../context/user';\nvar ButtonLabel = styled(Button).withConfig({\n  displayName: \"HostApplicantItem__ButtonLabel\",\n  componentId: \"sc-6rwh3o-0\"\n})([\"&.MuiButton-root{color:#5197d5;margin:0;font-size:0.9em;&:hover{color:rgb(33,33,33);}}&.MuiButton-textSecondary{color:#e74c3c;}\"]);\n_c = ButtonLabel;\nvar ButtonTd = styled.td.withConfig({\n  displayName: \"HostApplicantItem__ButtonTd\",\n  componentId: \"sc-6rwh3o-1\"\n})([\"max-width:10em;min-width:10em;\"]);\n_c2 = ButtonTd;\nexport default function HostApplicantItem(props) {\n  _s();\n\n  var applicant = props.applicant;\n\n  var _useState = useState(applicant),\n      list = _useState[0],\n      setList = _useState[1];\n\n  var currentUser = useContext(UserStateContext);\n  useEffect(function () {\n    setList(applicant);\n  }, [applicant]);\n\n  var onApprovalHandler = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var res, createRoomRes;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.prev = 1;\n              _context.next = 4;\n              return axios.post(\"\".concat(SERVER, \"/api/host/application/approve\"), {\n                id: list.user.id,\n                hostUserId: currentUser.id\n              });\n\n            case 4:\n              res = _context.sent;\n\n              if (!res.data.success) {\n                _context.next = 10;\n                break;\n              }\n\n              _context.next = 8;\n              return axios.post(\"\".concat(SERVER, \"/api/message/room/create\"), {\n                hostUserId: currentUser.id,\n                userId: list.user.id\n              });\n\n            case 8:\n              createRoomRes = _context.sent;\n\n              if (createRoomRes.data.success) {\n                alert('승인 처리되었습니다. 채팅을 통해 약속을 잡으세요');\n                Router.push('/hosts/myhosting');\n              }\n\n            case 10:\n              _context.next = 15;\n              break;\n\n            case 12:\n              _context.prev = 12;\n              _context.t0 = _context[\"catch\"](1);\n              return _context.abrupt(\"return\", console.log(_context.t0));\n\n            case 15:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 12]]);\n    }));\n\n    return function onApprovalHandler(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  var onDenialHandler = /*#__PURE__*/function () {\n    var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee2(e) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee2$(_context2) {\n        while (1) {\n          switch (_context2.prev = _context2.next) {\n            case 0:\n              e.preventDefault();\n              _context2.prev = 1;\n              _context2.next = 4;\n              return axios.post(\"\".concat(SERVER, \"/api/host/application/deny\"), {\n                id: list.user.id,\n                hostUserId: currentUser.id\n              });\n\n            case 4:\n              res = _context2.sent;\n\n              if (res.data.success) {\n                alert('거부 처리되었습니다.');\n                Router.push('/hosts/myhosting');\n              }\n\n              _context2.next = 11;\n              break;\n\n            case 8:\n              _context2.prev = 8;\n              _context2.t0 = _context2[\"catch\"](1);\n              return _context2.abrupt(\"return\", console.log(_context2.t0));\n\n            case 11:\n            case \"end\":\n              return _context2.stop();\n          }\n        }\n      }, _callee2, null, [[1, 8]]);\n    }));\n\n    return function onDenialHandler(_x2) {\n      return _ref2.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: (applicant === null || applicant === void 0 ? void 0 : applicant.user.nickname) || '닉네임'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: (applicant === null || applicant === void 0 ? void 0 : applicant.date) || '2021-01-01'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(ButtonTd, {\n        children: [/*#__PURE__*/_jsxDEV(ButtonLabel, {\n          onClick: onApprovalHandler,\n          children: \"\\uC2B9\\uC778\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(ButtonLabel, {\n          onClick: onDenialHandler,\n          color: \"secondary\",\n          children: \"\\uAC70\\uBD80\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 3\n  }, this);\n}\n\n_s(HostApplicantItem, \"DmQS3/SR/ZITmDzTmpW5zn1HpO8=\");\n\n_c3 = HostApplicantItem;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"ButtonLabel\");\n$RefreshReg$(_c2, \"ButtonTd\");\n$RefreshReg$(_c3, \"HostApplicantItem\");","map":{"version":3,"sources":["/Users/zknock/Develop/localhost_web/client/components/host/MyHosting/HostApplicantItem.tsx"],"names":["React","useContext","useEffect","useState","styled","Button","axios","SERVER","Router","UserStateContext","ButtonLabel","ButtonTd","td","HostApplicantItem","props","applicant","list","setList","currentUser","onApprovalHandler","e","preventDefault","post","id","user","hostUserId","res","data","success","userId","createRoomRes","alert","push","console","log","onDenialHandler","nickname","date"],"mappings":"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","sourcesContent":["import { Application } from '../../../interfaces';\nimport React, { useContext, useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Button } from '@material-ui/core';\nimport axios from 'axios';\nimport SERVER from '../../../utils/url';\nimport Router from 'next/router';\nimport { UserStateContext } from '../../../context/user';\n\ntype Props = {\n\tapplicant: Application;\n};\nconst ButtonLabel = styled(Button)`\n\t&.MuiButton-root {\n\t\tcolor: #5197d5;\n\t\tmargin: 0;\n\t\tfont-size: 0.9em;\n\t\t&:hover {\n\t\t\tcolor: rgb(33, 33, 33);\n\t\t}\n\t}\n\t&.MuiButton-textSecondary {\n\t\tcolor: #e74c3c;\n\t}\n`;\nconst ButtonTd = styled.td`\n\tmax-width: 10em;\n\tmin-width: 10em;\n`;\n\nexport default function HostApplicantItem(props: Props) {\n\tconst { applicant } = props;\n\tconst [list, setList] = useState(applicant);\n\tconst currentUser = useContext(UserStateContext);\n\n\tuseEffect(() => {\n\t\tsetList(applicant);\n\t}, [applicant]);\n\n\tconst onApprovalHandler = async (e: React.MouseEvent) => {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tconst res = await axios.post(`${SERVER}/api/host/application/approve`, {\n\t\t\t\tid: list.user.id,\n\t\t\t\thostUserId: currentUser.id,\n\t\t\t});\n\t\t\tif (res.data.success) {\n\t\t\t\tconst createRoomRes = await axios.post(\n\t\t\t\t\t`${SERVER}/api/message/room/create`,\n\t\t\t\t\t{\n\t\t\t\t\t\thostUserId: currentUser.id,\n\t\t\t\t\t\tuserId: list.user.id,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t\tif (createRoomRes.data.success) {\n\t\t\t\t\talert('승인 처리되었습니다. 채팅을 통해 약속을 잡으세요');\n\t\t\t\t\tRouter.push('/hosts/myhosting');\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\treturn console.log(err);\n\t\t}\n\t};\n\tconst onDenialHandler = async (e: React.MouseEvent) => {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tconst res = await axios.post(`${SERVER}/api/host/application/deny`, {\n\t\t\t\tid: list.user.id,\n\t\t\t\thostUserId: currentUser.id,\n\t\t\t});\n\t\t\tif (res.data.success) {\n\t\t\t\talert('거부 처리되었습니다.');\n\t\t\t\tRouter.push('/hosts/myhosting');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\treturn console.log(err);\n\t\t}\n\t};\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<tr>\n\t\t\t\t<td>{applicant?.user.nickname || '닉네임'}</td>\n\t\t\t\t<td>{applicant?.date || '2021-01-01'}</td>\n\t\t\t\t<ButtonTd>\n\t\t\t\t\t<ButtonLabel onClick={onApprovalHandler}>승인</ButtonLabel>\n\t\t\t\t\t<ButtonLabel onClick={onDenialHandler} color='secondary'>\n\t\t\t\t\t\t거부\n\t\t\t\t\t</ButtonLabel>\n\t\t\t\t</ButtonTd>\n\t\t\t</tr>\n\t\t</React.Fragment>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}