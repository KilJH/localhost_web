{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport { Grow, Slider } from '@material-ui/core';\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport SERVER from '../../utils/url';\nimport Button from '../reuse/Button';\nimport Input from '../reuse/Input';\nimport LanguageSelect from '../reuse/LanguageSelect';\nconst FilterContainer = styled.div.withConfig({\n  displayName: \"HostFilter__FilterContainer\",\n  componentId: \"qeeafx-0\"\n})([\"position:absolute;background:rgba(255,255,255,0.9);border-radius:0.25rem;padding:1rem;z-index:1;width:240px;box-sizing:border-box;box-shadow:0px 2px 4px rgba(0,0,0,0.2);& > div{display:flex;align-items:center;margin:0.5rem 0;& > *:first-child{width:33%;}& > *:last-child{width:66%;}}\"]);\nconst StyledSlider = styled(Slider).withConfig({\n  displayName: \"HostFilter__StyledSlider\",\n  componentId: \"qeeafx-1\"\n})([\"&.MuiSlider-root{color:#5179d5;}& .MuiSlider-markLabel{font-size:0.8em;}\"]);\n\nconst HostFilter = props => {\n  const {\n    origin,\n    setOrigin,\n    setNearbyHosts,\n    onShow = true,\n    onClose,\n    coord\n  } = props;\n  const {\n    0: distance,\n    1: setDistance\n  } = useState(4);\n  useEffect(() => {\n    // 거리가 변할 때마다 axios 요청 후 setNearbyHosts 해주기\n    axios.post(`${SERVER}/api/host/nearbyList`, {\n      latitude: coord.lat,\n      longitude: coord.lng,\n      distance: distance\n    }).then(res => {\n      setOrigin(res.data.nearbyhosts);\n    });\n  }, [distance]);\n  const marks = [{\n    value: 1,\n    label: '1km'\n  }, {\n    value: 8.5,\n    label: '8.5km'\n  }, {\n    value: 16,\n    label: '16km'\n  }];\n\n  const onLangChange = langs => {\n    // origin 호스트 목록에서 비교를 통해\n    if (langs.length > 0) {\n      const filteredList = origin.filter(host => {\n        return host.languages.filter(lang => langs.includes(lang)).length;\n      }); // filtered 호스트 목록을 set 해준다.\n\n      setNearbyHosts(filteredList);\n    } else {\n      setNearbyHosts(origin);\n    }\n  };\n\n  return /*#__PURE__*/_jsx(Grow, {\n    in: onShow,\n    timeout: 200,\n    children: /*#__PURE__*/_jsx(\"div\", {\n      style: {\n        position: 'relative',\n        top: '2.5rem',\n        left: '-240px'\n      },\n      children: /*#__PURE__*/_jsxs(FilterContainer, {\n        children: [/*#__PURE__*/_jsxs(\"div\", {\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            children: \"\\uC5EC\\uD589\\uC2A4\\uD0C0\\uC77C\"\n          }), /*#__PURE__*/_jsx(Input, {})]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            children: \"\\uC5B8\\uC5B4\"\n          }), /*#__PURE__*/_jsx(LanguageSelect, {\n            onChange: onLangChange\n          })]\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          children: [/*#__PURE__*/_jsx(\"label\", {\n            children: \"\\uAC70\\uB9AC\"\n          }), /*#__PURE__*/_jsx(StyledSlider, {\n            defaultValue: 4,\n            min: 1,\n            step: 0.5,\n            max: 16,\n            marks: marks,\n            valueLabelDisplay: \"auto\",\n            value: distance,\n            onChange: (e, value) => {\n              setDistance(value);\n            }\n          })]\n        }), /*#__PURE__*/_jsx(Button, {\n          onClick: () => {\n            onClose();\n          },\n          width: \"100%\",\n          children: \"\\uD655\\uC778\"\n        })]\n      })\n    })\n  });\n};\n\nexport default HostFilter;","map":null,"metadata":{},"sourceType":"module"}