{"ast":null,"code":"import { jsx as _jsx } from \"react/jsx-runtime\";\nimport axios from 'axios';\nimport React, { useState, useContext, useEffect } from 'react';\nimport styled from 'styled-components';\nimport SERVER from '../../utils/url';\nimport { Button } from '@material-ui/core';\nimport { UserStateContext } from '../../context/user';\nconst Btn = styled(Button).withConfig({\n  displayName: \"FollowButton__Btn\",\n  componentId: \"sc-2sj4co-0\"\n})([\"font-size:0.75em !important;background-color:\", \" !important;color:\", \" !important;border:none;width:8em;box-shadow:none !important;&:active{background-color:\", \";box-shadow:0px 2px 3px -2px rgba(0,0,0,0.2),0px 5px 8px 0px rgba(0,0,0,0.14),0px 3px 12px 2px rgba(0,0,0,0.12) !important;}&:hover{background-color:\", \" !important;}\"], props => props.isFollowed ? '#c5c7c9' : '#5197D5', props => props.isFollowed ? 'rgba(0,0,0,0.87)' : 'white', props => props.isFollowed ? '#a5a7a9' : '#4187C5', props => props.isFollowed ? '#a5a7a9' : '#4187C5');\n\nconst FollowButton = props => {\n  const {\n    userId,\n    initialFollowed\n  } = props;\n  const currentUser = useContext(UserStateContext);\n  const {\n    0: followState,\n    1: setFollowState\n  } = useState(initialFollowed || false);\n  useEffect(() => {\n    axios.post(`${SERVER}/api/user/follow_check`, {\n      userId: userId,\n      followerId: currentUser.id\n    }).then(res => setFollowState(res.data.isFollowed));\n  }, [followState]);\n\n  const onClick = async e => {\n    try {\n      const res = await axios.post(`${SERVER}/api/user/follow`, {\n        userId,\n        followerId: currentUser.id\n      });\n      if (res.data.success) setFollowState(!followState);\n    } catch (err) {\n      return console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsx(Btn, {\n    isFollowed: followState,\n    onClick: onClick,\n    variant: \"contained\",\n    children: followState ? 'Followed' : 'Follow'\n  });\n};\n\nexport default FollowButton;","map":null,"metadata":{},"sourceType":"module"}