{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/zknock/Develop/localhost_web/client/components/host/MyHosting/HostApplicantItem.tsx\";\nimport React, { useContext, useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Button } from '@material-ui/core';\nimport axios from 'axios';\nimport SERVER from '../../../utils/url';\nimport Router from 'next/router';\nimport { UserStateContext } from '../../../context/user';\nconst ButtonLabel = styled(Button).withConfig({\n  displayName: \"HostApplicantItem__ButtonLabel\",\n  componentId: \"sc-6rwh3o-0\"\n})([\"&.MuiButton-root{color:#5197d5;margin:0;font-size:0.9em;&:hover{color:rgb(33,33,33);}}&.MuiButton-textSecondary{color:#e74c3c;}\"]);\nconst ButtonTd = styled.td.withConfig({\n  displayName: \"HostApplicantItem__ButtonTd\",\n  componentId: \"sc-6rwh3o-1\"\n})([\"max-width:10em;min-width:10em;\"]);\nexport default function HostApplicantItem(props) {\n  const {\n    applicant\n  } = props;\n  const {\n    0: list,\n    1: setList\n  } = useState(applicant);\n  const currentUser = useContext(UserStateContext);\n  useEffect(() => {\n    setList(applicant);\n  }, [applicant]);\n\n  const onApprovalHandler = async e => {\n    e.preventDefault();\n\n    try {\n      const res = await axios.post(`${SERVER}/api/host/application/approve`, {\n        id: list.user.id,\n        hostUserId: currentUser.id\n      });\n\n      if (res.data.success) {\n        const createRoomRes = await axios.post(`${SERVER}/api/message/room/create`, {\n          hostUserId: currentUser.id,\n          userId: list.user.id\n        });\n\n        if (createRoomRes.data.success) {\n          alert('승인 처리되었습니다. 채팅을 통해 약속을 잡으세요');\n          Router.push('/hosts/myhosting');\n        }\n      }\n    } catch (err) {\n      return console.log(err);\n    }\n  };\n\n  const onDenialHandler = async e => {\n    e.preventDefault();\n\n    try {\n      const res = await axios.post(`${SERVER}/api/host/application/deny`, {\n        id: list.user.id,\n        hostUserId: currentUser.id\n      });\n\n      if (res.data.success) {\n        alert('거부 처리되었습니다.');\n        Router.push('/hosts/myhosting');\n      }\n    } catch (err) {\n      return console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(React.Fragment, {\n    children: /*#__PURE__*/_jsxDEV(\"tr\", {\n      children: [/*#__PURE__*/_jsxDEV(\"td\", {\n        children: (applicant === null || applicant === void 0 ? void 0 : applicant.user.nickname) || '닉네임'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 82,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"td\", {\n        children: (applicant === null || applicant === void 0 ? void 0 : applicant.date) || '2021-01-01'\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 83,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(ButtonTd, {\n        children: [/*#__PURE__*/_jsxDEV(ButtonLabel, {\n          onClick: onApprovalHandler,\n          children: \"\\uC2B9\\uC778\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 85,\n          columnNumber: 6\n        }, this), /*#__PURE__*/_jsxDEV(ButtonLabel, {\n          onClick: onDenialHandler,\n          color: \"secondary\",\n          children: \"\\uAC70\\uBD80\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 86,\n          columnNumber: 6\n        }, this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 84,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 81,\n      columnNumber: 4\n    }, this)\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 80,\n    columnNumber: 3\n  }, this);\n}","map":{"version":3,"sources":["/Users/zknock/Develop/localhost_web/client/components/host/MyHosting/HostApplicantItem.tsx"],"names":["React","useContext","useEffect","useState","styled","Button","axios","SERVER","Router","UserStateContext","ButtonLabel","ButtonTd","td","HostApplicantItem","props","applicant","list","setList","currentUser","onApprovalHandler","e","preventDefault","res","post","id","user","hostUserId","data","success","createRoomRes","userId","alert","push","err","console","log","onDenialHandler","nickname","date"],"mappings":"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","sourcesContent":["import { Application } from '../../../interfaces';\nimport React, { useContext, useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { Button } from '@material-ui/core';\nimport axios from 'axios';\nimport SERVER from '../../../utils/url';\nimport Router from 'next/router';\nimport { UserStateContext } from '../../../context/user';\n\ntype Props = {\n\tapplicant: Application;\n};\nconst ButtonLabel = styled(Button)`\n\t&.MuiButton-root {\n\t\tcolor: #5197d5;\n\t\tmargin: 0;\n\t\tfont-size: 0.9em;\n\t\t&:hover {\n\t\t\tcolor: rgb(33, 33, 33);\n\t\t}\n\t}\n\t&.MuiButton-textSecondary {\n\t\tcolor: #e74c3c;\n\t}\n`;\nconst ButtonTd = styled.td`\n\tmax-width: 10em;\n\tmin-width: 10em;\n`;\n\nexport default function HostApplicantItem(props: Props) {\n\tconst { applicant } = props;\n\tconst [list, setList] = useState(applicant);\n\tconst currentUser = useContext(UserStateContext);\n\n\tuseEffect(() => {\n\t\tsetList(applicant);\n\t}, [applicant]);\n\n\tconst onApprovalHandler = async (e: React.MouseEvent) => {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tconst res = await axios.post(`${SERVER}/api/host/application/approve`, {\n\t\t\t\tid: list.user.id,\n\t\t\t\thostUserId: currentUser.id,\n\t\t\t});\n\t\t\tif (res.data.success) {\n\t\t\t\tconst createRoomRes = await axios.post(\n\t\t\t\t\t`${SERVER}/api/message/room/create`,\n\t\t\t\t\t{\n\t\t\t\t\t\thostUserId: currentUser.id,\n\t\t\t\t\t\tuserId: list.user.id,\n\t\t\t\t\t},\n\t\t\t\t);\n\t\t\t\tif (createRoomRes.data.success) {\n\t\t\t\t\talert('승인 처리되었습니다. 채팅을 통해 약속을 잡으세요');\n\t\t\t\t\tRouter.push('/hosts/myhosting');\n\t\t\t\t}\n\t\t\t}\n\t\t} catch (err) {\n\t\t\treturn console.log(err);\n\t\t}\n\t};\n\tconst onDenialHandler = async (e: React.MouseEvent) => {\n\t\te.preventDefault();\n\t\ttry {\n\t\t\tconst res = await axios.post(`${SERVER}/api/host/application/deny`, {\n\t\t\t\tid: list.user.id,\n\t\t\t\thostUserId: currentUser.id,\n\t\t\t});\n\t\t\tif (res.data.success) {\n\t\t\t\talert('거부 처리되었습니다.');\n\t\t\t\tRouter.push('/hosts/myhosting');\n\t\t\t}\n\t\t} catch (err) {\n\t\t\treturn console.log(err);\n\t\t}\n\t};\n\treturn (\n\t\t<React.Fragment>\n\t\t\t<tr>\n\t\t\t\t<td>{applicant?.user.nickname || '닉네임'}</td>\n\t\t\t\t<td>{applicant?.date || '2021-01-01'}</td>\n\t\t\t\t<ButtonTd>\n\t\t\t\t\t<ButtonLabel onClick={onApprovalHandler}>승인</ButtonLabel>\n\t\t\t\t\t<ButtonLabel onClick={onDenialHandler} color='secondary'>\n\t\t\t\t\t\t거부\n\t\t\t\t\t</ButtonLabel>\n\t\t\t\t</ButtonTd>\n\t\t\t</tr>\n\t\t</React.Fragment>\n\t);\n}\n"]},"metadata":{},"sourceType":"module"}