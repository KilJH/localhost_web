{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { Fragment as _Fragment } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport { Checkbox, Fade, FormControlLabel, FormGroup, Modal, Radio, RadioGroup } from '@material-ui/core';\nimport axios from 'axios';\nimport React, { useContext, useEffect, useState } from 'react';\nimport { useInput } from '../../hooks/useInput';\nimport SERVER from '../../utils/url';\nimport Router from 'next/router';\nimport { UserStateContext } from '../../context/user';\nimport styled from 'styled-components';\nimport Textarea from '../reuse/Textarea';\nimport Input from '../reuse/Input';\nimport Button from '../reuse/Button';\nimport SearchPlace from '../search/SearchPlace';\nimport { languages, travelStyles } from '../../utils/basicData';\nimport TravelStyleTag from '../reuse/TravelStyleTag';\nconst RequestContainer = styled.div.withConfig({\n  displayName: \"Request__RequestContainer\",\n  componentId: \"sc-1j743le-0\"\n})([\"margin:2rem auto;& > div > div{display:flex;margin:1.5rem 0;align-items:center;flex-wrap:wrap;& > label{font-weight:600;flex:1;padding:0 1em;line-break:word;}& > *:nth-child(2){flex:2;}}\"]);\nconst WarningMessage = styled.p.withConfig({\n  displayName: \"Request__WarningMessage\",\n  componentId: \"sc-1j743le-1\"\n})([\"font-size:0.7em;font-weight:600;text-align:center;margin:2rem 0 0.25rem 0;\"]);\nconst BtnRequest = styled(Button).withConfig({\n  displayName: \"Request__BtnRequest\",\n  componentId: \"sc-1j743le-2\"\n})([\"display:block;font-size:1em;font-weight:500;margin:0 auto;\"]);\nconst StyledModal = styled(Modal).withConfig({\n  displayName: \"Request__StyledModal\",\n  componentId: \"sc-1j743le-3\"\n})([\"display:flex;align-items:center;justify-content:center;& .searchForm{width:80vw;max-width:800px;background:rgba(255,255,255,0.9);padding:1rem;border-radius:0.25rem;outline:0;box-shadow:2px 2px 8px rgba(0,0,0,0.3),-2px -2px 8px rgba(0,0,0,0.3);}\"]);\n\nconst TravelStyleInput = ({\n  value: selectedStyle,\n  setValue: setSelectedStyle\n}) => {\n  const onClick = e => {\n    if (selectedStyle === e.currentTarget.innerText) {\n      setSelectedStyle('');\n      return;\n    }\n\n    setSelectedStyle(e.currentTarget.innerText);\n  };\n\n  return /*#__PURE__*/_jsx(_Fragment, {\n    children: travelStyles.map(style => /*#__PURE__*/_jsx(TravelStyleTag, {\n      label: style,\n      checked: style === selectedStyle,\n      onClick: onClick\n    }))\n  });\n};\n\nconst Request = props => {\n  // const country = useInput('대한민국');\n  const {\n    0: place,\n    1: setPlace\n  } = useState({\n    name: '',\n    formatted_address: '',\n    geometry: {\n      location: {\n        lat: 0,\n        lng: 0\n      }\n    }\n  });\n  const {\n    0: langs,\n    1: setLangs\n  } = useState([]);\n  const {\n    0: selectedStyle,\n    1: setSelectedStyle\n  } = useState('');\n  const description = useInput('');\n  const currentUser = useContext(UserStateContext);\n  let newChecked = [];\n\n  for (let i = 0; i < languages.length; i++) {\n    newChecked = newChecked.concat(false);\n  }\n\n  const {\n    0: checked,\n    1: setChecked\n  } = useState(newChecked);\n  const travelerNation = useInput('0'); // 모달을 위한 State\n\n  const {\n    0: open,\n    1: setOpen\n  } = useState(false);\n\n  const handleOpen = () => {\n    setOpen(true);\n  };\n\n  const handleClose = () => {\n    setOpen(false);\n  };\n\n  useEffect(() => {\n    setOpen(false);\n  }, [place]);\n\n  const onSubmit = async () => {\n    // e.preventDefault();\n    const hostInfo = {\n      // country: country.value,\n      place: place,\n      languages: langs,\n      description: description.value,\n      travelStyle: selectedStyle\n    };\n    const res = await axios.post(`${SERVER}/api/host/request`, {\n      userId: currentUser.id,\n      hostInfo\n    });\n    alert(res.data.message);\n    if (res.data.success) Router.push('/');\n  };\n\n  const onChange = e => {\n    if (langs.length < 4) {\n      if (e.target.checked && langs.length < 3) {\n        setLangs([...langs, e.target.value]);\n        setChecked([...checked.slice(0, Number(e.target.id) - 1), true, ...checked.slice(Number(e.target.id) - 1 + 1)]);\n      } else {\n        setLangs(langs.filter(lang => lang !== e.target.value));\n        setChecked([...checked.slice(0, Number(e.target.id) - 1), false, ...checked.slice(Number(e.target.id) - 1 + 1)]);\n      }\n    }\n  };\n\n  return /*#__PURE__*/_jsx(RequestContainer, {\n    children: /*#__PURE__*/_jsxs(\"div\", {\n      children: [/*#__PURE__*/_jsx(\"h2\", {\n        children: \"\\uD638\\uC2A4\\uD2B8 \\uC2E0\\uCCAD\\uC744 \\uC704\\uD55C \\uC815\\uBCF4\\uB97C \\uC785\\uB825\\uD574\\uC8FC\\uC138\\uC694\"\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"\\uD638\\uC2A4\\uD2B8 \\uD65C\\uB3D9 \\uC9C0\\uC5ED\\uC744 \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694\"\n        }), /*#__PURE__*/_jsxs(\"div\", {\n          className: \"addressForm\",\n          children: [/*#__PURE__*/_jsx(Input, {\n            type: \"address\",\n            width: \"100%\",\n            borderRadius: \"0.25rem\",\n            border: \"1px solid rgba(0,0,0,0.41)\",\n            textAlign: \"left\",\n            value: place.name ? `${place.formatted_address}(${place.name})` : '',\n            onClick: handleOpen,\n            onChange: handleOpen\n          }), /*#__PURE__*/_jsx(StyledModal, {\n            open: open,\n            onClose: handleClose,\n            children: /*#__PURE__*/_jsx(Fade, {\n              in: open,\n              children: /*#__PURE__*/_jsx(\"div\", {\n                className: \"searchForm\",\n                children: /*#__PURE__*/_jsx(SearchPlace, {\n                  setPlace: setPlace\n                })\n              })\n            })\n          })]\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"\\uC0AC\\uC6A9\\uAC00\\uB2A5 \\uC5B8\\uC5B4\\uB97C \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694(\\uCD5C\\uB300 3\\uAC1C)\"\n        }), /*#__PURE__*/_jsx(FormGroup, {\n          row: true,\n          children: languages.map(lang => /*#__PURE__*/_jsx(FormControlLabel, {\n            control: /*#__PURE__*/_jsx(Checkbox, {\n              id: `${lang.id}`,\n              color: \"primary\",\n              onChange: onChange,\n              value: lang.name,\n              checked: checked[lang.id - 1]\n            }),\n            label: lang.name\n          }, lang.name))\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"\\uC6D0\\uD558\\uB294 \\uC5EC\\uD589\\uAC1D\\uC758 \\uAD6D\\uC801\\uC744 \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694\"\n        }), /*#__PURE__*/_jsxs(RadioGroup, _objectSpread(_objectSpread({\n          row: true\n        }, travelerNation), {}, {\n          children: [/*#__PURE__*/_jsx(FormControlLabel, {\n            value: \"0\",\n            control: /*#__PURE__*/_jsx(Radio, {\n              color: \"primary\"\n            }),\n            label: \"\\uC0C1\\uAD00\\uC5C6\\uC74C\"\n          }), /*#__PURE__*/_jsx(FormControlLabel, {\n            value: \"1\",\n            control: /*#__PURE__*/_jsx(Radio, {\n              color: \"primary\"\n            }),\n            label: \"\\uC678\\uAD6D\\uC778\"\n          }), /*#__PURE__*/_jsx(FormControlLabel, {\n            value: \"2\",\n            control: /*#__PURE__*/_jsx(Radio, {\n              color: \"primary\"\n            }),\n            label: \"\\uC790\\uAD6D\\uBBFC\"\n          })]\n        }))]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"\\uC790\\uC2E0\\uC744 \\uB300\\uD45C\\uD560 \\uC5EC\\uD589\\uC2A4\\uD0C0\\uC77C\\uC744 \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(TravelStyleInput, {\n            value: selectedStyle,\n            setValue: setSelectedStyle\n          })\n        })]\n      }), /*#__PURE__*/_jsxs(\"div\", {\n        children: [/*#__PURE__*/_jsx(\"label\", {\n          children: \"\\uAC04\\uB7B5\\uD55C \\uC790\\uAE30\\uC18C\\uAC1C\\uB97C \\uC801\\uC5B4\\uC8FC\\uC138\\uC694\"\n        }), /*#__PURE__*/_jsx(\"div\", {\n          children: /*#__PURE__*/_jsx(Textarea, _objectSpread({\n            height: \"8em\"\n          }, description))\n        })]\n      }), /*#__PURE__*/_jsx(WarningMessage, {\n        children: \"\\uC2E0\\uCCAD \\uD6C4 \\uAD00\\uB9AC\\uC790\\uC758 \\uC2B9\\uC778\\uC774 \\uD544\\uC694\\uD569\\uB2C8\\uB2E4.\"\n      }), /*#__PURE__*/_jsx(BtnRequest, {\n        onClick: onSubmit,\n        width: \"10em\",\n        padding: \"0.5rem 1rem\",\n        children: \"\\uC2E0\\uCCAD\"\n      })]\n    })\n  });\n};\n\nexport default Request;","map":null,"metadata":{},"sourceType":"module"}