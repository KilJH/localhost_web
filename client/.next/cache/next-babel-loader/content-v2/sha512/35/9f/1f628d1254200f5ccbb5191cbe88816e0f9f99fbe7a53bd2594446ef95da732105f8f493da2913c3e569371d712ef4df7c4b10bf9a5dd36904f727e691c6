{"ast":null,"code":"import _defineProperty from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\n\nvar _jsxFileName = \"/Users/zknock/Develop/localhost_web/client/components/search/SearchPlace.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport Button from '../reuse/Button';\nimport { useInput } from '../../hooks/useInput';\nimport axios from 'axios';\nimport { Search } from '@material-ui/icons';\nimport Input from '../reuse/Input';\nvar ItemContainer = styled.div.withConfig({\n  displayName: \"SearchPlace__ItemContainer\",\n  componentId: \"prcfne-0\"\n})([\"padding:1rem;& h4,p{margin:0;}&:hover{cursor:pointer;background:#eee;}\"]);\n_c = ItemContainer;\nvar ListContainer = styled.div.withConfig({\n  displayName: \"SearchPlace__ListContainer\",\n  componentId: \"prcfne-1\"\n})([\"max-height:16em;overflow-y:auto;position:absolute;width:100%;background:rgba(255,255,255,1);border-radius:0.5rem;box-shadow:2px 2px 8px rgba(0,0,0,0.3);transition:all 0.5s ease;& > div{animation:transHeight 0.3s ease 0s;}@keyframes transHeight{from{max-height:0;}to{max-height:16em;}}\"]);\n_c2 = ListContainer;\nvar StyledForm = styled.form.withConfig({\n  displayName: \"SearchPlace__StyledForm\",\n  componentId: \"prcfne-2\"\n})([\"width:100%;display:flex;& > input{flex:1;}& > button{margin:0 0 0 0.5rem;}\"]);\n_c3 = StyledForm;\nvar Container = styled.div.withConfig({\n  displayName: \"SearchPlace__Container\",\n  componentId: \"prcfne-3\"\n})([\"width:100%;position:relative;z-index:8;\"]);\n_c4 = Container;\n\nvar PlaceItem = function PlaceItem(props) {\n  var place = props.place,\n      setPlace = props.setPlace,\n      onClose = props.onClose;\n  return /*#__PURE__*/_jsxDEV(ItemContainer, {\n    onClick: function onClick() {\n      setPlace(place);\n      onClose();\n    },\n    className: \"placeItem\",\n    children: [/*#__PURE__*/_jsxDEV(\"h4\", {\n      className: \"placeItem\",\n      children: place.name\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 84,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(\"p\", {\n      className: \"placeItem\",\n      children: place.formatted_address\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 85,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 77,\n    columnNumber: 3\n  }, _this);\n};\n\n_c5 = PlaceItem;\n\nvar SearchPlace = function SearchPlace(props) {\n  _s();\n\n  var input = useInput('');\n  var setPlace = props.setPlace;\n\n  var _useState = useState([]),\n      places = _useState[0],\n      setPlaces = _useState[1];\n\n  var _useState2 = useState(false),\n      open = _useState2[0],\n      setOpen = _useState2[1];\n\n  var onSearch = function onSearch(e) {\n    e.preventDefault();\n    axios.get(\"/api/map/searchPlaces?search=\".concat(input.value)).then(function (res) {\n      setPlaces(res.data.places);\n      handleOpen();\n    });\n  };\n\n  var handleOpen = function handleOpen() {\n    setOpen(true);\n  };\n\n  var handleClose = function handleClose() {\n    setOpen(false);\n  };\n\n  useEffect(function () {\n    document.addEventListener('click', function (e) {\n      if (!e.target.classList.value.includes('placeItem')) {\n        handleClose();\n      }\n    });\n  }, []);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    id: \"searchPlaces\",\n    children: [/*#__PURE__*/_jsxDEV(StyledForm, {\n      onSubmit: onSearch,\n      onClick: handleOpen,\n      className: \"placeItem\",\n      children: [/*#__PURE__*/_jsxDEV(Input, _objectSpread(_objectSpread({}, input), {}, {\n        placeholder: \"\\uC8FC\\uC18C\\uB97C \\uAC80\\uC0C9\\uD574\\uC8FC\\uC138\\uC694\",\n        border: \"1px solid rgba(0,0,0,0.42)\",\n        borderRadius: \"0.25rem\",\n        textAlign: \"left\",\n        className: \"placeItem\"\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(Button, {\n        type: \"submit\",\n        padding: \"0.375rem 1rem\",\n        className: \"placeItem\",\n        children: /*#__PURE__*/_jsxDEV(Search, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 133,\n          columnNumber: 6\n        }, _this)\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 132,\n        columnNumber: 5\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 119,\n      columnNumber: 4\n    }, _this), /*#__PURE__*/_jsxDEV(ListContainer, {\n      id: \"placesList\",\n      onBlur: handleClose,\n      children: places.length > 0 && open ? /*#__PURE__*/_jsxDEV(\"div\", {\n        children: places.map(function (place) {\n          return /*#__PURE__*/_jsxDEV(PlaceItem, {\n            place: place,\n            setPlace: setPlace,\n            onClose: handleClose\n          }, place.name, false, {\n            fileName: _jsxFileName,\n            lineNumber: 140,\n            columnNumber: 8\n          }, _this);\n        })\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 6\n      }, _this) : ''\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 136,\n      columnNumber: 4\n    }, _this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 118,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(SearchPlace, \"h7iUasDP2zN5IEYxwgZotJbqeV4=\", false, function () {\n  return [useInput];\n});\n\n_c6 = SearchPlace;\nexport default SearchPlace;\n\nvar _c, _c2, _c3, _c4, _c5, _c6;\n\n$RefreshReg$(_c, \"ItemContainer\");\n$RefreshReg$(_c2, \"ListContainer\");\n$RefreshReg$(_c3, \"StyledForm\");\n$RefreshReg$(_c4, \"Container\");\n$RefreshReg$(_c5, \"PlaceItem\");\n$RefreshReg$(_c6, \"SearchPlace\");","map":{"version":3,"sources":["/Users/zknock/Develop/localhost_web/client/components/search/SearchPlace.tsx"],"names":["React","useEffect","useState","styled","Button","useInput","axios","Search","Input","ItemContainer","div","ListContainer","StyledForm","form","Container","PlaceItem","props","place","setPlace","onClose","name","formatted_address","SearchPlace","input","places","setPlaces","open","setOpen","onSearch","e","preventDefault","get","value","then","res","data","handleOpen","handleClose","document","addEventListener","target","classList","includes","length","map"],"mappings":"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","sourcesContent":["import React, { useEffect, useState } from 'react';\nimport { Place } from '../../interfaces';\nimport styled from 'styled-components';\nimport Button from '../reuse/Button';\nimport { useInput } from '../../hooks/useInput';\nimport axios from 'axios';\nimport { Search } from '@material-ui/icons';\nimport Input from '../reuse/Input';\n\ninterface Props {\n\tsetPlace: React.Dispatch<React.SetStateAction<Place>>;\n}\n\ninterface PlaceProps {\n\tplace: Place;\n\tsetPlace: React.Dispatch<React.SetStateAction<Place>>;\n\tonClose: Function;\n}\n\nconst ItemContainer = styled.div`\n\tpadding: 1rem;\n\t& h4,\n\tp {\n\t\tmargin: 0;\n\t}\n\t&:hover {\n\t\tcursor: pointer;\n\t\tbackground: #eee;\n\t}\n`;\n\nconst ListContainer = styled.div`\n\tmax-height: 16em;\n\toverflow-y: auto;\n\tposition: absolute;\n\twidth: 100%;\n\tbackground: rgba(255, 255, 255, 1);\n\tborder-radius: 0.5rem;\n\tbox-shadow: 2px 2px 8px rgba(0, 0, 0, 0.3);\n\n\ttransition: all 0.5s ease;\n\n\t& > div {\n\t\tanimation: transHeight 0.3s ease 0s;\n\t}\n\t@keyframes transHeight {\n\t\tfrom {\n\t\t\tmax-height: 0;\n\t\t}\n\t\tto {\n\t\t\tmax-height: 16em;\n\t\t}\n\t}\n`;\n\nconst StyledForm = styled.form`\n\twidth: 100%;\n\tdisplay: flex;\n\t& > input {\n\t\tflex: 1;\n\t}\n\t& > button {\n\t\tmargin: 0 0 0 0.5rem;\n\t}\n`;\n\nconst Container = styled.div`\n\twidth: 100%;\n\tposition: relative;\n\tz-index: 8;\n`;\n\nconst PlaceItem = (props: PlaceProps) => {\n\tconst { place, setPlace, onClose } = props;\n\n\treturn (\n\t\t<ItemContainer\n\t\t\tonClick={() => {\n\t\t\t\tsetPlace(place);\n\t\t\t\tonClose();\n\t\t\t}}\n\t\t\tclassName='placeItem'\n\t\t>\n\t\t\t<h4 className='placeItem'>{place.name}</h4>\n\t\t\t<p className='placeItem'>{place.formatted_address}</p>\n\t\t</ItemContainer>\n\t);\n};\n\nconst SearchPlace = (props: Props) => {\n\tconst input = useInput('');\n\tconst { setPlace } = props;\n\tconst [places, setPlaces] = useState([]);\n\tconst [open, setOpen] = useState(false);\n\tconst onSearch = (e: React.FormEvent) => {\n\t\te.preventDefault();\n\t\taxios.get(`/api/map/searchPlaces?search=${input.value}`).then(res => {\n\t\t\tsetPlaces(res.data.places);\n\t\t\thandleOpen();\n\t\t});\n\t};\n\tconst handleOpen = () => {\n\t\tsetOpen(true);\n\t};\n\tconst handleClose = () => {\n\t\tsetOpen(false);\n\t};\n\n\tuseEffect(() => {\n\t\tdocument.addEventListener('click', (e: any) => {\n\t\t\tif (!e.target.classList.value.includes('placeItem')) {\n\t\t\t\thandleClose();\n\t\t\t}\n\t\t});\n\t}, []);\n\n\treturn (\n\t\t<Container id='searchPlaces'>\n\t\t\t<StyledForm\n\t\t\t\tonSubmit={onSearch}\n\t\t\t\tonClick={handleOpen}\n\t\t\t\tclassName='placeItem'\n\t\t\t>\n\t\t\t\t<Input\n\t\t\t\t\t{...input}\n\t\t\t\t\tplaceholder='주소를 검색해주세요'\n\t\t\t\t\tborder='1px solid rgba(0,0,0,0.42)'\n\t\t\t\t\tborderRadius='0.25rem'\n\t\t\t\t\ttextAlign='left'\n\t\t\t\t\tclassName='placeItem'\n\t\t\t\t/>\n\t\t\t\t<Button type='submit' padding='0.375rem 1rem' className='placeItem'>\n\t\t\t\t\t<Search />\n\t\t\t\t</Button>\n\t\t\t</StyledForm>\n\t\t\t<ListContainer id='placesList' onBlur={handleClose}>\n\t\t\t\t{places.length > 0 && open ? (\n\t\t\t\t\t<div>\n\t\t\t\t\t\t{places.map(place => (\n\t\t\t\t\t\t\t<PlaceItem\n\t\t\t\t\t\t\t\tplace={place}\n\t\t\t\t\t\t\t\tsetPlace={setPlace}\n\t\t\t\t\t\t\t\tonClose={handleClose}\n\t\t\t\t\t\t\t\tkey={place.name}\n\t\t\t\t\t\t\t/>\n\t\t\t\t\t\t))}\n\t\t\t\t\t</div>\n\t\t\t\t) : (\n\t\t\t\t\t''\n\t\t\t\t)}\n\t\t\t</ListContainer>\n\t\t</Container>\n\t);\n};\n\nexport default SearchPlace;\n"]},"metadata":{},"sourceType":"module"}