{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/zknock/Develop/localhost_web/client/components/user/FollowButton.tsx\";\nimport axios from 'axios';\nimport React, { useState, useContext, useEffect } from 'react';\nimport styled from 'styled-components';\nimport SERVER from '../../utils/url';\nimport { Button } from '@material-ui/core';\nimport { UserStateContext } from '../../context/user';\nconst Btn = styled(Button).withConfig({\n  displayName: \"FollowButton__Btn\",\n  componentId: \"sc-2sj4co-0\"\n})([\"font-size:0.75em !important;background-color:\", \" !important;color:\", \" !important;border:none;width:8em;box-shadow:none !important;&:active{background-color:\", \";box-shadow:0px 2px 3px -2px rgba(0,0,0,0.2),0px 5px 8px 0px rgba(0,0,0,0.14),0px 3px 12px 2px rgba(0,0,0,0.12) !important;}&:hover{background-color:\", \" !important;}\"], props => props.isFollowed ? '#c5c7c9' : '#5197D5', props => props.isFollowed ? 'rgba(0,0,0,0.87)' : 'white', props => props.isFollowed ? '#a5a7a9' : '#4187C5', props => props.isFollowed ? '#a5a7a9' : '#4187C5');\n\nconst FollowButton = props => {\n  const {\n    userId,\n    initialFollowed\n  } = props;\n  const currentUser = useContext(UserStateContext);\n  const {\n    0: followState,\n    1: setFollowState\n  } = useState(initialFollowed || false);\n  useEffect(() => {\n    axios.post(`${SERVER}/api/user/follow_check`, {\n      userId: userId,\n      followerId: currentUser.id\n    }).then(res => setFollowState(res.data.isFollowed));\n  }, [followState]);\n\n  const onClick = async e => {\n    try {\n      const res = await axios.post(`${SERVER}/api/user/follow`, {\n        userId,\n        followerId: currentUser.id\n      });\n      if (res.data.success) setFollowState(!followState);\n    } catch (err) {\n      return console.log(err);\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(Btn, {\n    isFollowed: followState,\n    onClick: onClick,\n    variant: \"contained\",\n    children: followState ? 'Followed' : 'Follow'\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 3\n  }, this);\n};\n\nexport default FollowButton;","map":{"version":3,"sources":["/Users/zknock/Develop/localhost_web/client/components/user/FollowButton.tsx"],"names":["axios","React","useState","useContext","useEffect","styled","SERVER","Button","UserStateContext","Btn","props","isFollowed","FollowButton","userId","initialFollowed","currentUser","followState","setFollowState","post","followerId","id","then","res","data","onClick","e","success","err","console","log"],"mappings":";;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,SAASC,gBAAT,QAAiC,oBAAjC;AAOA,MAAMC,GAAG,GAAGJ,MAAM,CAACE,MAAD,CAAT;AAAA;AAAA;AAAA,iVAEYG,KAAK,IACxBA,KAAK,CAACC,UAAN,GAAmB,SAAnB,GAA+B,SAHxB,EAICD,KAAK,IACbA,KAAK,CAACC,UAAN,GAAmB,kBAAnB,GAAwC,OALjC,EAUaD,KAAK,IAAKA,KAAK,CAACC,UAAN,GAAmB,SAAnB,GAA+B,SAVtD,EAeaD,KAAK,IACxBA,KAAK,CAACC,UAAN,GAAmB,SAAnB,GAA+B,SAhBzB,CAAT;;AAoBA,MAAMC,YAAY,GAAIF,KAAD,IAAkB;AACtC,QAAM;AAAEG,IAAAA,MAAF;AAAUC,IAAAA;AAAV,MAA8BJ,KAApC;AACA,QAAMK,WAAW,GAAGZ,UAAU,CAACK,gBAAD,CAA9B;AACA,QAAM;AAAA,OAACQ,WAAD;AAAA,OAAcC;AAAd,MAAgCf,QAAQ,CAACY,eAAe,IAAI,KAApB,CAA9C;AACAV,EAAAA,SAAS,CAAC,MAAM;AACfJ,IAAAA,KAAK,CACHkB,IADF,CACQ,GAAEZ,MAAO,wBADjB,EAC0C;AACxCO,MAAAA,MAAM,EAAEA,MADgC;AAExCM,MAAAA,UAAU,EAAEJ,WAAW,CAACK;AAFgB,KAD1C,EAKEC,IALF,CAKOC,GAAG,IAAIL,cAAc,CAACK,GAAG,CAACC,IAAJ,CAASZ,UAAV,CAL5B;AAMA,GAPQ,EAON,CAACK,WAAD,CAPM,CAAT;;AASA,QAAMQ,OAAO,GAAG,MAAOC,CAAP,IAA+B;AAC9C,QAAI;AACH,YAAMH,GAAG,GAAG,MAAMtB,KAAK,CAACkB,IAAN,CAAY,GAAEZ,MAAO,kBAArB,EAAwC;AACzDO,QAAAA,MADyD;AAEzDM,QAAAA,UAAU,EAAEJ,WAAW,CAACK;AAFiC,OAAxC,CAAlB;AAIA,UAAIE,GAAG,CAACC,IAAJ,CAASG,OAAb,EAAsBT,cAAc,CAAC,CAACD,WAAF,CAAd;AACtB,KAND,CAME,OAAOW,GAAP,EAAY;AACb,aAAOC,OAAO,CAACC,GAAR,CAAYF,GAAZ,CAAP;AACA;AACD,GAVD;;AAYA,sBACC,QAAC,GAAD;AAAK,IAAA,UAAU,EAAEX,WAAjB;AAA8B,IAAA,OAAO,EAAEQ,OAAvC;AAAgD,IAAA,OAAO,EAAC,WAAxD;AAAA,cACER,WAAW,GAAG,UAAH,GAAgB;AAD7B;AAAA;AAAA;AAAA;AAAA,UADD;AAKA,CA9BD;;AAgCA,eAAeJ,YAAf","sourcesContent":["import axios from 'axios';\nimport React, { useState, useContext, useEffect } from 'react';\nimport styled from 'styled-components';\nimport SERVER from '../../utils/url';\nimport { Button } from '@material-ui/core';\nimport { UserStateContext } from '../../context/user';\n\ninterface Props {\n\tuserId: number;\n\tinitialFollowed?: boolean;\n}\n\nconst Btn = styled(Button)<{ isFollowed? }>`\n\tfont-size: 0.75em !important;\n\tbackground-color: ${props =>\n\t\tprops.isFollowed ? '#c5c7c9' : '#5197D5'} !important;\n\tcolor: ${props =>\n\t\tprops.isFollowed ? 'rgba(0,0,0,0.87)' : 'white'} !important;\n\tborder: none;\n\twidth: 8em;\n\tbox-shadow: none !important;\n\t&:active {\n\t\tbackground-color: ${props => (props.isFollowed ? '#a5a7a9' : '#4187C5')};\n\t\tbox-shadow: 0px 2px 3px -2px rgba(0, 0, 0, 0.2),\n\t\t\t0px 5px 8px 0px rgba(0, 0, 0, 0.14), 0px 3px 12px 2px rgba(0, 0, 0, 0.12) !important;\n\t}\n\t&:hover {\n\t\tbackground-color: ${props =>\n\t\t\tprops.isFollowed ? '#a5a7a9' : '#4187C5'} !important;\n\t}\n`;\n\nconst FollowButton = (props: Props) => {\n\tconst { userId, initialFollowed } = props;\n\tconst currentUser = useContext(UserStateContext);\n\tconst [followState, setFollowState] = useState(initialFollowed || false);\n\tuseEffect(() => {\n\t\taxios\n\t\t\t.post(`${SERVER}/api/user/follow_check`, {\n\t\t\t\tuserId: userId,\n\t\t\t\tfollowerId: currentUser.id,\n\t\t\t})\n\t\t\t.then(res => setFollowState(res.data.isFollowed));\n\t}, [followState]);\n\n\tconst onClick = async (e: React.MouseEvent) => {\n\t\ttry {\n\t\t\tconst res = await axios.post(`${SERVER}/api/user/follow`, {\n\t\t\t\tuserId,\n\t\t\t\tfollowerId: currentUser.id,\n\t\t\t});\n\t\t\tif (res.data.success) setFollowState(!followState);\n\t\t} catch (err) {\n\t\t\treturn console.log(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Btn isFollowed={followState} onClick={onClick} variant='contained'>\n\t\t\t{followState ? 'Followed' : 'Follow'}\n\t\t</Btn>\n\t);\n};\n\nexport default FollowButton;\n"]},"metadata":{},"sourceType":"module"}