{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _regeneratorRuntime from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nvar _jsxFileName = \"/Users/zknock/Develop/localhost_web/client/components/user/FollowButton.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nimport axios from 'axios';\nimport React, { useState, useContext, useEffect } from 'react';\nimport styled from 'styled-components';\nimport SERVER from '../../utils/url';\nimport { Button } from '@material-ui/core';\nimport { UserStateContext } from '../../context/user';\nvar Btn = styled(Button).withConfig({\n  displayName: \"FollowButton__Btn\",\n  componentId: \"sc-2sj4co-0\"\n})([\"font-size:0.75em !important;background-color:\", \" !important;color:\", \" !important;border:none;width:8em;box-shadow:none !important;&:active{background-color:\", \";box-shadow:0px 2px 3px -2px rgba(0,0,0,0.2),0px 5px 8px 0px rgba(0,0,0,0.14),0px 3px 12px 2px rgba(0,0,0,0.12) !important;}&:hover{background-color:\", \" !important;}\"], function (props) {\n  return props.isFollowed ? '#c5c7c9' : '#5197D5';\n}, function (props) {\n  return props.isFollowed ? 'rgba(0,0,0,0.87)' : 'white';\n}, function (props) {\n  return props.isFollowed ? '#a5a7a9' : '#4187C5';\n}, function (props) {\n  return props.isFollowed ? '#a5a7a9' : '#4187C5';\n});\n_c = Btn;\n\nvar FollowButton = function FollowButton(props) {\n  _s();\n\n  var userId = props.userId,\n      initialFollowed = props.initialFollowed;\n  var currentUser = useContext(UserStateContext);\n\n  var _useState = useState(initialFollowed || false),\n      followState = _useState[0],\n      setFollowState = _useState[1];\n\n  useEffect(function () {\n    axios.post(\"\".concat(SERVER, \"/api/user/follow_check\"), {\n      userId: userId,\n      followerId: currentUser.id\n    }).then(function (res) {\n      return setFollowState(res.data.isFollowed);\n    });\n  }, [followState]);\n\n  var onClick = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              _context.prev = 0;\n              _context.next = 3;\n              return axios.post(\"\".concat(SERVER, \"/api/user/follow\"), {\n                userId: userId,\n                followerId: currentUser.id\n              });\n\n            case 3:\n              res = _context.sent;\n              if (res.data.success) setFollowState(!followState);\n              _context.next = 10;\n              break;\n\n            case 7:\n              _context.prev = 7;\n              _context.t0 = _context[\"catch\"](0);\n              return _context.abrupt(\"return\", console.log(_context.t0));\n\n            case 10:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[0, 7]]);\n    }));\n\n    return function onClick(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxDEV(Btn, {\n    isFollowed: followState,\n    onClick: onClick,\n    variant: \"contained\",\n    children: followState ? 'Followed' : 'Follow'\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 59,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(FollowButton, \"tbq6Uhkw7O6aEQjxFz6K3gQSiUU=\");\n\n_c2 = FollowButton;\nexport default FollowButton;\n\nvar _c, _c2;\n\n$RefreshReg$(_c, \"Btn\");\n$RefreshReg$(_c2, \"FollowButton\");","map":{"version":3,"sources":["/Users/zknock/Develop/localhost_web/client/components/user/FollowButton.tsx"],"names":["axios","React","useState","useContext","useEffect","styled","SERVER","Button","UserStateContext","Btn","props","isFollowed","FollowButton","userId","initialFollowed","currentUser","followState","setFollowState","post","followerId","id","then","res","data","onClick","e","success","console","log"],"mappings":";;;;;;;;AAAA,OAAOA,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,QAAhB,EAA0BC,UAA1B,EAAsCC,SAAtC,QAAuD,OAAvD;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,OAAOC,MAAP,MAAmB,iBAAnB;AACA,SAASC,MAAT,QAAuB,mBAAvB;AACA,SAASC,gBAAT,QAAiC,oBAAjC;AAOA,IAAMC,GAAG,GAAGJ,MAAM,CAACE,MAAD,CAAT;AAAA;AAAA;AAAA,iVAEY,UAAAG,KAAK;AAAA,SACxBA,KAAK,CAACC,UAAN,GAAmB,SAAnB,GAA+B,SADP;AAAA,CAFjB,EAIC,UAAAD,KAAK;AAAA,SACbA,KAAK,CAACC,UAAN,GAAmB,kBAAnB,GAAwC,OAD3B;AAAA,CAJN,EAUa,UAAAD,KAAK;AAAA,SAAKA,KAAK,CAACC,UAAN,GAAmB,SAAnB,GAA+B,SAApC;AAAA,CAVlB,EAea,UAAAD,KAAK;AAAA,SACxBA,KAAK,CAACC,UAAN,GAAmB,SAAnB,GAA+B,SADP;AAAA,CAflB,CAAT;KAAMF,G;;AAoBN,IAAMG,YAAY,GAAG,SAAfA,YAAe,CAACF,KAAD,EAAkB;AAAA;;AAAA,MAC9BG,MAD8B,GACFH,KADE,CAC9BG,MAD8B;AAAA,MACtBC,eADsB,GACFJ,KADE,CACtBI,eADsB;AAEtC,MAAMC,WAAW,GAAGZ,UAAU,CAACK,gBAAD,CAA9B;;AAFsC,kBAGAN,QAAQ,CAACY,eAAe,IAAI,KAApB,CAHR;AAAA,MAG/BE,WAH+B;AAAA,MAGlBC,cAHkB;;AAItCb,EAAAA,SAAS,CAAC,YAAM;AACfJ,IAAAA,KAAK,CACHkB,IADF,WACUZ,MADV,6BAC0C;AACxCO,MAAAA,MAAM,EAAEA,MADgC;AAExCM,MAAAA,UAAU,EAAEJ,WAAW,CAACK;AAFgB,KAD1C,EAKEC,IALF,CAKO,UAAAC,GAAG;AAAA,aAAIL,cAAc,CAACK,GAAG,CAACC,IAAJ,CAASZ,UAAV,CAAlB;AAAA,KALV;AAMA,GAPQ,EAON,CAACK,WAAD,CAPM,CAAT;;AASA,MAAMQ,OAAO;AAAA,wEAAG,iBAAOC,CAAP;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,qBAEIzB,KAAK,CAACkB,IAAN,WAAcZ,MAAd,uBAAwC;AACzDO,gBAAAA,MAAM,EAANA,MADyD;AAEzDM,gBAAAA,UAAU,EAAEJ,WAAW,CAACK;AAFiC,eAAxC,CAFJ;;AAAA;AAERE,cAAAA,GAFQ;AAMd,kBAAIA,GAAG,CAACC,IAAJ,CAASG,OAAb,EAAsBT,cAAc,CAAC,CAACD,WAAF,CAAd;AANR;AAAA;;AAAA;AAAA;AAAA;AAAA,+CAQPW,OAAO,CAACC,GAAR,aARO;;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,KAAH;;AAAA,oBAAPJ,OAAO;AAAA;AAAA;AAAA,KAAb;;AAYA,sBACC,QAAC,GAAD;AAAK,IAAA,UAAU,EAAER,WAAjB;AAA8B,IAAA,OAAO,EAAEQ,OAAvC;AAAgD,IAAA,OAAO,EAAC,WAAxD;AAAA,cACER,WAAW,GAAG,UAAH,GAAgB;AAD7B;AAAA;AAAA;AAAA;AAAA,WADD;AAKA,CA9BD;;GAAMJ,Y;;MAAAA,Y;AAgCN,eAAeA,YAAf","sourcesContent":["import axios from 'axios';\nimport React, { useState, useContext, useEffect } from 'react';\nimport styled from 'styled-components';\nimport SERVER from '../../utils/url';\nimport { Button } from '@material-ui/core';\nimport { UserStateContext } from '../../context/user';\n\ninterface Props {\n\tuserId: number;\n\tinitialFollowed?: boolean;\n}\n\nconst Btn = styled(Button)<{ isFollowed? }>`\n\tfont-size: 0.75em !important;\n\tbackground-color: ${props =>\n\t\tprops.isFollowed ? '#c5c7c9' : '#5197D5'} !important;\n\tcolor: ${props =>\n\t\tprops.isFollowed ? 'rgba(0,0,0,0.87)' : 'white'} !important;\n\tborder: none;\n\twidth: 8em;\n\tbox-shadow: none !important;\n\t&:active {\n\t\tbackground-color: ${props => (props.isFollowed ? '#a5a7a9' : '#4187C5')};\n\t\tbox-shadow: 0px 2px 3px -2px rgba(0, 0, 0, 0.2),\n\t\t\t0px 5px 8px 0px rgba(0, 0, 0, 0.14), 0px 3px 12px 2px rgba(0, 0, 0, 0.12) !important;\n\t}\n\t&:hover {\n\t\tbackground-color: ${props =>\n\t\t\tprops.isFollowed ? '#a5a7a9' : '#4187C5'} !important;\n\t}\n`;\n\nconst FollowButton = (props: Props) => {\n\tconst { userId, initialFollowed } = props;\n\tconst currentUser = useContext(UserStateContext);\n\tconst [followState, setFollowState] = useState(initialFollowed || false);\n\tuseEffect(() => {\n\t\taxios\n\t\t\t.post(`${SERVER}/api/user/follow_check`, {\n\t\t\t\tuserId: userId,\n\t\t\t\tfollowerId: currentUser.id,\n\t\t\t})\n\t\t\t.then(res => setFollowState(res.data.isFollowed));\n\t}, [followState]);\n\n\tconst onClick = async (e: React.MouseEvent) => {\n\t\ttry {\n\t\t\tconst res = await axios.post(`${SERVER}/api/user/follow`, {\n\t\t\t\tuserId,\n\t\t\t\tfollowerId: currentUser.id,\n\t\t\t});\n\t\t\tif (res.data.success) setFollowState(!followState);\n\t\t} catch (err) {\n\t\t\treturn console.log(err);\n\t\t}\n\t};\n\n\treturn (\n\t\t<Btn isFollowed={followState} onClick={onClick} variant='contained'>\n\t\t\t{followState ? 'Followed' : 'Follow'}\n\t\t</Btn>\n\t);\n};\n\nexport default FollowButton;\n"]},"metadata":{},"sourceType":"module"}