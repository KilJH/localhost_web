{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport _defineProperty from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport Button from '@material-ui/core/Button';\nimport Dialog from '@material-ui/core/Dialog';\nimport DialogActions from '@material-ui/core/DialogActions';\nimport DialogContent from '@material-ui/core/DialogContent';\nimport DialogTitle from '@material-ui/core/DialogTitle';\nimport FormControl from '@material-ui/core/FormControl';\nimport FormControlLabel from '@material-ui/core/FormControlLabel';\nimport SelectInput from '@material-ui/core/Input';\nimport InputLabel from '@material-ui/core/InputLabel';\nimport MenuItem from '@material-ui/core/MenuItem';\nimport Select from '@material-ui/core/Select';\nimport Switch from '@material-ui/core/Switch';\nimport React, { useEffect, useState } from 'react';\nimport styled from 'styled-components';\nimport { useInput } from '../../../hooks/useInput';\nimport TextField from '@material-ui/core/TextField';\nimport Input from '../../reuse/Input';\nimport SearchPlace from '../../search/SearchPlace';\nimport Fade from '@material-ui/core/Fade';\nimport Modal from '@material-ui/core/Modal';\nimport ReuseButton from '../../reuse/Button';\nimport axios from 'axios';\nimport SERVER from '../../../utils/url';\nvar ComponentDiv = styled.div.withConfig({\n  displayName: \"HostInfoChange__ComponentDiv\",\n  componentId: \"sc-1g5ihch-0\"\n})([\"& > h3{margin:0 auto 2em auto;}\"]);\nvar Label = styled.p.withConfig({\n  displayName: \"HostInfoChange__Label\",\n  componentId: \"sc-1g5ihch-1\"\n})([\"margin:2em 0 1em 0;font-size:1em;\"]);\nvar ButtonLabel = styled(Button).withConfig({\n  displayName: \"HostInfoChange__ButtonLabel\",\n  componentId: \"sc-1g5ihch-2\"\n})([\"&.MuiButton-root{color:#5197d5;margin:0 1em 0 0;&:hover{color:rgb(33,33,33);}}\"]);\nvar SwitchForm = styled(FormControlLabel).withConfig({\n  displayName: \"HostInfoChange__SwitchForm\",\n  componentId: \"sc-1g5ihch-3\"\n})([\"display:inline;&.MuiFormControlLabel-labelPlacementStart{margin-left:0;}&.MuiFormControlLabel-root{margin-left:0.5em;}\"]);\nvar IsOn = styled(Switch).withConfig({\n  displayName: \"HostInfoChange__IsOn\",\n  componentId: \"sc-1g5ihch-4\"\n})([\"& .MuiSwitch-colorPrimary.Mui-checked{color:#5197d5;}& .MuiSwitch-colorPrimary.Mui-checked + .MuiSwitch-track{background-color:#5197d5;}\"]);\nvar DescriptionField = styled(TextField).withConfig({\n  displayName: \"HostInfoChange__DescriptionField\",\n  componentId: \"sc-1g5ihch-5\"\n})([\"&.MuiFormControl-root{width:100%;}& > div{font-size:0.9em;opacity:0.9;}\"]);\nvar StyledModal = styled(Modal).withConfig({\n  displayName: \"HostInfoChange__StyledModal\",\n  componentId: \"sc-1g5ihch-6\"\n})([\"display:flex;align-items:center;justify-content:center;& .searchForm{width:80vw;max-width:800px;background:rgba(255,255,255,0.9);padding:1rem;border-radius:0.25rem;outline:0;box-shadow:2px 2px 8px rgba(0,0,0,0.3),-2px -2px 8px rgba(0,0,0,0.3);}\"]);\nvar UpdateButton = styled(ReuseButton).withConfig({\n  displayName: \"HostInfoChange__UpdateButton\",\n  componentId: \"sc-1g5ihch-7\"\n})([\"margin:5em auto 2.5em auto;display:flex;\"]);\nvar DialogueTitle = styled(DialogTitle).withConfig({\n  displayName: \"HostInfoChange__DialogueTitle\",\n  componentId: \"sc-1g5ihch-8\"\n})([\"color:rgb(33,33,33);text-align:center;& .MuiTypography-h6{font-size:0.95em;font-weight:bold;}&.MuiDialogTitle-root{padding:2em 6em;}\"]);\nvar DialogueContent = styled(DialogContent).withConfig({\n  displayName: \"HostInfoChange__DialogueContent\",\n  componentId: \"sc-1g5ihch-9\"\n})([\"&.MuiDialogContent-root{margin:2em auto 4em auto;}\"]);\nvar LanguageControl = styled(FormControl).withConfig({\n  displayName: \"HostInfoChange__LanguageControl\",\n  componentId: \"sc-1g5ihch-10\"\n})([\"width:7em;&.MuiFormControl-root{margin:0 0.5em;}& .MuiFormLabel-root.Mui-focused{color:#5197d5;}& .MuiInput-underline:after{border-bottom:2px solid #5197d5;}& .MuiInput-underline:hover:not(.Mui-disabled):before{border-color:#5197d5;}\"]);\nvar PlaceInput = styled(Input).withConfig({\n  displayName: \"HostInfoChange__PlaceInput\",\n  componentId: \"sc-1g5ihch-11\"\n})([\"opacity:0.7;background:rgba(33,33,33,0.1);cursor:pointer;\"]);\nexport default function MyHosting(props) {\n  var host = props.host;\n\n  var _useState = useState(host.on),\n      isOn = _useState[0],\n      setIsOn = _useState[1];\n\n  var _useState2 = useState({\n    language1: host.languages[0] === null ? ' ' : host.languages[0],\n    language2: host.languages[1] === null ? ' ' : host.languages[1],\n    language3: host.languages[2] === null ? ' ' : host.languages[2]\n  }),\n      language = _useState2[0],\n      setLanguage = _useState2[1];\n\n  var description = useInput(host.description);\n\n  var _useState3 = useState(host.place),\n      place = _useState3[0],\n      setPlace = _useState3[1];\n\n  var _useState4 = useState(language),\n      languageSave = _useState4[0],\n      setLanguageSave = _useState4[1];\n\n  var _useState5 = useState(false),\n      languageOpen = _useState5[0],\n      setLanguageOpen = _useState5[1];\n\n  var _useState6 = useState(false),\n      placeOpen = _useState6[0],\n      setPlaceOpen = _useState6[1];\n\n  var languages = ['한국어', '일본어', '중국어', '영어', '프랑스어', '독일어', '스페인어', '포르투갈어', '힌디어'];\n\n  var handlelanguageOpen = function handlelanguageOpen() {\n    setLanguageOpen(true);\n  };\n\n  var handleLanguageClose = function handleLanguageClose() {\n    setLanguageSave(language);\n    setLanguageOpen(false);\n  };\n\n  var handleLanguageCancle = function handleLanguageCancle() {\n    setLanguage(languageSave);\n    setLanguageOpen(false);\n  };\n\n  var handlePlaceOpen = function handlePlaceOpen() {\n    setPlaceOpen(true);\n  };\n\n  var handlePlaceClose = function handlePlaceClose() {\n    setPlaceOpen(false);\n  };\n\n  var language1HandleChange = function language1HandleChange(event) {\n    if (event.target.value === ' ') {\n      if (event.target.value === ' ' && language.language2 === ' ' && language.language3 === ' ') alert('최소 언어 하나를 선택해주시기 바랍니다.');else {\n        setLanguage({\n          language1: event.target.value,\n          language2: language.language2,\n          language3: language.language3\n        });\n      }\n    } else if (event.target.value === language.language2 || event.target.value === language.language3) alert('중복된 언어를 선택하셨습니다.');else {\n      setLanguage({\n        language1: event.target.value,\n        language2: language.language2,\n        language3: language.language3\n      });\n    }\n  };\n\n  var language2HandleChange = function language2HandleChange(event) {\n    if (event.target.value === ' ') {\n      if (event.target.value === ' ' && language.language1 === ' ' && language.language3 === ' ') alert('최소 언어 하나를 선택해주시기 바랍니다.');else {\n        setLanguage({\n          language1: language.language1,\n          language2: event.target.value,\n          language3: language.language3\n        });\n      }\n    } else if (event.target.value === language.language1 || event.target.value === language.language3) alert('중복된 언어를 선택하셨습니다.');else {\n      setLanguage({\n        language1: language.language1,\n        language2: event.target.value,\n        language3: language.language3\n      });\n    }\n  };\n\n  var language3HandleChange = function language3HandleChange(event) {\n    if (event.target.value === ' ') {\n      if (event.target.value === ' ' && language.language1 === ' ' && language.language2 === ' ') alert('최소 언어 하나를 선택해주시기 바랍니다.');else {\n        setLanguage({\n          language1: language.language1,\n          language2: language.language2,\n          language3: event.target.value\n        });\n      }\n    } else if (event.target.value === language.language1 || event.target.value === language.language2) alert('중복된 언어를 선택하셨습니다.');else {\n      setLanguage({\n        language1: language.language1,\n        language2: language.language2,\n        language3: event.target.value\n      });\n    }\n  };\n\n  var isOnHandleChange = function isOnHandleChange(e) {\n    e.preventDefault();\n    setIsOn(!isOn);\n  };\n\n  useEffect(function () {\n    axios.post(\"\".concat(SERVER, \"/api/host/status\"), {\n      id: host.id,\n      on: isOn ? 1 : 0\n    })[\"catch\"](function (err) {\n      return console.log(err);\n    });\n  }, [isOn]);\n\n  var onSubmitHandler = /*#__PURE__*/function () {\n    var _ref = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(e) {\n      var res;\n      return _regeneratorRuntime.wrap(function _callee$(_context) {\n        while (1) {\n          switch (_context.prev = _context.next) {\n            case 0:\n              e.preventDefault();\n              _context.prev = 1;\n              _context.next = 4;\n              return axios.post(\"\".concat(SERVER, \"/api/host/update\"), {\n                id: host.id,\n                language1: language.language1 === ' ' ? null : language.language1,\n                language2: language.language2 === ' ' ? null : language.language2,\n                language3: language.language3 === ' ' ? null : language.language3,\n                description: description.value,\n                latitude: place.geometry.location.lat,\n                longitude: place.geometry.location.lng,\n                address: place.formatted_address\n              });\n\n            case 4:\n              res = _context.sent;\n\n              if (res.data.success) {\n                alert('호스트 정보 수정이 완료되었습니다!');\n                window.location.replace('/hosts/myhosting'); // 새로고침\n              }\n\n              _context.next = 11;\n              break;\n\n            case 8:\n              _context.prev = 8;\n              _context.t0 = _context[\"catch\"](1);\n              return _context.abrupt(\"return\", console.log(_context.t0));\n\n            case 11:\n            case \"end\":\n              return _context.stop();\n          }\n        }\n      }, _callee, null, [[1, 8]]);\n    }));\n\n    return function onSubmitHandler(_x) {\n      return _ref.apply(this, arguments);\n    };\n  }();\n\n  return /*#__PURE__*/_jsxs(ComponentDiv, {\n    children: [/*#__PURE__*/_jsx(\"h3\", {\n      children: \"\\uB098\\uC758 \\uD638\\uC2A4\\uD2B8 \\uC815\\uBCF4\"\n    }), /*#__PURE__*/_jsx(Label, {\n      style: {\n        display: 'inline'\n      },\n      children: \"\\uD638\\uC2A4\\uD2B8 \\uD65C\\uC131\"\n    }), /*#__PURE__*/_jsx(SwitchForm, {\n      control: /*#__PURE__*/_jsx(IsOn, {\n        checked: isOn,\n        onChange: isOnHandleChange,\n        color: \"primary\"\n      }),\n      label: \"\"\n    }), /*#__PURE__*/_jsx(Label, {\n      children: \"\\uC790\\uAE30\\uC18C\\uAC1C \\uC218\\uC815\"\n    }), /*#__PURE__*/_jsx(DescriptionField, _objectSpread(_objectSpread({}, description), {}, {\n      rows: 8,\n      variant: \"outlined\",\n      multiline: true\n    })), /*#__PURE__*/_jsx(Label, {\n      children: \"\\uC0AC\\uC6A9 \\uAC00\\uB2A5\\uD55C \\uC5B8\\uC5B4 \\uC124\\uC815\"\n    }), /*#__PURE__*/_jsx(ButtonLabel, {\n      onClick: handlelanguageOpen,\n      children: \"\\uC5B8\\uC5B4 \\uC120\\uD0DD\"\n    }), /*#__PURE__*/_jsxs(Dialog, {\n      disableBackdropClick: true,\n      disableEscapeKeyDown: true,\n      open: languageOpen,\n      onClose: handleLanguageClose,\n      children: [/*#__PURE__*/_jsx(DialogueTitle, {\n        children: \"\\uC0AC\\uC6A9 \\uAC00\\uB2A5\\uD55C \\uC5B8\\uC5B4\\uB97C \\uC120\\uD0DD\\uD574\\uC8FC\\uC138\\uC694\"\n      }), /*#__PURE__*/_jsx(DialogueContent, {\n        children: /*#__PURE__*/_jsxs(\"form\", {\n          children: [/*#__PURE__*/_jsxs(LanguageControl, {\n            children: [/*#__PURE__*/_jsx(InputLabel, {\n              children: \"\\uC5B8\\uC5B41\"\n            }), /*#__PURE__*/_jsxs(Select, {\n              value: language.language1,\n              onChange: language1HandleChange,\n              input: /*#__PURE__*/_jsx(SelectInput, {}),\n              children: [/*#__PURE__*/_jsx(MenuItem, {\n                value: \" \",\n                children: /*#__PURE__*/_jsx(\"em\", {\n                  children: \"\\uC120\\uD0DD\\uC548\\uD568\"\n                })\n              }), languages.map(function (value) {\n                return /*#__PURE__*/_jsx(MenuItem, {\n                  value: value,\n                  children: value\n                });\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(LanguageControl, {\n            children: [/*#__PURE__*/_jsx(InputLabel, {\n              children: \"\\uC5B8\\uC5B42\"\n            }), /*#__PURE__*/_jsxs(Select, {\n              value: language.language2,\n              onChange: language2HandleChange,\n              input: /*#__PURE__*/_jsx(SelectInput, {}),\n              children: [/*#__PURE__*/_jsx(MenuItem, {\n                value: \" \",\n                children: /*#__PURE__*/_jsx(\"em\", {\n                  children: \"\\uC120\\uD0DD\\uC548\\uD568\"\n                })\n              }), languages.map(function (value) {\n                return /*#__PURE__*/_jsx(MenuItem, {\n                  value: value,\n                  children: value\n                });\n              })]\n            })]\n          }), /*#__PURE__*/_jsxs(LanguageControl, {\n            children: [/*#__PURE__*/_jsx(InputLabel, {\n              children: \"\\uC5B8\\uC5B43\"\n            }), /*#__PURE__*/_jsxs(Select, {\n              value: language.language3,\n              onChange: language3HandleChange,\n              input: /*#__PURE__*/_jsx(SelectInput, {}),\n              children: [/*#__PURE__*/_jsx(MenuItem, {\n                value: \" \",\n                children: /*#__PURE__*/_jsx(\"em\", {\n                  children: \"\\uC120\\uD0DD\\uC548\\uD568\"\n                })\n              }), languages.map(function (value) {\n                return /*#__PURE__*/_jsx(MenuItem, {\n                  value: value,\n                  children: value\n                });\n              })]\n            })]\n          })]\n        })\n      }), /*#__PURE__*/_jsxs(DialogActions, {\n        children: [/*#__PURE__*/_jsx(Button, {\n          onClick: handleLanguageCancle,\n          color: \"secondary\",\n          children: \"\\uCDE8\\uC18C\"\n        }), /*#__PURE__*/_jsx(Button, {\n          onClick: handleLanguageClose,\n          color: \"primary\",\n          children: \"\\uC218\\uC815\"\n        })]\n      })]\n    }), /*#__PURE__*/_jsx(Label, {\n      children: \"\\uD65C\\uB3D9\\uC9C0\\uC5ED \\uC218\\uC815\"\n    }), /*#__PURE__*/_jsx(PlaceInput, {\n      type: \"address\",\n      width: \"100%\",\n      borderRadius: \"0.25rem\",\n      border: \"1px solid rgba(0,0,0,0.41)\",\n      textAlign: \"left\",\n      value: place.formatted_address,\n      onClick: handlePlaceOpen,\n      onChange: handlePlaceOpen,\n      readOnly: true\n    }), /*#__PURE__*/_jsx(StyledModal, {\n      open: placeOpen,\n      onClose: handlePlaceClose,\n      children: /*#__PURE__*/_jsx(Fade, {\n        \"in\": placeOpen,\n        children: /*#__PURE__*/_jsx(\"div\", {\n          className: \"searchForm\",\n          children: /*#__PURE__*/_jsx(SearchPlace, {\n            setPlace: setPlace\n          })\n        })\n      })\n    }), /*#__PURE__*/_jsx(UpdateButton, {\n      type: \"button\",\n      onClick: onSubmitHandler,\n      children: \"\\uC815\\uBCF4\\uC218\\uC815\"\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}