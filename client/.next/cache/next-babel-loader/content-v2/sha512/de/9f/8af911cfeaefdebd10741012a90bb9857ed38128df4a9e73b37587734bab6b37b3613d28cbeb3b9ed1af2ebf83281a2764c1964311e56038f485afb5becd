{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport React, { useState } from 'react';\nimport styled from 'styled-components';\nimport Button from '@material-ui/core/Button';\nimport ArrowDropDownIcon from '@material-ui/icons/ArrowDropDown';\nimport ArrowDropUpIcon from '@material-ui/icons/ArrowDropUp';\nimport Router from 'next/router';\nimport { IconButton } from '@material-ui/core';\nimport SERVER from '../../../utils/url';\nimport axios from 'axios';\nimport PlanItem from './PlanItem';\nconst UserTable = styled.table.withConfig({\n  displayName: \"PlanList__UserTable\",\n  componentId: \"o7r8ym-0\"\n})([\"width:100%;min-width:32em;margin:0 auto;text-align:center;border-collapse:collapse;& th{font-size:1em;}& thead{border-bottom:1px solid #5197d5;}& tr{border-bottom:1px solid #aaa;}\"]);\nconst DeleteButton = styled(Button).withConfig({\n  displayName: \"PlanList__DeleteButton\",\n  componentId: \"o7r8ym-1\"\n})([\"&.MuiButton-root{float:right;display:block;margin:4em 0 2em 0;width:9em;}&.MuiButton-containedSecondary{background-color:#e74c3c;}\"]);\nconst CheckTh = styled.th.withConfig({\n  displayName: \"PlanList__CheckTh\",\n  componentId: \"o7r8ym-2\"\n})([\"width:1em;padding-bottom:0.25em;\"]);\nconst CssTh = styled.th.withConfig({\n  displayName: \"PlanList__CssTh\",\n  componentId: \"o7r8ym-3\"\n})([\"padding-left:1em;&.nickname{width:25%;}&.createTime{width:20%;}\"]);\nconst CssIconButton = styled(IconButton).withConfig({\n  displayName: \"PlanList__CssIconButton\",\n  componentId: \"o7r8ym-4\"\n})([\"&.MuiIconButton-root{padding:0;}\"]);\n\nconst DeleteCheckedItems = state => {\n  // 플랜 삭제 기능\n  const keys = Object.keys(state);\n  const values = Object.values(state);\n\n  for (let i = 0; i < values.length; i++) {\n    if (values[i] === true) {\n      axios.post(`${SERVER}/api/plan/delete`, {\n        id: keys[i]\n      }).then(res => {\n        if (res.data.success) {\n          alert('플랜이 삭제되었습니다.');\n          Router.push('/admin/plan');\n        }\n      });\n    }\n  }\n};\n\nexport default function PlanList(props) {\n  const {\n    items\n  } = props;\n  const {\n    0: state,\n    1: setState\n  } = useState({});\n  const {\n    0: titleState,\n    1: setTitleState\n  } = useState(false);\n  const {\n    0: timeState,\n    1: setTimeState\n  } = useState(false);\n  const {\n    0: nicknameState,\n    1: setNicknameState\n  } = useState(false);\n\n  const handleChange = event => {\n    const {\n      id,\n      checked\n    } = event.target;\n    setState(_objectSpread(_objectSpread({}, state), {}, {\n      [id]: checked\n    }));\n  };\n\n  const ButtonHandler = e => {\n    e.preventDefault();\n    DeleteCheckedItems(state);\n  };\n\n  const timeSortHandler = () => {\n    setTitleState(false);\n    setNicknameState(false);\n    setTimeState(!timeState);\n\n    if (timeState) {\n      items.sort(function (a, b) {\n        return a.createTime < b.createTime ? -1 : a.createTime > b.createTime ? 1 : 0;\n      });\n    } else {\n      items.sort(function (a, b) {\n        return a.createTime > b.createTime ? -1 : a.createTime < b.createTime ? 1 : 0;\n      });\n    }\n  };\n\n  const nicknameSortHandler = () => {\n    setTimeState(false);\n    setTitleState(false);\n    setNicknameState(!nicknameState);\n\n    if (nicknameState) {\n      items.sort(function (a, b) {\n        return a.author.nickname < b.author.nickname ? -1 : a.author.nickname > b.author.nickname ? 1 : 0;\n      });\n    } else {\n      items.sort(function (a, b) {\n        return a.author.nickname > b.author.nickname ? -1 : a.author.nickname < b.author.nickname ? 1 : 0;\n      });\n    }\n  };\n\n  const titleSortHandler = () => {\n    setTimeState(false);\n    setNicknameState(false);\n    setTitleState(!titleState);\n\n    if (titleState) {\n      items.sort(function (a, b) {\n        return a.title < b.title ? -1 : a.title > b.title ? 1 : 0;\n      });\n    } else {\n      items.sort(function (a, b) {\n        return a.title > b.title ? -1 : a.title < b.title ? 1 : 0;\n      });\n    }\n  };\n\n  return /*#__PURE__*/_jsxs(\"div\", {\n    children: [/*#__PURE__*/_jsxs(UserTable, {\n      children: [/*#__PURE__*/_jsx(\"thead\", {\n        children: /*#__PURE__*/_jsxs(\"tr\", {\n          children: [/*#__PURE__*/_jsx(CheckTh, {\n            children: \"\\uC120\\uD0DD\"\n          }), /*#__PURE__*/_jsxs(CssTh, {\n            className: \"title\",\n            children: [\"\\uC81C\\uBAA9\", /*#__PURE__*/_jsx(CssIconButton, {\n              onClick: titleSortHandler,\n              children: titleState ? /*#__PURE__*/_jsx(ArrowDropUpIcon, {}) : /*#__PURE__*/_jsx(ArrowDropDownIcon, {})\n            })]\n          }), /*#__PURE__*/_jsxs(CssTh, {\n            className: \"nickname\",\n            children: [\"\\uD50C\\uB798\\uB108\", /*#__PURE__*/_jsx(CssIconButton, {\n              onClick: nicknameSortHandler,\n              children: nicknameState ? /*#__PURE__*/_jsx(ArrowDropUpIcon, {}) : /*#__PURE__*/_jsx(ArrowDropDownIcon, {})\n            })]\n          }), /*#__PURE__*/_jsxs(CssTh, {\n            className: \"createTime\",\n            children: [\"\\uB4F1\\uB85D\\uC77C\\uC790\", /*#__PURE__*/_jsx(CssIconButton, {\n              onClick: timeSortHandler,\n              children: timeState ? /*#__PURE__*/_jsx(ArrowDropUpIcon, {}) : /*#__PURE__*/_jsx(ArrowDropDownIcon, {})\n            })]\n          })]\n        })\n      }), /*#__PURE__*/_jsx(\"tbody\", {\n        children: items.map((item, i) => /*#__PURE__*/_jsx(PlanItem, {\n          item: item,\n          state: state[i],\n          handleChange: handleChange\n        }, item.id))\n      })]\n    }), /*#__PURE__*/_jsx(DeleteButton, {\n      type: \"submit\",\n      onClick: ButtonHandler,\n      variant: \"contained\",\n      color: \"secondary\",\n      children: \"\\uD50C\\uB79C \\uC0AD\\uC81C\"\n    })]\n  });\n}","map":null,"metadata":{},"sourceType":"module"}