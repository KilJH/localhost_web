{"ast":null,"code":"import { jsxs as _jsxs } from \"react/jsx-runtime\";\nimport { jsx as _jsx } from \"react/jsx-runtime\";\nimport _regeneratorRuntime from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/regenerator\";\nimport _asyncToGenerator from \"/Users/zknock/Develop/localhost_web/node_modules/next/node_modules/@babel/runtime/helpers/esm/asyncToGenerator\";\nimport { CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\nimport React, { useContext } from 'react';\nimport { useAsync } from 'react-async';\nimport styled from 'styled-components';\nimport { UserStateContext } from '../../../context/user';\nimport SERVER from '../../../utils/url';\nimport UserPhoto from '../../user/UserPhoto';\n\nvar getRoomList = /*#__PURE__*/function () {\n  var _ref2 = _asyncToGenerator( /*#__PURE__*/_regeneratorRuntime.mark(function _callee(_ref) {\n    var userId, res;\n    return _regeneratorRuntime.wrap(function _callee$(_context) {\n      while (1) {\n        switch (_context.prev = _context.next) {\n          case 0:\n            userId = _ref.userId;\n            _context.next = 3;\n            return axios.post(\"\".concat(SERVER, \"/api/message/room/list\"), {\n              userId: userId\n            });\n\n          case 3:\n            res = _context.sent;\n            return _context.abrupt(\"return\", res.data.roomList);\n\n          case 5:\n          case \"end\":\n            return _context.stop();\n        }\n      }\n    }, _callee);\n  }));\n\n  return function getRoomList(_x) {\n    return _ref2.apply(this, arguments);\n  };\n}();\n\nvar ListContainer = styled.div.withConfig({\n  displayName: \"ChatRoomList__ListContainer\",\n  componentId: \"h3plj0-0\"\n})([\"width:20rem;padding:2rem 0;& > h2{text-align:center;margin:0;}& > ul{padding:0;}\"]);\nvar ItemContainer = styled.li.withConfig({\n  displayName: \"ChatRoomList__ItemContainer\",\n  componentId: \"h3plj0-1\"\n})([\"display:flex;height:4rem;padding:0.5em 1rem;background:white;transition:all 0.3 ease;& .message{flex:1;display:flex;flex-direction:column;margin-left:0.5em;& > *:first-child{font-weight:600;margin:0.25em 0;}& > *:nth-child(2){height:2.5em;color:#666;font-size:0.8em;line-height:1.25em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;}}& .time{margin:0.25em 0;color:#666;font-size:0.8em;}&:hover{opacity:0.9;background:#eee;cursor:pointer;}\"]);\n\nvar ChatRoomItem = function ChatRoomItem(props) {\n  var _props$item = props.item,\n      id = _props$item.id,\n      nickname = _props$item.nickname,\n      photo = _props$item.photo;\n  return /*#__PURE__*/_jsxs(ItemContainer, {\n    children: [/*#__PURE__*/_jsx(UserPhoto, {\n      src: photo,\n      margin: \"0\",\n      width: 4\n    }), /*#__PURE__*/_jsxs(\"div\", {\n      className: \"message\",\n      children: [' ', /*#__PURE__*/_jsx(\"div\", {\n        children: nickname\n      }), /*#__PURE__*/_jsx(\"div\", {\n        children: \"\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654 \\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\"\n      })]\n    }), /*#__PURE__*/_jsx(\"div\", {\n      className: \"time\",\n      children: \"\\uB0A0\\uC9DC\"\n    })]\n  });\n};\n\nvar ChatRoomList = function ChatRoomList(props) {\n  var currentUser = useContext(UserStateContext);\n\n  var _useAsync = useAsync({\n    promiseFn: getRoomList,\n    userId: currentUser.id\n  }),\n      roomList = _useAsync.data,\n      error = _useAsync.error,\n      isLoading = _useAsync.isLoading;\n\n  if (isLoading) return /*#__PURE__*/_jsx(CircularProgress, {});\n  if (error) return /*#__PURE__*/_jsx(\"div\", {\n    style: {\n      fontSize: '0.5em',\n      color: '#e74c3c'\n    },\n    children: \"\\uCC44\\uD305\\uBC29 \\uBAA9\\uB85D\\uC744 \\uAC00\\uC838\\uC624\\uC9C0 \\uBABB\\uD588\\uC2B5\\uB2C8\\uB2E4.\"\n  });\n  if (!roomList) return null;\n  return /*#__PURE__*/_jsxs(ListContainer, {\n    children: [/*#__PURE__*/_jsx(\"h2\", {\n      children: \"\\uCC44\\uD305\\uBAA9\\uB85D\"\n    }), /*#__PURE__*/_jsx(\"ul\", {\n      children: roomList.map(function (room) {\n        return /*#__PURE__*/_jsx(ChatRoomItem, {\n          item: room\n        });\n      })\n    })]\n  });\n};\n\nexport default ChatRoomList;","map":null,"metadata":{},"sourceType":"module"}