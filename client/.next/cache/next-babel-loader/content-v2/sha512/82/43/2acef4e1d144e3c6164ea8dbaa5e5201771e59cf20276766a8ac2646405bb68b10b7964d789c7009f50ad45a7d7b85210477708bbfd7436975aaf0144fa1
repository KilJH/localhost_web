{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"/Users/zknock/Develop/localhost_web/client/components/host/Chat/ChatRoomList.tsx\";\nimport { CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\nimport React, { useContext } from 'react';\nimport { useAsync } from 'react-async';\nimport styled from 'styled-components';\nimport { UserStateContext } from '../../../context/user';\nimport SERVER from '../../../utils/url';\nimport UserPhoto from '../../user/UserPhoto';\n\nconst getRoomList = async ({\n  userId\n}) => {\n  const res = await axios.post(`${SERVER}/api/message/room/list`, {\n    userId\n  });\n  return res.data.roomList;\n};\n\nconst ListContainer = styled.div.withConfig({\n  displayName: \"ChatRoomList__ListContainer\",\n  componentId: \"h3plj0-0\"\n})([\"width:20rem;padding:2rem 0;& > h2{text-align:center;margin:0;}& > ul{padding:0;}\"]);\nconst ItemContainer = styled.li.withConfig({\n  displayName: \"ChatRoomList__ItemContainer\",\n  componentId: \"h3plj0-1\"\n})([\"display:flex;height:4rem;padding:0.5em 1rem;background:white;transition:all 0.3 ease;& .message{flex:1;display:flex;flex-direction:column;margin-left:0.5em;& > *:first-child{font-weight:600;margin:0.25em 0;}& > *:nth-child(2){height:2.5em;color:#666;font-size:0.8em;line-height:1.25em;overflow:hidden;text-overflow:ellipsis;display:-webkit-box;-webkit-line-clamp:2;-webkit-box-orient:vertical;}}& .time{margin:0.25em 0;color:#666;font-size:0.8em;}&:hover{opacity:0.9;background:#eee;cursor:pointer;}\"]);\n\nconst ChatRoomItem = props => {\n  const {\n    id,\n    nickname,\n    photo\n  } = props.item;\n  return /*#__PURE__*/_jsxDEV(ItemContainer, {\n    children: [/*#__PURE__*/_jsxDEV(UserPhoto, {\n      src: photo,\n      margin: \"0\",\n      width: 4\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"message\",\n      children: [' ', /*#__PURE__*/_jsxDEV(\"div\", {\n        children: nickname\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 92,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n        children: \"\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654 \\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\\uCD5C\\uADFC \\uB300\\uD654\"\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 93,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 90,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: \"time\",\n      children: \"\\uB0A0\\uC9DC\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 98,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 88,\n    columnNumber: 3\n  }, this);\n};\n\nconst ChatRoomList = props => {\n  const currentUser = useContext(UserStateContext);\n  const {\n    data: roomList,\n    error,\n    isLoading\n  } = useAsync({\n    promiseFn: getRoomList,\n    userId: currentUser.id\n  });\n  if (isLoading) return /*#__PURE__*/_jsxDEV(CircularProgress, {}, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 111,\n    columnNumber: 24\n  }, this);\n  if (error) return /*#__PURE__*/_jsxDEV(\"div\", {\n    style: {\n      fontSize: '0.5em',\n      color: '#e74c3c'\n    },\n    children: \"\\uCC44\\uD305\\uBC29 \\uBAA9\\uB85D\\uC744 \\uAC00\\uC838\\uC624\\uC9C0 \\uBABB\\uD588\\uC2B5\\uB2C8\\uB2E4.\"\n  }, void 0, false, {\n    fileName: _jsxFileName,\n    lineNumber: 114,\n    columnNumber: 4\n  }, this);\n  if (!roomList) return null;\n  return /*#__PURE__*/_jsxDEV(ListContainer, {\n    children: [/*#__PURE__*/_jsxDEV(\"h2\", {\n      children: \"\\uCC44\\uD305\\uBAA9\\uB85D\"\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 122,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"ul\", {\n      children: roomList.map(room => /*#__PURE__*/_jsxDEV(ChatRoomItem, {\n        item: room\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 125,\n        columnNumber: 6\n      }, this))\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 123,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 121,\n    columnNumber: 3\n  }, this);\n};\n\nexport default ChatRoomList;","map":{"version":3,"sources":["/Users/zknock/Develop/localhost_web/client/components/host/Chat/ChatRoomList.tsx"],"names":["CircularProgress","axios","React","useContext","useAsync","styled","UserStateContext","SERVER","UserPhoto","getRoomList","userId","res","post","data","roomList","ListContainer","div","ItemContainer","li","ChatRoomItem","props","id","nickname","photo","item","ChatRoomList","currentUser","error","isLoading","promiseFn","fontSize","color","map","room"],"mappings":";;AAAA,SAASA,gBAAT,QAAiC,mBAAjC;AACA,OAAOC,KAAP,MAAkB,OAAlB;AACA,OAAOC,KAAP,IAAgBC,UAAhB,QAAkC,OAAlC;AACA,SAASC,QAAT,QAAyB,aAAzB;AACA,OAAOC,MAAP,MAAmB,mBAAnB;AACA,SAASC,gBAAT,QAAiC,uBAAjC;AACA,OAAOC,MAAP,MAAmB,oBAAnB;AACA,OAAOC,SAAP,MAAsB,sBAAtB;;AAaA,MAAMC,WAAW,GAAG,OAAO;AAAEC,EAAAA;AAAF,CAAP,KAAsB;AACzC,QAAMC,GAAG,GAAG,MAAMV,KAAK,CAACW,IAAN,CAAY,GAAEL,MAAO,wBAArB,EAA8C;AAC/DG,IAAAA;AAD+D,GAA9C,CAAlB;AAGA,SAAOC,GAAG,CAACE,IAAJ,CAASC,QAAhB;AACA,CALD;;AAOA,MAAMC,aAAa,GAAGV,MAAM,CAACW,GAAV;AAAA;AAAA;AAAA,wFAAnB;AAcA,MAAMC,aAAa,GAAGZ,MAAM,CAACa,EAAV;AAAA;AAAA;AAAA,2fAAnB;;AA2CA,MAAMC,YAAY,GAAIC,KAAD,IAAsB;AAC1C,QAAM;AAAEC,IAAAA,EAAF;AAAMC,IAAAA,QAAN;AAAgBC,IAAAA;AAAhB,MAA0BH,KAAK,CAACI,IAAtC;AACA,sBACC,QAAC,aAAD;AAAA,4BACC,QAAC,SAAD;AAAW,MAAA,GAAG,EAAED,KAAhB;AAAuB,MAAA,MAAM,EAAC,GAA9B;AAAkC,MAAA,KAAK,EAAE;AAAzC;AAAA;AAAA;AAAA;AAAA,YADD,eAEC;AAAK,MAAA,SAAS,EAAC,SAAf;AAAA,iBACE,GADF,eAEC;AAAA,kBAAMD;AAAN;AAAA;AAAA;AAAA;AAAA,cAFD,eAGC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,cAHD;AAAA;AAAA;AAAA;AAAA;AAAA,YAFD,eAUC;AAAK,MAAA,SAAS,EAAC,MAAf;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YAVD;AAAA;AAAA;AAAA;AAAA;AAAA,UADD;AAcA,CAhBD;;AAkBA,MAAMG,YAAY,GAAIL,KAAD,IAAkB;AACtC,QAAMM,WAAW,GAAGvB,UAAU,CAACG,gBAAD,CAA9B;AAEA,QAAM;AAAEO,IAAAA,IAAI,EAAEC,QAAR;AAAkBa,IAAAA,KAAlB;AAAyBC,IAAAA;AAAzB,MAAuCxB,QAAQ,CAAC;AACrDyB,IAAAA,SAAS,EAAEpB,WAD0C;AAErDC,IAAAA,MAAM,EAAEgB,WAAW,CAACL;AAFiC,GAAD,CAArD;AAKA,MAAIO,SAAJ,EAAe,oBAAO,QAAC,gBAAD;AAAA;AAAA;AAAA;AAAA,UAAP;AACf,MAAID,KAAJ,EACC,oBACC;AAAK,IAAA,KAAK,EAAE;AAAEG,MAAAA,QAAQ,EAAE,OAAZ;AAAqBC,MAAAA,KAAK,EAAE;AAA5B,KAAZ;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,UADD;AAKD,MAAI,CAACjB,QAAL,EAAe,OAAO,IAAP;AAEf,sBACC,QAAC,aAAD;AAAA,4BACC;AAAA;AAAA;AAAA;AAAA;AAAA;AAAA,YADD,eAEC;AAAA,gBACEA,QAAQ,CAACkB,GAAT,CAAaC,IAAI,iBACjB,QAAC,YAAD;AAAc,QAAA,IAAI,EAAEA;AAApB;AAAA;AAAA;AAAA;AAAA,cADA;AADF;AAAA;AAAA;AAAA;AAAA,YAFD;AAAA;AAAA;AAAA;AAAA;AAAA,UADD;AAUA,CA3BD;;AA6BA,eAAeR,YAAf","sourcesContent":["import { CircularProgress } from '@material-ui/core';\nimport axios from 'axios';\nimport React, { useContext } from 'react';\nimport { useAsync } from 'react-async';\nimport styled from 'styled-components';\nimport { UserStateContext } from '../../../context/user';\nimport SERVER from '../../../utils/url';\nimport UserPhoto from '../../user/UserPhoto';\n\ninterface Props {}\n\ninterface ItemProps {\n\titem: {\n\t\tid: number;\n\t\tnickname: string;\n\t\tphoto: string;\n\t\t// 최근대화?\n\t};\n}\n\nconst getRoomList = async ({ userId }) => {\n\tconst res = await axios.post(`${SERVER}/api/message/room/list`, {\n\t\tuserId,\n\t});\n\treturn res.data.roomList;\n};\n\nconst ListContainer = styled.div`\n\twidth: 20rem;\n\tpadding: 2rem 0;\n\n\t& > h2 {\n\t\ttext-align: center;\n\t\tmargin: 0;\n\t}\n\n\t& > ul {\n\t\tpadding: 0;\n\t}\n`;\n\nconst ItemContainer = styled.li`\n\tdisplay: flex;\n\t/* align-items: center; */\n\theight: 4rem;\n\tpadding: 0.5em 1rem;\n\tbackground: white;\n\n\ttransition: all 0.3 ease;\n\t& .message {\n\t\tflex: 1;\n\t\tdisplay: flex;\n\t\tflex-direction: column;\n\t\tmargin-left: 0.5em;\n\t\t& > *:first-child {\n\t\t\tfont-weight: 600;\n\t\t\tmargin: 0.25em 0;\n\t\t}\n\t\t& > *:nth-child(2) {\n\t\t\theight: 2.5em;\n\t\t\tcolor: #666;\n\t\t\tfont-size: 0.8em;\n\t\t\tline-height: 1.25em;\n\n\t\t\toverflow: hidden;\n\t\t\ttext-overflow: ellipsis;\n\t\t\tdisplay: -webkit-box;\n\t\t\t-webkit-line-clamp: 2;\n\t\t\t-webkit-box-orient: vertical;\n\t\t}\n\t}\n\t& .time {\n\t\tmargin: 0.25em 0;\n\t\tcolor: #666;\n\t\tfont-size: 0.8em;\n\t}\n\n\t&:hover {\n\t\topacity: 0.9;\n\t\tbackground: #eee;\n\t\tcursor: pointer;\n\t}\n`;\n\nconst ChatRoomItem = (props: ItemProps) => {\n\tconst { id, nickname, photo } = props.item;\n\treturn (\n\t\t<ItemContainer>\n\t\t\t<UserPhoto src={photo} margin='0' width={4} />\n\t\t\t<div className='message'>\n\t\t\t\t{' '}\n\t\t\t\t<div>{nickname}</div>\n\t\t\t\t<div>\n\t\t\t\t\t최근 대화최근 대화최근 대화최근 대화최근 대화최근 대화최근 대화최근\n\t\t\t\t\t대화최근 대화 최근 대화최근 대화최근 대화최근 대화최근 대화\n\t\t\t\t</div>\n\t\t\t</div>\n\t\t\t<div className='time'>날짜</div>\n\t\t</ItemContainer>\n\t);\n};\n\nconst ChatRoomList = (props: Props) => {\n\tconst currentUser = useContext(UserStateContext);\n\n\tconst { data: roomList, error, isLoading } = useAsync({\n\t\tpromiseFn: getRoomList,\n\t\tuserId: currentUser.id,\n\t});\n\n\tif (isLoading) return <CircularProgress />;\n\tif (error)\n\t\treturn (\n\t\t\t<div style={{ fontSize: '0.5em', color: '#e74c3c' }}>\n\t\t\t\t채팅방 목록을 가져오지 못했습니다.\n\t\t\t</div>\n\t\t);\n\tif (!roomList) return null;\n\n\treturn (\n\t\t<ListContainer>\n\t\t\t<h2>채팅목록</h2>\n\t\t\t<ul>\n\t\t\t\t{roomList.map(room => (\n\t\t\t\t\t<ChatRoomItem item={room} />\n\t\t\t\t))}\n\t\t\t</ul>\n\t\t</ListContainer>\n\t);\n};\n\nexport default ChatRoomList;\n"]},"metadata":{},"sourceType":"module"}