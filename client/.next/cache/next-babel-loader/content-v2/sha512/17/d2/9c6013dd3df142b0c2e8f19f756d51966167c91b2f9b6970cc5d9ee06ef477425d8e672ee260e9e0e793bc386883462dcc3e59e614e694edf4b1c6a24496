{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nimport _defineProperty from \"C:/Users/hby84/OneDrive/\\uBC14\\uD0D5 \\uD654\\uBA74/210428/localhost_web/node_modules/next/node_modules/@babel/runtime/helpers/esm/defineProperty\";\n\nvar _jsxFileName = \"C:\\\\Users\\\\hby84\\\\OneDrive\\\\\\uBC14\\uD0D5 \\uD654\\uBA74\\\\210428\\\\localhost_web\\\\client\\\\components\\\\host\\\\HostList.tsx\",\n    _this = this,\n    _s = $RefreshSig$();\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nimport React, { useState } from 'react';\nimport HostListItem from './HostListItem';\nimport styled from 'styled-components';\nimport TuneIcon from '@material-ui/icons/Tune';\nimport HostFilter from './HostFilter';\nvar HostListContainer = styled.section.withConfig({\n  displayName: \"HostList__HostListContainer\",\n  componentId: \"sc-1cr70nc-0\"\n})([\"overflow-y:auto;overflow-x:hidden;font-size:0.9em;flex:1;& > div{border-bottom:1px solid #aaa;}& > div:last-child{border-bottom:none;}& > div:nth-child(even){background:#eee;}\"]);\n_c = HostListContainer;\nvar SortContainer = styled.div.withConfig({\n  displayName: \"HostList__SortContainer\",\n  componentId: \"sc-1cr70nc-1\"\n})([\"display:flex;margin:0.5rem 0 0 0;& > button{flex:1;font-size:0.9em;border:none;display:inline-flex;align-items:center;&:hover{text-shadow:1px 1px 1px rgba(0,0,0,0.2);}&:active{color:#5197d5;}&.on{color:#5197d5;text-shadow:1px 1px 1px rgba(0,0,0,0.1);}}\"]);\n_c2 = SortContainer;\n\nvar HostList = function HostList(props) {\n  _s();\n\n  var origin = props.origin,\n      setOrigin = props.setOrigin,\n      nearbyHosts = props.nearbyHosts,\n      setNearbyHosts = props.setNearbyHosts,\n      coord = props.coord;\n\n  var _useState = useState({\n    property: 'distance',\n    asc: true\n  }),\n      sortOpt = _useState[0],\n      setSortOpt = _useState[1];\n\n  var _useState2 = useState(false),\n      filterOn = _useState2[0],\n      setFilterOn = _useState2[1];\n\n  var onOpenFilter = function onOpenFilter() {\n    setFilterOn(!filterOn);\n  };\n\n  var onCloseFilter = function onCloseFilter() {\n    setFilterOn(false);\n  };\n\n  var compareValue = function compareValue(a, b) {\n    return sortOpt.asc ? a - b : b - a;\n  }; // 가벼운 Sort를 위한 매핑\n\n\n  var mapped = nearbyHosts.map(function (el, i) {\n    switch (sortOpt.property) {\n      case 'distance':\n        return {\n          index: i,\n          value: el.place.geometry.distance\n        };\n\n      case 'rating':\n        return {\n          index: i,\n          value: el.rating\n        };\n\n      case 'follower':\n        return {\n          index: i,\n          value: el.follower\n        };\n\n      default:\n        return {\n          index: i,\n          value: el.place.geometry.distance\n        };\n    }\n  }); // 매핑된 배열 Sort\n\n  mapped.sort(function (a, b) {\n    return compareValue(a.value, b.value);\n  }); // Sort 결과에 따라 hostList 재배열\n\n  var sortedHosts = mapped.map(function (el) {\n    return nearbyHosts[el.index];\n  });\n\n  var onClickSort = function onClickSort(e) {\n    if (e.currentTarget.value === sortOpt.property) {\n      setSortOpt(_objectSpread(_objectSpread({}, sortOpt), {}, {\n        asc: !sortOpt.asc\n      }));\n    } else {\n      setSortOpt(_objectSpread(_objectSpread({}, sortOpt), {}, {\n        property: e.currentTarget.value\n      }));\n    }\n  };\n\n  return /*#__PURE__*/_jsxDEV(HostListContainer, {\n    children: [/*#__PURE__*/_jsxDEV(SortContainer, {\n      children: [/*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClickSort,\n        value: \"distance\",\n        className: sortOpt.property === 'distance' ? 'on' : '',\n        children: [\"\\uAC70\\uB9AC\\uC21C\", sortOpt.asc ? '▲' : '▼']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 103,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClickSort,\n        value: \"rating\",\n        className: sortOpt.property === 'rating' ? 'on' : '',\n        children: [\"\\uD3C9\\uC810\\uC21C\", sortOpt.asc ? '▲' : '▼']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 110,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onClickSort,\n        value: \"follower\",\n        className: sortOpt.property === 'follower' ? 'on' : '',\n        children: [\"\\uD314\\uB85C\\uC6CC\\uC21C\", sortOpt.asc ? '▲' : '▼']\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 117,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(\"button\", {\n        onClick: onOpenFilter,\n        children: [/*#__PURE__*/_jsxDEV(TuneIcon, {}, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 125,\n          columnNumber: 6\n        }, _this), /*#__PURE__*/_jsxDEV(\"span\", {\n          children: \"\\uD544\\uD130\"\n        }, void 0, false, {\n          fileName: _jsxFileName,\n          lineNumber: 126,\n          columnNumber: 6\n        }, _this)]\n      }, void 0, true, {\n        fileName: _jsxFileName,\n        lineNumber: 124,\n        columnNumber: 5\n      }, _this), /*#__PURE__*/_jsxDEV(HostFilter, {\n        onShow: filterOn,\n        origin: origin,\n        setOrigin: setOrigin,\n        setNearbyHosts: setNearbyHosts,\n        onClose: onCloseFilter,\n        coord: coord\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 128,\n        columnNumber: 5\n      }, _this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 102,\n      columnNumber: 4\n    }, _this), sortedHosts === null || sortedHosts === void 0 ? void 0 : sortedHosts.map(function (host) {\n      return /*#__PURE__*/_jsxDEV(HostListItem, {\n        host: host\n      }, host.id, false, {\n        fileName: _jsxFileName,\n        lineNumber: 138,\n        columnNumber: 5\n      }, _this);\n    })]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 101,\n    columnNumber: 3\n  }, _this);\n};\n\n_s(HostList, \"KtQZUyYUkkFVado5cdia1UeJk+k=\");\n\n_c3 = HostList;\nexport default HostList;\n\nvar _c, _c2, _c3;\n\n$RefreshReg$(_c, \"HostListContainer\");\n$RefreshReg$(_c2, \"SortContainer\");\n$RefreshReg$(_c3, \"HostList\");","map":{"version":3,"sources":["C:/Users/hby84/OneDrive/바탕 화면/210428/localhost_web/client/components/host/HostList.tsx"],"names":["React","useState","HostListItem","styled","TuneIcon","HostFilter","HostListContainer","section","SortContainer","div","HostList","props","origin","setOrigin","nearbyHosts","setNearbyHosts","coord","property","asc","sortOpt","setSortOpt","filterOn","setFilterOn","onOpenFilter","onCloseFilter","compareValue","a","b","mapped","map","el","i","index","value","place","geometry","distance","rating","follower","sort","sortedHosts","onClickSort","e","currentTarget","host","id"],"mappings":"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","sourcesContent":["import React, { Dispatch, SetStateAction, useState } from 'react';\r\nimport HostListItem from './HostListItem';\r\nimport styled from 'styled-components';\r\nimport { Host } from '../../interfaces';\r\nimport TuneIcon from '@material-ui/icons/Tune';\r\nimport HostFilter from './HostFilter';\r\n\r\ninterface Props {\r\n\torigin: Host[];\r\n\tsetOrigin: Dispatch<SetStateAction<Host[]>>;\r\n\tnearbyHosts: Host[];\r\n\tsetNearbyHosts: Dispatch<SetStateAction<Host[]>>;\r\n\tcoord: { lat: number; lng: number };\r\n}\r\nconst HostListContainer = styled.section`\r\n\toverflow-y: auto;\r\n\toverflow-x: hidden;\r\n\tfont-size: 0.9em;\r\n\tflex: 1;\r\n\t& > div {\r\n\t\tborder-bottom: 1px solid #aaa;\r\n\t}\r\n\t& > div:last-child {\r\n\t\tborder-bottom: none;\r\n\t}\r\n\t& > div:nth-child(even) {\r\n\t\tbackground: #eee;\r\n\t}\r\n`;\r\n\r\nconst SortContainer = styled.div`\r\n\tdisplay: flex;\r\n\tmargin: 0.5rem 0 0 0;\r\n\t& > button {\r\n\t\tflex: 1;\r\n\t\tfont-size: 0.9em;\r\n\t\tborder: none;\r\n\t\tdisplay: inline-flex;\r\n\t\talign-items: center;\r\n\t\t&:hover {\r\n\t\t\ttext-shadow: 1px 1px 1px rgba(0, 0, 0, 0.2);\r\n\t\t}\r\n\t\t&:active {\r\n\t\t\tcolor: #5197d5;\r\n\t\t}\r\n\t\t&.on {\r\n\t\t\tcolor: #5197d5;\r\n\t\t\ttext-shadow: 1px 1px 1px rgba(0, 0, 0, 0.1);\r\n\t\t}\r\n\t}\r\n`;\r\n\r\nconst HostList = (props: Props) => {\r\n\tconst { origin, setOrigin, nearbyHosts, setNearbyHosts, coord } = props;\r\n\tconst [sortOpt, setSortOpt] = useState({ property: 'distance', asc: true });\r\n\tconst [filterOn, setFilterOn] = useState(false);\r\n\r\n\tconst onOpenFilter = () => {\r\n\t\tsetFilterOn(!filterOn);\r\n\t};\r\n\tconst onCloseFilter = () => {\r\n\t\tsetFilterOn(false);\r\n\t};\r\n\r\n\tconst compareValue = (a, b) => {\r\n\t\treturn sortOpt.asc ? a - b : b - a;\r\n\t};\r\n\r\n\t// 가벼운 Sort를 위한 매핑\r\n\tconst mapped = nearbyHosts.map((el, i) => {\r\n\t\tswitch (sortOpt.property) {\r\n\t\t\tcase 'distance':\r\n\t\t\t\treturn { index: i, value: el.place.geometry.distance };\r\n\t\t\tcase 'rating':\r\n\t\t\t\treturn { index: i, value: el.rating };\r\n\t\t\tcase 'follower':\r\n\t\t\t\treturn { index: i, value: el.follower };\r\n\t\t\tdefault:\r\n\t\t\t\treturn { index: i, value: el.place.geometry.distance };\r\n\t\t}\r\n\t});\r\n\r\n\t// 매핑된 배열 Sort\r\n\tmapped.sort((a, b) => {\r\n\t\treturn compareValue(a.value, b.value);\r\n\t});\r\n\t// Sort 결과에 따라 hostList 재배열\r\n\tconst sortedHosts = mapped.map(el => {\r\n\t\treturn nearbyHosts[el.index];\r\n\t});\r\n\r\n\tconst onClickSort = (e: React.MouseEvent<HTMLButtonElement>) => {\r\n\t\tif (e.currentTarget.value === sortOpt.property) {\r\n\t\t\tsetSortOpt({ ...sortOpt, asc: !sortOpt.asc });\r\n\t\t} else {\r\n\t\t\tsetSortOpt({ ...sortOpt, property: e.currentTarget.value });\r\n\t\t}\r\n\t};\r\n\r\n\treturn (\r\n\t\t<HostListContainer>\r\n\t\t\t<SortContainer>\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={onClickSort}\r\n\t\t\t\t\tvalue='distance'\r\n\t\t\t\t\tclassName={sortOpt.property === 'distance' ? 'on' : ''}\r\n\t\t\t\t>\r\n\t\t\t\t\t거리순{sortOpt.asc ? '▲' : '▼'}\r\n\t\t\t\t</button>\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={onClickSort}\r\n\t\t\t\t\tvalue='rating'\r\n\t\t\t\t\tclassName={sortOpt.property === 'rating' ? 'on' : ''}\r\n\t\t\t\t>\r\n\t\t\t\t\t평점순{sortOpt.asc ? '▲' : '▼'}\r\n\t\t\t\t</button>\r\n\t\t\t\t<button\r\n\t\t\t\t\tonClick={onClickSort}\r\n\t\t\t\t\tvalue='follower'\r\n\t\t\t\t\tclassName={sortOpt.property === 'follower' ? 'on' : ''}\r\n\t\t\t\t>\r\n\t\t\t\t\t팔로워순{sortOpt.asc ? '▲' : '▼'}\r\n\t\t\t\t</button>\r\n\t\t\t\t<button onClick={onOpenFilter}>\r\n\t\t\t\t\t<TuneIcon />\r\n\t\t\t\t\t<span>필터</span>\r\n\t\t\t\t</button>\r\n\t\t\t\t<HostFilter\r\n\t\t\t\t\tonShow={filterOn}\r\n\t\t\t\t\torigin={origin}\r\n\t\t\t\t\tsetOrigin={setOrigin}\r\n\t\t\t\t\tsetNearbyHosts={setNearbyHosts}\r\n\t\t\t\t\tonClose={onCloseFilter}\r\n\t\t\t\t\tcoord={coord}\r\n\t\t\t\t/>\r\n\t\t\t</SortContainer>\r\n\t\t\t{sortedHosts?.map(host => (\r\n\t\t\t\t<HostListItem host={host} key={host.id} />\r\n\t\t\t))}\r\n\t\t</HostListContainer>\r\n\t);\r\n};\r\n\r\nexport default HostList;\r\n"]},"metadata":{},"sourceType":"module"}