{"ast":null,"code":"import { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nvar _jsxFileName = \"C:\\\\Users\\\\hby84\\\\OneDrive\\\\\\uBC14\\uD0D5 \\uD654\\uBA74\\\\210428\\\\localhost_web\\\\client\\\\components\\\\host\\\\HostMain.tsx\";\n\nfunction ownKeys(object, enumerableOnly) { var keys = Object.keys(object); if (Object.getOwnPropertySymbols) { var symbols = Object.getOwnPropertySymbols(object); if (enumerableOnly) symbols = symbols.filter(function (sym) { return Object.getOwnPropertyDescriptor(object, sym).enumerable; }); keys.push.apply(keys, symbols); } return keys; }\n\nfunction _objectSpread(target) { for (var i = 1; i < arguments.length; i++) { var source = arguments[i] != null ? arguments[i] : {}; if (i % 2) { ownKeys(Object(source), true).forEach(function (key) { _defineProperty(target, key, source[key]); }); } else if (Object.getOwnPropertyDescriptors) { Object.defineProperties(target, Object.getOwnPropertyDescriptors(source)); } else { ownKeys(Object(source)).forEach(function (key) { Object.defineProperty(target, key, Object.getOwnPropertyDescriptor(source, key)); }); } } return target; }\n\nfunction _defineProperty(obj, key, value) { if (key in obj) { Object.defineProperty(obj, key, { value: value, enumerable: true, configurable: true, writable: true }); } else { obj[key] = value; } return obj; }\n\nimport axios from 'axios';\nimport React, { useEffect, useState } from 'react';\nimport Maps from '../../components/reuse/Maps';\nimport SearchPlace from '../../components/search/SearchPlace';\nimport styled from 'styled-components';\nimport SERVER from '../../utils/url';\nimport HostList from '../../components/host/HostList';\nconst Container = styled.div.withConfig({\n  displayName: \"HostMain__Container\",\n  componentId: \"aeft7w-0\"\n})([\"display:flex;width:100%;height:85vh;& > div{padding:0.5rem;}& > div:first-child{flex:1;min-width:350px;display:flex;flex-direction:column;}& > div:nth-child(2){flex:2;}\"]);\n\nconst HostMain = props => {\n  const {\n    0: place,\n    1: setPlace\n  } = useState({\n    name: '',\n    formatted_address: '',\n    geometry: {\n      location: {\n        lat: 0,\n        lng: 0\n      }\n    }\n  });\n  const {\n    0: coord,\n    1: setCoord\n  } = useState({\n    lat: 0,\n    lng: 0\n  });\n  const {\n    0: nearbyHosts,\n    1: setNearbyHosts\n  } = useState([]);\n  const {\n    0: filteredHosts,\n    1: setFilteredHosts\n  } = useState([]); // 지역이 바뀌면 위,경도 가져오기\n\n  useEffect(() => {\n    setCoord(_objectSpread({}, place.geometry.location));\n  }, [place]); // 첫 로딩 때 GPS 읽어서 현재위치로\n\n  useEffect(() => {\n    if (navigator.geolocation) {\n      navigator.geolocation.getCurrentPosition(position => {\n        setCoord({\n          lat: position.coords.latitude || 0,\n          lng: position.coords.longitude || 0\n        });\n      });\n    }\n  }, []); // 위,경도 바뀌면 api요청 보내서 근처 호스트 목록 가져오기\n\n  useEffect(() => {\n    axios.post(`${SERVER}/api/host/nearByList`, {\n      latitude: coord.lat,\n      longitude: coord.lng\n    }).then(res => {\n      setNearbyHosts(res.data.nearbyhosts);\n    });\n  }, [coord]);\n  useEffect(() => {\n    setFilteredHosts(nearbyHosts);\n  }, [nearbyHosts]);\n  return /*#__PURE__*/_jsxDEV(Container, {\n    children: [/*#__PURE__*/_jsxDEV(\"div\", {\n      children: [/*#__PURE__*/_jsxDEV(SearchPlace, {\n        setPlace: setPlace\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 78,\n        columnNumber: 5\n      }, this), /*#__PURE__*/_jsxDEV(HostList, {\n        origin: nearbyHosts,\n        setOrigin: setNearbyHosts,\n        nearbyHosts: filteredHosts,\n        setNearbyHosts: setFilteredHosts,\n        coord: coord\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 79,\n        columnNumber: 5\n      }, this)]\n    }, void 0, true, {\n      fileName: _jsxFileName,\n      lineNumber: 77,\n      columnNumber: 4\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      children: /*#__PURE__*/_jsxDEV(Maps, _objectSpread(_objectSpread({}, coord), {}, {\n        nearbyHosts: nearbyHosts\n      }), void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 88,\n        columnNumber: 5\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 87,\n      columnNumber: 4\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 76,\n    columnNumber: 3\n  }, this);\n};\n\nexport default HostMain;","map":{"version":3,"sources":["C:/Users/hby84/OneDrive/바탕 화면/210428/localhost_web/client/components/host/HostMain.tsx"],"names":["axios","React","useEffect","useState","Maps","SearchPlace","styled","SERVER","HostList","Container","div","HostMain","props","place","setPlace","name","formatted_address","geometry","location","lat","lng","coord","setCoord","nearbyHosts","setNearbyHosts","filteredHosts","setFilteredHosts","navigator","geolocation","getCurrentPosition","position","coords","latitude","longitude","post","then","res","data","nearbyhosts"],"mappings":"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","sourcesContent":["import axios from 'axios';\r\nimport React, { useEffect, useState } from 'react';\r\nimport Maps from '../../components/reuse/Maps';\r\nimport SearchPlace from '../../components/search/SearchPlace';\r\nimport { Host, Place } from '../../interfaces';\r\nimport styled from 'styled-components';\r\nimport SERVER from '../../utils/url';\r\nimport HostList from '../../components/host/HostList';\r\n\r\ninterface Props {}\r\n\r\nconst Container = styled.div`\r\n\tdisplay: flex;\r\n\twidth: 100%;\r\n\theight: 85vh;\r\n\t& > div {\r\n\t\tpadding: 0.5rem;\r\n\t}\r\n\r\n\t& > div:first-child {\r\n\t\tflex: 1;\r\n\t\tmin-width: 350px;\r\n\t\tdisplay: flex;\r\n\t\tflex-direction: column;\r\n\t}\r\n\t& > div:nth-child(2) {\r\n\t\tflex: 2;\r\n\t}\r\n`;\r\n\r\nconst HostMain = (props: Props) => {\r\n\tconst [place, setPlace] = useState<Place>({\r\n\t\tname: '',\r\n\t\tformatted_address: '',\r\n\t\tgeometry: { location: { lat: 0, lng: 0 } },\r\n\t});\r\n\r\n\tconst [coord, setCoord] = useState({ lat: 0, lng: 0 });\r\n\tconst [nearbyHosts, setNearbyHosts] = useState<Host[]>([]);\r\n\tconst [filteredHosts, setFilteredHosts] = useState<Host[]>([]);\r\n\r\n\t// 지역이 바뀌면 위,경도 가져오기\r\n\tuseEffect(() => {\r\n\t\tsetCoord({ ...place.geometry.location });\r\n\t}, [place]);\r\n\r\n\t// 첫 로딩 때 GPS 읽어서 현재위치로\r\n\tuseEffect(() => {\r\n\t\tif (navigator.geolocation) {\r\n\t\t\tnavigator.geolocation.getCurrentPosition(position => {\r\n\t\t\t\tsetCoord({\r\n\t\t\t\t\tlat: position.coords.latitude || 0,\r\n\t\t\t\t\tlng: position.coords.longitude || 0,\r\n\t\t\t\t});\r\n\t\t\t});\r\n\t\t}\r\n\t}, []);\r\n\r\n\t// 위,경도 바뀌면 api요청 보내서 근처 호스트 목록 가져오기\r\n\tuseEffect(() => {\r\n\t\taxios\r\n\t\t\t.post(`${SERVER}/api/host/nearByList`, {\r\n\t\t\t\tlatitude: coord.lat,\r\n\t\t\t\tlongitude: coord.lng,\r\n\t\t\t})\r\n\t\t\t.then(res => {\r\n\t\t\t\tsetNearbyHosts(res.data.nearbyhosts);\r\n\t\t\t});\r\n\t}, [coord]);\r\n\r\n\tuseEffect(() => {\r\n\t\tsetFilteredHosts(nearbyHosts);\r\n\t}, [nearbyHosts]);\r\n\r\n\treturn (\r\n\t\t<Container>\r\n\t\t\t<div>\r\n\t\t\t\t<SearchPlace setPlace={setPlace} />\r\n\t\t\t\t<HostList\r\n\t\t\t\t\torigin={nearbyHosts}\r\n\t\t\t\t\tsetOrigin={setNearbyHosts}\r\n\t\t\t\t\tnearbyHosts={filteredHosts}\r\n\t\t\t\t\tsetNearbyHosts={setFilteredHosts}\r\n\t\t\t\t\tcoord={coord}\r\n\t\t\t\t/>\r\n\t\t\t</div>\r\n\t\t\t<div>\r\n\t\t\t\t<Maps {...coord} nearbyHosts={nearbyHosts} />\r\n\t\t\t</div>\r\n\t\t</Container>\r\n\t);\r\n};\r\n\r\nexport default HostMain;\r\n"]},"metadata":{},"sourceType":"module"}